## 成员变量
在Solidity中，成员变量（也就是状态变量）的可见性有四种public、private、internal和external。每种可见性关键字定义了状态变量能够被访问的范围

1. **public**状态变量可以在合约内外被访问。对于public状态变量，Solidity自动创建一个同名的getter函数，使得这个变量可以被外部访问。这意味着即使是其他合约也可以读取这个状态变量的值。
2. **private**状态变量只能在定义它的合约内部被访问，即使是由当前合约派生的合约也无法访问。
3. **internal**状态变量可以在定义它的合约内部以及继承该合约的派生合约中被访问，但不能通过外部调用访问。
4. **external**状态变量不能使用external可见性。external关键字仅适用于函数，表示该函数只能通过外部调用访问，不能通过内部调用（即，不能用this.functionName()和functionName()的方式调用）。

### 默认可见性
在Solidity中，如果你没有为状态变量指定可见性，它将默认为internal。这意味着变量可以在当前合约及派生合约中访问，但在合约外部不可见。

```solidity
codepragma solidity ^0.8.0;

contract MyContract {
  uint private privateVar; // 只能在MyContract内部访问
  uint public publicVar; // 内部外部都可访问，Solidity会为此变量生成一个getter函数
  uint internal internalVar; // 在MyContract及派生自MyContract的合约中可访问
  // uint external externalVar; // 这是非法的，状态变量不能被声明为external

  // 未显式声明可见性，将默认为internal
  uint defaultVisibilityVar;
}
```

## 函数
```solidity
function add(uint a, uint b) public pure returns (uint) {
  return a + b;
}
```

+ **函数名称**：add
+ **参数列表**：包含了两个无符号整数类型的参数uint a和uint b
+ **可见性修饰符**：public表示这个函数可以在合约外部被调用
+ **状态修改器**：pure表示这个函数不会读取或修改合约的状态
+ **返回值**：这个函数返回一个无符号整数uint，即参数a和b的和
+ **函数体**：函数体里执行了加法运算并返回了结果

## 合约函数的交易属性
### pure
+ **特性**：不读取也不修改合约的状态。
+ **用途**：通常用于执行一些数学运算或返回固定值的函数。
+ **gas消耗**：因为不与区块链状态交互，调用pure函数通常不消耗gas（如果是链外调用，比如调用只读）。

### view
+ **特性**：允许函数读取状态，但不允许修改状态。
+ **用途**：用于返回合约中的状态变量值或基于状态的计算，但不会改变任何状态。
+ **gas消耗**：view函数在链外调用时通常不消耗gas。然而，如果view函数在交易中被调用（例如，被另一个非view函数调用），可能会涉及gas消耗。

### payable
+ **特性**：能接收以太币（Ether），并修改合约的状态。
+ **用途**：任何需要接收以太币并改变合约状态的函数都应该标记为payable。例如，众筹合约的捐赠函数。
+ **gas消耗**：payable函数会消耗gas，因为它们改变了区块链上的状态。

## 一个完整的合约
```solidity
// 指定编译器版本
pragma solidity ^0.8.0;

// 定义合约
contract MyContract {
    // 状态变量
    uint public myVariable;

    // 事件声明
    event LogChange(address indexed sender, uint oldValue, uint newValue);

    // 修饰符
    modifier onlyOwner {
        require(msg.sender == owner, "Not the owner");
        _;
    }

    // 错误处理
    error Unauthorized(address caller);

    // 构造函数
    constructor() {
        // 构造函数逻辑
    }

    // 函数声明
    function myFunction(uint _myArg) public onlyOwner returns (bool) {
        // 函数逻辑
        if (_myArg != 0) {
            emit LogChange(msg.sender, myVariable, _myArg);
            myVariable = _myArg;
            return true;
        } else {
            revert Unauthorized(msg.sender);
        }
    }
}
```

## 数据类型
| **类型类别** | **数据类型** | **说明** |
| --- | --- | --- |
| 值类型 | bool | 布尔型，true/false |
|  | int/uint | 整数/无符号整数，不同大小（如int256/uint256） |
|  | address | 用于存储以太坊地址 |
| 引用类型 | array | 数组，可为固定大小或动态大小 |
|  | struct | 结构体，用于定义新的数据类型 |
|  | mapping | 映射，键值对集合，键为单一类型，值可以是任意类型 |
| 枚举类型 | enum | 允许定义一组命名常量 |
| 合约类型 | contract | 用于引用其他合约 |


4-6  
   
 

