---
slug: sudo--s-如何不输入密码
title: sudo -s 如何不输入密码
authors: [sumingcheng]
tags: [dev-tools]
date: 2024-10-23
---

# sudo -s 如何不输入密码



 **Link:** [https://zhuanlan.zhihu.com/p/2683520378]



在 Linux 系统中，`sudo` 命令用于以超级用户权限执行命令。使用 `sudo -s` 可以启动一个新的 shell，允许你在这个 shell 中执行命令，而不必每次都输入 `sudo`。

有时你会发现使用 `sudo -s` 时不需要输入密码，这通常是由以下几个原因造成的

## 用户权限配置  

`sudo` 的权限是由 `/etc/sudoers` 文件控制的。如果该文件中为某个用户或用户组配置了特定的规则，允许他们在执行 `sudo` 命令时不需要输入密码。例如：

```
username ALL=(ALL) NOPASSWD: ALL
```

这条规则意味着用户 `username` 可以在任何主机上以任何用户身份运行所有命令，而不需要输入密码。

## 会话有效期  

在第一次使用 `sudo` 时，如果输入了密码，该会话在默认情况下会保持有效（通常是 5-15 分钟），在此期间再次使用 `sudo` 时就不需要输入密码。使用 `sudo -s` 在这个时间范围内也不会要求输入密码。

## 特定命令的例外  

有时，系统管理员可能会配置某些特定命令允许不需要密码。例如，可能有规则允许在不要求密码的情况下使用某些管理工具。

## sudo 版本和配置差异  

不同版本的 `sudo` 和系统的配置可能会有所不同，导致某些行为不一致。

如果你想检查具体的配置，可以使用 `sudo -l` 命令查看当前用户的 `sudo` 权限设置。

## 配置 sudo 不输密码  

**编辑 sudoers 文件**：使用命令 `sudo visudo` 来编辑 `/etc/sudoers` 文件。这样可以避免语法错误导致的问题。

**添加配置行**：在文件中添加如下行，替换 `username` 为你的用户名

```
username ALL=(ALL) NOPASSWD: ALL

这行的意思是用户 username 在所有主机上以任何用户身份执行所有命令时不需要输入密码。
```

**保存更改**：保存并退出编辑器。`visudo` 会自动检查语法并确保没有错误。

**测试配置**：打开一个新的终端，尝试运行 `sudo` 命令以确认不再要求输入密码。