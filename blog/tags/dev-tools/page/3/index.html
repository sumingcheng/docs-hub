<!doctype html><html lang=zh-CN dir=ltr class="blog-wrapper blog-tags-post-list-page plugin-blog plugin-id-default" data-has-hydrated=false><meta charset=UTF-8><meta name=generator content="Docusaurus v3.6.3"><title data-rh=true>115 篇博文 含有标签「开发工具与环境」 | Sumingcheng's Document Center</title><meta data-rh=true name=viewport content="width=device-width,initial-scale=1.0"><meta data-rh=true name=twitter:card content=summary_large_image><meta data-rh=true property=og:image content=https://sumingcheng.github.io/docs-hub/img/docusaurus-social-card.jpg><meta data-rh=true name=twitter:image content=https://sumingcheng.github.io/docs-hub/img/docusaurus-social-card.jpg><meta data-rh=true property=og:url content=https://sumingcheng.github.io/docs-hub/blog/tags/dev-tools/page/3><meta data-rh=true property=og:locale content=zh_CN><meta data-rh=true name=docusaurus_locale content=zh-CN><meta data-rh=true name=docsearch:language content=zh-CN><meta data-rh=true name=keywords content=素明诚,sumingcheng,技术文档,博客,前端开发,后端开发,Web开发,JavaScript,TypeScript,Vue,React,Go,Python,Java><meta data-rh=true name=author content="素明诚 (sumingcheng)"><meta data-rh=true property=og:title content="115 篇博文 含有标签「开发工具与环境」 | Sumingcheng's Document Center"><meta data-rh=true name=description content=开发工具和环境配置相关文章><meta data-rh=true property=og:description content=开发工具和环境配置相关文章><meta data-rh=true name=docusaurus_tag content=blog_tags_posts><meta data-rh=true name=docsearch:docusaurus_tag content=blog_tags_posts><link data-rh=true rel=icon href=/docs-hub/img/favicon.ico><link data-rh=true rel=canonical href=https://sumingcheng.github.io/docs-hub/blog/tags/dev-tools/page/3><link data-rh=true rel=alternate href=https://sumingcheng.github.io/docs-hub/blog/tags/dev-tools/page/3 hreflang=zh-CN><link data-rh=true rel=alternate href=https://sumingcheng.github.io/docs-hub/blog/tags/dev-tools/page/3 hreflang=x-default><link data-rh=true rel=preconnect href=https://NDVC80EYRA-dsn.algolia.net crossorigin><link rel=alternate type=application/rss+xml href=/docs-hub/blog/rss.xml title="Sumingcheng's Document Center RSS Feed"><link rel=alternate type=application/atom+xml href=/docs-hub/blog/atom.xml title="Sumingcheng's Document Center Atom Feed"><link rel=search type=application/opensearchdescription+xml title="Sumingcheng's Document Center" href=/docs-hub/opensearch.xml><script src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js async crossorigin></script><link rel=stylesheet href=/docs-hub/assets/css/styles.01c58cd0.css><script src=/docs-hub/assets/js/main.2380744e.js defer></script><script src=/docs-hub/assets/js/runtime~main.d000ca4b.js defer></script><body class=navigation-with-keyboard><script>!function(){var t,e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t=null!==e?e:"light",document.documentElement.setAttribute("data-theme",t)}(),function(){try{for(var[t,e]of new URLSearchParams(window.location.search).entries())if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id=__docusaurus><div role=region aria-label=跳到主要内容><a class=skipToContent_fXgn href=#__docusaurus_skipToContent_fallback>跳到主要内容</a></div><nav aria-label=主导航 class="navbar navbar--fixed-top"><div class=navbar__inner><div class=navbar__items><button aria-label=切换导航栏 aria-expanded=false class="navbar__toggle clean-btn" type=button><svg width=30 height=30 viewBox="0 0 30 30" aria-hidden=true><path stroke=currentColor stroke-linecap=round stroke-miterlimit=10 stroke-width=2 d="M4 7h22M4 15h22M4 23h22"/></svg></button><a class=navbar__brand href=/docs-hub/><div class=navbar__logo><img src=/docs-hub/img/smc.jpg alt="Sumingcheng Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src=/docs-hub/img/smc.jpg alt="Sumingcheng Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Sumingcheng</b></a></div><div class="navbar__items navbar__items--right"><a aria-current=page class="navbar__item navbar__link navbar__link--active" href=/docs-hub/blog>Blog</a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href=# aria-haspopup=true aria-expanded=false role=button class=navbar__link>Backend</a><ul class=dropdown__menu><li><a class=dropdown__link href=/docs-hub/category/基础>Go</a><li><a class=dropdown__link href=/docs-hub/category/基础-1>Python</a><li><a class=dropdown__link href=/docs-hub/category/基础-2>Java</a><li><a class=dropdown__link href=/docs-hub/Backend/Docker/Docker-基础命令>Docker</a><li><a class=dropdown__link href=/docs-hub/Backend/MySQL/常用SQL语句>MySQL</a><li><a class=dropdown__link href=/docs-hub/Backend/Redis/Redis-基础使用>Redis</a><li><a class=dropdown__link href=/docs-hub/Backend/Nginx/Nginx基础入门>Nginx</a><li><a class=dropdown__link href=/docs-hub/Backend/ElasticSearch/ElasticSearch-安装使用>ElasticSearch</a><li><a class=dropdown__link href=/docs-hub/Backend/MQ/Go-Kafka安装使用指南>MQ</a><li><a class=dropdown__link href=/docs-hub/Backend/MongoDB/MongoDB安装与使用>MongoDB</a><li><a class=dropdown__link href=/docs-hub/Backend/Git/Git-提交规范>Git</a><li><a class=dropdown__link href=/docs-hub/Backend/Regular/正则表达式基础>Regular</a></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href=# aria-haspopup=true aria-expanded=false role=button class=navbar__link>Frontend</a><ul class=dropdown__menu><li><a class=dropdown__link href=/docs-hub/category/es3-es5>JavaScript</a><li><a class=dropdown__link href=/docs-hub/Frontend/TypeScript/TypeScript简介>TypeScript</a><li><a class=dropdown__link href=/docs-hub/Frontend/Node/NodeJS基本认知>Node</a><li><a class=dropdown__link href=/docs-hub/category/vue基础入门>Vue</a><li><a class=dropdown__link href=/docs-hub/Frontend/React/初识React>React</a><li><a class=dropdown__link href=/docs-hub/Frontend/Engineering/核心-Web-指标>Engineering</a><li><a class=dropdown__link href=/docs-hub/Frontend/HTML/DOCTYPE>HTML</a><li><a class=dropdown__link href=/docs-hub/Frontend/CSS/CSS-选择器-权重-匹配规则>CSS</a><li><a class=dropdown__link href=/docs-hub/Frontend/DOM/DOM初识-JS对象-XML-幻灯片案例展示>DOM</a><li><a class=dropdown__link href=/docs-hub/Frontend/BOM/深入理解BOM>BOM</a><li><a class=dropdown__link href=/docs-hub/Frontend/Electron/初识-基础>Electron</a><li><a class=dropdown__link href=/docs-hub/Frontend/Quasar/Quasar项目搭建>Quasar</a></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href=# aria-haspopup=true aria-expanded=false role=button class=navbar__link>Interview</a><ul class=dropdown__menu><li><a class=dropdown__link href=/docs-hub/Interview/Backend/占位>Backend</a><li><a class=dropdown__link href=/docs-hub/Interview/Frontend/浏览器是如何渲染页面的>Frontend</a></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href=# aria-haspopup=true aria-expanded=false role=button class=navbar__link>Network</a><ul class=dropdown__menu><li><a class=dropdown__link href=/docs-hub/Network/AJAX/JSON基础与数据解析-JSON方法-AJAX初识>AJAX</a><li><a class=dropdown__link href=/docs-hub/Network/HTTP/URL-客户端-服务端-域名操作>HTTP</a></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href=# aria-haspopup=true aria-expanded=false role=button class=navbar__link>Web3</a><ul class=dropdown__menu><li><a class=dropdown__link href=/docs-hub/Web3/IPFS/IPFS-Desktop-运行指南>IPFS</a><li><a class=dropdown__link href=/docs-hub/Web3/Learning/Web2如何转Web3>Learning</a></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href=# aria-haspopup=true aria-expanded=false role=button class=navbar__link>Resource</a><ul class=dropdown__menu><li><a class=dropdown__link href=/docs-hub/Resource/Soft/Windows装机软件>Soft</a></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href=# aria-haspopup=true aria-expanded=false role=button class=navbar__link>Other</a><ul class=dropdown__menu><li><a class=dropdown__link href=/docs-hub/Other/CookBook/柠檬酸辣无骨鸡爪>CookBook</a><li><a class=dropdown__link href=/docs-hub/Other/Notes/使用指南>Notes</a></ul></div><a href=https://github.com/sumingcheng target=_blank rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub 仓库"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type=button disabled title=切换浅色/暗黑模式（当前为浅色模式） aria-label=切换浅色/暗黑��模式（当前为浅色模式） aria-live=polite aria-pressed=false><svg viewBox="0 0 24 24" width=24 height=24 class=lightToggleIcon_pyhR><path fill=currentColor d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"/></svg><svg viewBox="0 0 24 24" width=24 height=24 class=darkToggleIcon_wfgR><path fill=currentColor d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"/></svg></button></div><div class=navbarSearchContainer_Bca1><button type=button class="DocSearch DocSearch-Button" aria-label="搜索 (Command+K)"><span class=DocSearch-Button-Container><svg width=20 height=20 class=DocSearch-Search-Icon viewBox="0 0 20 20" aria-hidden=true><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke=currentColor fill=none fill-rule=evenodd stroke-linecap=round stroke-linejoin=round /></svg><span class=DocSearch-Button-Placeholder>搜索</span></span><span class=DocSearch-Button-Keys></span></button></div></div></div><div role=presentation class=navbar-sidebar__backdrop></div></nav><div id=__docusaurus_skipToContent_fallback class="main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class=row><aside class="col col--3"><nav class="sidebar_re4s thin-scrollbar" aria-label=最近博文导航><div class="sidebarItemTitle_pO2u margin-bottom--md">所有文章</div><div role=group><h3 class=yearGroupHeading_rMGB>2024</h3><ul class="sidebarItemList_Yudw clean-list"><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/cursor-使用指南配置其他模型永久白嫖方案提示词优化>Cursor 使用指南配置其他模型永久白嫖方案提示词优化</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/python-去除文件名称内�的特殊字符>Python 去除文件名称内的特殊字符</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/vs-code-安装使用中文简体插件>VS Code 安装使用中文简体插件</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/gitmoji-cli-使用>gitmoji-cli 使用</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/你可以从-docker-inspect-获取哪些信息>你可以从 docker inspect 获取哪些信息</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/web-开发下-mvc-流程>Web 开发下 MVC 流程</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/四种主要rbac模型>四种主要RBAC模型</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/导出浏览器-cookies>导出浏览器 Cookies</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/iframe-在同源和跨域的通信方式>iframe 在同源和跨域的通信方式</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/packagejson-三种类型的依赖>packagejson 三种类型的依赖</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/关闭恢复-ubuntu-gui>关闭恢复 Ubuntu GUI</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/jsdiff-使用指南>jsdiff 使用指南</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/禁用微软拼音输入法简体繁体热键>禁用微软拼音输入法简体繁体热键</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/python-多线程编程实践>Python 多线程编程实践</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/生成自签名-ssl-证书>生成自签名 SSL 证书</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/linux-mc-文件管理工具快速删除文件>Linux mc 文件管理工具快速删除文件</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/linux-挂载磁盘的步骤>Linux 挂载磁盘的步骤</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/go-面向接口和依赖注入的编写逻辑>Go 面向接口和依赖注入的编写逻辑</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/解决-vue-中的事件冒泡问题>解决 Vue 中的事件冒泡问题</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/linux-不输入密码获取-root-权限>Linux 不输入密码获取 root 权限</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/whispercpp-安装与使用教程>Whispercpp 安装与使用教程</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/windows-上安装-cmake>Windows 上安装 CMake</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/windows-安装-mingw-w64>Windows 安装 MinGW-W64</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/conda-依赖管理和环境管理>Conda 依赖管理和环境管理</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/windows-环境下配置-fultter-开发环境>Windows 环境下配置 Fultter 开发环境</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/pandoc-开源的文档转换工具>Pandoc 开源的文档转换工具</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/poetry-安装方式的几种方式>Poetry 安装方式的几种方式</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/sudo--s-如何不输入密码>sudo -s 如何不输入密码</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/go语言实践开闭原则非侵入式设计与装饰器模式>Go语言实践开闭原则非侵入式设计与装饰器模式</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/python-的包如何导入导出和管理>Python 的包如何导入导出和管理</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/解决使用-tabby-时-screen-和-xterm-终端无法使用鼠标滚动页面>解决使用 Tabby 时 Screen 和 Xterm 终端无法使用鼠标滚动页面</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/解决远程开发时-git-的安全策略和权限问题>解决远程开发时 Git 的安全策略和权限问题</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/解决远程开发时-jetbrains-ide-版本已过期的问题>解决远程开发时 JetBrains IDE 版本已过期的问题</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/linux-pip-配置国内源>Linux pip 配置国内源</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/windows-pip-配置国内源>Windows pip 配置国内源</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/ubuntu-解决-fc-cache-命令缺失导致的-initramfs-tools-更新失败-的问题>Ubuntu 解决 fc-cache 命令缺失导致的 initramfs-tools 更新失败 的问题</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/什么是数据定义语言ddl>什么是数据定义语言DDL</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/git-批量仓库提交者信息>Git 批量仓库提交者信息</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/linux-�全方面配置-bash-提升体验>Linux 全方面配置 Bash 提升体验</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/ubuntu-上安装和配置-docker>Ubuntu 上安装和配置 Docker</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/什么是浏览器的-mixed-content-问题>什么是浏览器的 Mixed Content 问题</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/linux-mongodb-数据的导出和导入>Linux MongoDB 数据的导出和导入</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/linux-使用-tar-命令进行迁移>Linux 使用 tar 命令进行迁移</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/docker-更换镜像源阿里科大网易腾讯中科大微软官方>Docker 更换镜像源阿里科大网易腾讯中科大微软官方</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/fastgpt47--chatglm3-6b--m3e-本地部署>FastGPT47  chatglm3-6b  m3e 本地部署</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/单元测试和集成测试的区别>单元测试和集成测试的区别</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/windows10-安装-miniconda>Windows10 安装 Miniconda</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/systemd-常用命令>systemd 常用命令</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/常用的-journalctl-命令总结>常用的 journalctl 命令总结</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/什么是控制反转ioc>什么是控制反转IoC</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/python-根据-markdown-目录创建文件文件夹>Python 根据 Markdown 目录创建文件文件夹</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/linux-系统中-所有权ownership和操作权permissions>Linux 系统中 所有权Ownership和操作权Permissions</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/go-使用-orm-插入一个-null-值>Go 使用 ORM 插入一个 NULL 值</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/docker-danglingunused--images>Docker DanglingUnused  Images</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/kubernetesk8s集群-docker-作为容器运行时>KubernetesK8s集群 Docker 作为容器运行时</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/windows-上为-wsl2-设置端口转发实现局域网访问>Windows 上为 WSL2 设置端口转发实现局域网访问</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/linux-配置系统代理临时代理>Linux 配置系统代理临时代理</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/ubuntu-上安装-docker-和-docker-compose>Ubuntu 上安装 Docker 和 Docker Compose</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/修改-ubuntu-2204-中的-kubernetes-包源>修改 Ubuntu 2204 中的 Kubernetes 包源</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/设置-ssh-密钥进行身份验证>设置 SSH 密钥进行身份验证</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/microk8s-单机集群上的服务负载均衡实践>Microk8s 单机集群上的服务负载均衡实践</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/snap-常用命令代理配置>Snap 常用命令代理配置</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/ubuntu-安装-microk8s>Ubuntu 安装 MicroK8s</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/安装-helm-配置代理>安装 Helm 配置代理</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/nginx-不同场景的-log-format-示例>Nginx 不同场景的 log format 示例</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/vscode-ssh开发免密登录>VSCode SSH开发免密登录</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/cpolar安装与使用内网穿透工具推荐>Cpolar安装与使用内网穿透工具推荐</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/剪枝pruning和量化quantization的区别>剪枝Pruning和量化Quantization的区别</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/conda-和-pip-的关系与区别>conda 和 pip 的关系与区别</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/npm-配置本地代理>npm 配置本地代理</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/conda-使用指南与常用命令>Conda 使用指南与常用命令</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/解决-naive-ui-的n-input-number-组件在表单验证失效>解决 naive-ui 的n-input-number 组件在表单验证失效</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/解决非表单元素无法聚焦问题>解决非表单元素无法聚焦问题</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/linux-redis-cli-常用操作命令>Linux redis-cli 常用操作命令</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/linux-tig-使用指南>Linux Tig 使用指南</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/err-ssl-version-or-cipher-mismatch-浏览器错误>ERR SSL VERSION OR CIPHER MISMATCH 浏览器错误</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/kubernetes-面试常见问题>Kubernetes 面试常见问题</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/wrk-性能测试安装使用参数解析>wrk 性能测试安装使用参数解析</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/stanford-econ295cs323-i-2024-the-age-of-ai-eric-schmidt-translated-to-chinese>Stanford ECON295CS323 I 2024 The Age of AI Eric Schmidt Translated to Chinese</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/kubernetes-常用命令及其缩写形式>Kubernetes 常用命令及其缩写形式</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/kubectl-测试集群与外部网络连通性>kubectl 测试集群与外部网络连通性</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/go-项目打包不同平台和版本>Go 项目打包不同平台和版本</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/linux-安装-minikube-详细操作>Linux 安装 Minikube 详细操作</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/linux-安装-kubectl>Linux 安装 kubectl</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/linux-rancher-快速配置-k8s>Linux Rancher 快速配置 K8S</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/docker-配置代理临时永久设置>Docker 配置代理临时永久设置</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/linux-安装使用-filebrowser>Linux 安装使用 FileBrowser</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/harbor-配置并生成认证信息>Harbor 配置并生成认证信息</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/linux-bashtop-安装使用指南>Linux Bashtop 安装使用指南</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/go-bcrypt-加密和验证>Go bcrypt 加密和验证</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/go-切片缩容>Go 切片缩容</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/vault-初始化与配置>Vault 初始化与配置</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/javascript-的可选链操作符->JavaScript 的可选链操作符</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/linux-tree-命令详解>Linux tree 命令详解</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/ubuntu-22044-lts-x86-64-手动安装-docker>Ubuntu 22044 LTS x86 64 手动安装 Docker</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/ubuntu-如何完全重新安装某个应用>Ubuntu 如何完全重新安装某个应用</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/linux-配置和使用-screen>Linux 配置和使用 Screen</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/git-tag-创建提交删除>Git tag 创建提交删除</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/发布-docker-镜像到-github-packages>发布 Docker 镜像到 GitHub Packages</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/go-strconv-包的主要功能>Go strconv 包的主要功能</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/nginx-代理-eventsstream-接口配置优化>Nginx 代理 EventsStream 接口配置优化</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/cookie-和-session-的区别>Cookie 和 Session 的区别</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/用户态和内核态>用户态和内核态</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/axios-状态码处理范围>Axios 状态码处理范围</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/go-gin-封装-translations-插件>Go Gin 封装 translations 插件</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/如何上传镜像到-docker-hub>如何上传镜像到 Docker Hub</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/nextjs-报错-warning-extra-attributes-from-the-server-style>Nextjs 报错 Warning Extra attributes from the server style</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/go-gin-常用的验证规则>Go Gin 常用的验证规则</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/httponly-的用处>HttpOnly 的用处</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/go-get-命令详解>go get 命令详解</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/linux-ollama-常用命令和-api-调用>Linux Ollama 常用命令和 API 调用</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/什么是服务发现>什么是服务发现</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/consul-功能详解实践服务注册和发现案例>Consul 功能详解实践服务注册和发现案例</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/git-保留主分支的最近一次提交放弃之前所有的提交>Git 保留主分支的最近一次提交放弃之前所有的提交</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/go-全局配置的四种方式>Go 全局配置的四种方式</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/go-的v-v-v-有什么区别>Go 的v v v 有什么区别</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/悲观锁和乐观锁的区别>悲观锁和乐观锁的区别</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/github-使用个人访问令牌pat克隆项目>github 使用个人访问令牌PAT克隆项目</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/数据库规范化-1nf-到-3nf-的详解>数据库规范化 1NF 到 3NF 的详解</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/go-语言的-init-函数执行顺序>Go 语言的 init 函数执行顺序</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/修改-go-module-代理>修改 Go Module 代理</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/go-项目使用-alpine-构建镜像>Go 项目使用 Alpine 构建镜像</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/jwtpayload字段解释>JWTpayload字段解释</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/什么是倒排索引inverted-index>什么是倒排索引Inverted Index</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/常见的访问控制模型和表结构>常见的访问控制模型和表结构</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/算法中的大o表示法big-o-notation>算法中的大O表示法Big O notation</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/静态链接库static-libraries和动态链接库dynamic-libraries>静态链接库Static Libraries和动态链接库Dynamic Libraries</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/linux-安装-go-配置环境变量>Linux 安装 Go 配置环境变量</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/pnpm-将子项目作为依赖引入项目>pnpm 将子项目作为依赖引入项目</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/git-提交规范之-commit-标题>Git 提交规范之 commit 标题</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/国内-docker-配置-atomhub-镜像仓库>国内 Docker 配置 atomhub 镜像仓库</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/linux-命令-nvidia-smi-参数>Linux 命令 nvidia-smi 参数</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/go-创建-goroutine-的四种方式>Go 创建 goroutine 的四种方式</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/go-搭建并使用-goproxy-作为代理服务器>Go 搭建并使用 goproxy 作为代理服务器</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/embed-包在-go-使用场景>embed 包在 Go 使用场景</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/如何编写版本号语义化版本控制规范>如何编写版本号语义化版本控制规范</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/go-的-goproxy-和-gonoproxy-的配置和使用>Go 的 GOPROXY 和 GONOPROXY 的配置和使用</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/go-使用-swagger>Go 使用 Swagger</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/go-语言的-go-get-命令时禁用模块的哈希校验功能>Go 语言的 go get 命令时禁用模块的哈希校验功能</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/jwt-签名和验证签名的过程>JWT 签名和验证签名的过程</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/bash-设置历史记录的最大条数>Bash 设置历史记录的最大条数</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/linux-使用-rsync-传输文件>Linux 使用 rsync 传输文件</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/zsh-设置历史记录的最大条数>Zsh 设置历史记录的最大条数</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/express-中使用-winston-记录日志>Express 中使用 Winston 记录日志</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/docker-查看-volume-位置>docker 查看 volume 位置</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/linux-micro-使用和常用插件配置>Linux Micro 使用和常用插件配置</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/ubuntu-2004-更换国内镜像源>Ubuntu 2004 更换国内镜像源</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/在-linux-设置北京时间>在 Linux 设置北京时间</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/docker-提示too-many-requests-you-have-reached-your-pull-rate-limit>Docker 提示Too many requests You have reached your pull rate limit</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/linux-安装-minio>Linux 安装 MinIO</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/potplayer-快捷键>PotPlayer 快捷键</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/如何编写-go-语言的单元测试>如何编写 Go 语言的单元测试</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/如何编写-go-语言的性能测试>如何编写 Go 语言的性能测试</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/监控单机docker容器使用cadvisorprometheus和grafana>监控单机Docker容器使用cAdvisorPrometheus和Grafana</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/linux-命令行实用的小技巧>Linux 命令行实用的小技巧</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/go-fmt-格式化输出>Go fmt 格式化输出</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/go-语言中-defer-语句>Go 语言中 defer 语句</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/go-语言中切片的声明初始化和操作详解>Go 语言中切片的声明初始化和操作详解</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/linux-运行-go-文件>Linux 运行 go 文件</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/docker-镜像优化策略>Docker 镜像优化策略</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/curl-参数和使用>curl 参数和使用</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/wget-基本用法>wget 基本用法</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/配置-git-走本地代理>配置 Git 走本地代理</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/linux-nano-优化配置-nanorc-提升效率和舒适度>Linux nano 优化配置 nanorc 提升效率和舒适度</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/nano-快捷键使用指南>nano 快捷键使用指南</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/pm2-常用命令>PM2 常用命令</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/chrome-http-获取麦克风>Chrome http 获取麦克风</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/go-中的-atomic-的使用场景>Go 中的 atomic 的使用场景</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/docker-compose-配置卷示例>docker-compose 配置卷示例</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/pyenv-常用命令>pyenv 常用命令</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/git-操作远程分支>git 操作远程分支</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/linux-修改-root-用户的密码>Linux 修改 root 用户的密码</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/linux-使用-zstd-解压缩>Linux 使用 zstd 解压缩</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/docker-配置代理>Docker 配置代理</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/npm-设置源-淘宝阿里腾讯华为网易中科清华>npm 设置源 淘宝阿里腾讯华为网易中科清华</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/linux-使用-skopeo>Linux 使用 skopeo</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/docker-compose-命令详解>Docker Compose 命令详解</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/docker-compose-配置字段详解>docker-compose 配置字段详解</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/win11-设置开机直接进入桌面>Win11 设置开机直接进入桌面</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/常用的-docker-compose-命令行选项>常用的 docker-compose 命令行选项</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/docker-的-layer-是什么详解>Docker 的 Layer 是什么详解</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/docker-镜像打包迁移>Docker 镜像打包迁移</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/linux-推荐安装工具>Linux 推荐安装工具</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/pr-和-mr-的区别>PR 和 MR 的区别</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/windows-设置程序开机自动启动>Windows 设置程序开机自动启动</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/linux--安装-zsh-并配置-powerlevel10k-主题>Linux  安装 zsh 并配置 powerlevel10k 主题</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/linux-上传和下载-lrzsz>Linux 上传和下载 lrzsz</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/zsh-中使用-agnoster-主题>zsh 中使用 agnoster 主题</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/ss-命令的基本用法>ss 命令的基本用法</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/linux-ufw-常用命令>Linux ufw 常用命令</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/使用-firewalld-放开关闭端口>使用 firewalld 放开关闭端口</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/docker-批量删除所有容器>Docker 批量删除所有容器</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/云计算领域的-iaaspaassaascaasfaasdbaas-是什么>云计算领域的 IaaSPaaSSaaSCaaSFaaSDBaaS 是什么</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/tcp-三次握手的工作流程>TCP 三次握手的工作流程</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/tcp-与-udp-区别和场景>TCP 与 UDP 区别和场景</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/tcp-四次挥手过程>TCP 四次挥手过程</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/go-语言中的锁类型与应用场景详解>Go 语言中的锁类型与应用场景详解</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/go-盐值加密和密码生成>Go 盐值加密和密码生成</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/iptables-和-ufw-的常用命令>iptables 和 ufw 的常用命令</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/go-自动解引用>Go 自动解引用</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/摘要加密对称加密和非对称加密>摘要加密对称加密和非对称加密</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/go-中的-nil-和零值>Go 中的 nil 和零值</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/linux--下目录的用途和功能>Linux  下目录的用途和功能</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/go-常量的设计与优势>Go 常量的设计与优势</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/理解-go-模块系统依赖管理和常用标记>理解 Go 模块系统依赖管理和常用标记</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/解决-go-中结构体成员不能修改的问题的两种方法>解决 Go 中结构体成员不能修改的问题的两种方法</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/go-切片底层数组的重新分配情况与示例>Go 切片底层数组的重新分配情况与示例</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/go-命名返回值和非命名返回值在使用-defer-时的不同表现>Go 命名返回值和非命名返回值在使用 defer 时的不同表现</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/go-语言中的作用域>Go 语言中的作用域</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/go-make-和-new-的区别>Go make 和 new 的区别</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/go-println-和-fmtprintln-对比>Go println 和 fmtPrintln 对比</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/go-五种字符串连接方式>Go 五种字符串连接方式</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/go-内建函数>Go 内建函数</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/go-切片操作>Go 切片操作</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/什么是-rag检索增强生成>什么是 RAG检索增强生成</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/重写-js-数组方法>重写 JS 数组方法</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/nextjs-快速上手>Nextjs 快速上手</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/web-响应式设计缩写和尺寸>Web 响应式设计缩写和尺寸</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/ubuntu-配置-zsh-syntax-highlighting-实现命令检查>Ubuntu 配置 zsh-syntax-highlighting 实现命令检查</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/常见衡量指标和关键性能指标kpis>常见衡量指标和关键性能指标KPIs</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/常用-sql-语句>常用 SQL 语句</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/nextjs-ssr-ssg-isr-理解>Nextjs SSR SSG ISR 理解</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/js-属性描述符property-descriptors>JS 属性描述符Property Descriptors</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/数据存储的基本单位>数据存储的基本单位</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/认证和授权的区别>认证和授权的区别</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/oh-my-zsh-常用插件推荐>Oh My Zsh 常用插件推荐</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/如何进行版本控制>如何进行版本控制</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/ubuntu-nano-启动鼠标滚动>Ubuntu nano 启动鼠标滚动</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/ubuntu-安装-zsh-配置-oh-my-zsh-主题��和插件>Ubuntu 安装 Zsh 配置 Oh My Zsh 主题和插件</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/ubuntu-设置-sudo--s-无密码>Ubuntu 设置 sudo -s 无密码</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/win10-取消-bitlocker-加密>Win10 取消 BitLocker 加密</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/ubuntu-安装-nvm>Ubuntu 安装 nvm</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/简单请求和复杂请求>简单请求和复杂请求</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/htop-界面功能详解>htop 界面功能详解</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/架构和指令集>架构和指令集</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/解决sse中的粘包问题>解决SSE中的粘包问题</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/使用-fetch-api-和-readablestream-api-来处理流式响应数据>使用 Fetch API 和 ReadableStream API 来处理流式响应数据</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/soliditytruffleremix和hardhat之间的关系>SolidityTruffleRemix和Hardhat之间的关系</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/fine-tuning-和-pre-training-区别>fine-tuning 和 pre-training 区别</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/h5-使用-nosleepjs-阻止手机自动休眠>H5 使用 NoSleepjs 阻止手机自动休眠</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/go-type-关键字的使用>Go type 关键字的使用</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/go-带-和-不带-的结构体的区别>Go 带 和 不带 的结构体的区别</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/win10-如何查看已经连过的-wifi-密码>win10 如何查看已经连过的 wifi 密码</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/人工智能-常见术语和概念>人工智能 常见术语和概念</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/为什么说英语天然分词而中文不是>为什么说英语天然分词而中文不是</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/数据向量化的方式>数据向量化的方式</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/get-请求查询字符串和路径参数的区别>GET 请求查询字符串和路径参数的区别</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/阻止允许-浏览器自动填充密码>阻止允许 浏览器自动填充密码</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/word-转-html-保留基本格式>word 转 html 保留基本格式</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/常用-go-命令>常用 go 命令</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/python-typeerror-asyncconnectionpool--init---got-an-unexpected-keyword-argument-socket-options>Python TypeError AsyncConnectionPool  init   got an unexpected keyword argument socket options</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/python-没-requirementstxt-如何安装包>Python 没 requirementstxt 如何安装包</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/python-虚拟环境使用>Python 虚拟环境使用</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/修改-powershell-执行策略>修改 PowerShell 执行策略</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/云服务器-ubuntu-如何访问-github>云服务器 Ubuntu 如何访问 GitHub</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/前端对接-python-sse>前端对接 Python SSE</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/git-放弃所有未跟踪未进行管理的文件>Git 放弃所有未跟踪未进行管理的文件</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/git命令行提交特定文件夹下的内容>Git命令行提交特定文件夹下的内容</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/ipfs-常见命令>IPFS 常见命令</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/语雀如何显示-markdown-代码>语雀如何显示 Markdown 代码</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/批量-clone-github-仓库>批量 clone GitHub 仓库</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/web3-常见术语>Web3 常见术语</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/为什么是-cicd>为什么是 CICD</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/npm-命令常用简写>npm 命令常用简写</a></ul></div><div role=group><h3 class=yearGroupHeading_rMGB>2023</h3><ul class="sidebarItemList_Yudw clean-list"><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/nginx-配置中-root-和-alias-指令的区别>Nginx 配置中 root 和 alias 指令的区别</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/跨域到底跨了什么域>跨域到底跨了什么域</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/koa-和-express-框架区别>Koa 和 Express 框架区别</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/nginx-配置示例>Nginx 配置示例</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/ormobject-relational-mapping对象关系映射>ORMObject-Relational Mapping对象关系映射</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/什么是-restful-api>什么是 RESTful API</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/koa-的-ctx-是什么如何使用>Koa 的 ctx 是什么如何使用</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/git-放弃当前分支使用远程分支>Git 放弃当前分支使用远程分支</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/解决node版本问题fsjs45---primordials>解决Node版本问题fsjs45   primordials</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/systemd-的基本使用>systemd 的基本使用</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/go-为什么不推荐使用锁>Go 为什么不推荐使用锁</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/go-的-select-语句随机选择-case-分支>Go 的 select 语句随机选择 case 分支</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/go-通道为什么分为阻塞和非阻塞>Go 通道为什么分为阻塞和非阻塞</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/syncwaitgroup-使用场景>syncWaitGroup 使用场景</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/协程goroutine和线程之间的区别和关系>协程Goroutine和线程之间的区别和关系</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/解析-go-语言的-gmp-并发模型>解析 Go 语言的 GMP 并发模型</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/为什么要重用线程>为什么要重用线程</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/什么是轮转时间片round-robin-time-slice>什么是轮转时间片Round Robin Time Slice</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/并发执行与并行执行>并发执行与并行执行</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/stable-diffusion-插件推荐>stable-diffusion 插件推荐</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/gradio-配合-fastapi-搭建交互式web应用与rest-api服务>Gradio 配合 FastAPI 搭建交互式Web应用与REST API服务</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/go-的数组为什么是值类型>Go 的数组为什么是值类型</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/prototype-和---proto---的区别>prototype 和   proto   的区别</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/使用现有的gradio接口创建一个fastapi应用>使用现有的Gradio接口创建一个FastAPI应用</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/go-语言中fmtprintln-和-println-的区别>Go 语言中fmtPrintln 和 println 的区别</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/java-受检checked异常和非受检unchecked异常>Java 受检Checked异常和非受检Unchecked异常</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/软连接与硬连接的区别>软连接与硬连接的区别</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/axios-下载>Axios 下载</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/javascript-中的-super-关键字解析>JavaScript 中的 super 关键字解析</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/clsx-库如何使用>clsx 库如何使用</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/v-model-和-v-modellazy-的区别>v-model 和 v-modellazy 的区别</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/为什么-javascript-的0-和--0-是相等的>为什么 JavaScript 的0 和 -0 是相等的</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/maven-依赖是什么>Maven 依赖是什么</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/为什么java的int类型一定是4字节>为什么Java的int类型一定是4字节</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/padstart-和-padend>padStart 和 padEnd</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/实现字符串大数相加>实现字符串大数相加</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/java泛型中的默认类型及基本类型的自动装箱和拆箱机制>Java泛型中的默认类型及基本类型的自动装箱和拆箱机制</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/maven-插件>Maven 插件</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/maven-生命周期>Maven 生命周期</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/http请求参数类型及其在swagger文档和实际请求中的表示方式>HTTP请求参数类型及其在Swagger文档和实际请求中的表示方式</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/indexdts-为什么要写-export->Indexdts 为什么要写 export</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/深入理解-await-与-async>深入理解 await 与 async</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/javascript事件环宏任务和微任务>JavaScript事件环宏任务和微任务</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/pomxml-文件主要内容>pomxml 文件主要内容</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/实现-eventhub>实现 EventHub</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/伪元素和伪类的区别>伪元素和伪类的区别</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/递归-和-memorization>递归 和 Memorization</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/packagejson-文件配置详解>packagejson 文件配置详解</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/团队中如何落实tdd>团队中如何落实TDD</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/echarts版本升级指南结合echarts-4的地图与echarts-5的新功能>ECharts版本升级指南结合ECharts 4的地图与ECharts 5的新功能</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/javascript数组方法修改原数组的原因是什么>JavaScript数组方法修改原数组的原因是什么</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/javascript-中-minjs-和-js-文件的区别>Javascript 中 minjs 和 js 文件的区别</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/中文对齐全角空格的神奇力量>中文对齐全角空格的神奇力量</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/如何检测阅读用户阅读到底>如何检测阅读用户阅读到底</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/解决vue页面使用插值表达式闪烁>解决Vue页面使用插值表达式闪烁</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/github-actions-的工作流文件的主要模块>GitHub Actions 的工作流文件的主要模块</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/gitignore如何优雅地忽略不必要的文件>Gitignore如何优雅地忽略不必要的文件</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/在线生成代码字>在线生成代码字</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/解决github-push-不上去>解决GitHub push 不上去</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/解决webstrom启动报错>解决WebStrom启动报错</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/理解文件路径中的点和斜杠>理解文件路径中的点和斜杠</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/如何在移动设备上使用-05px>如何在移动设备上使用 05px</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/dns-的工作原理>DNS 的工作原理</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/git-的-amend-功能>Git 的 Amend 功能</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/没有网络连接的情况下如何将在两个不同的-git-仓库之间共享代码更改>没有网络连接的情况下如何将在两个不同的 git 仓库之间共享代码更改</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/合并两个不同的git仓库>合并两个不同的Git仓库</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/js实现根据域名查找ip>JS实现根据域名查找IP</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/mvcmvpmvvm三种模式的异同>mvcmvpmvvm三种模式的异同</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/vue-响应式系统数据双向绑定v-model-指令的区别>Vue 响应式系统数据双向绑定v-model 指令的区别</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/react-和-vue-的区别>React 和 Vue 的区别</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/使用-husky-和-commitlint-构建-git-提交规范>使用 Husky 和 Commitlint 构建 Git 提交规范</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/eslint-配置>ESLint 配置</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/git-语义化提交semantic-commits>Git 语义化提交Semantic Commits</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/react-vue3-api-速查>React Vue3 API 速查</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/reactmemo-和-usememo-应该什么时候使用>Reactmemo 和 useMemo 应该什么时候使用</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/watch-和-watcheffect-区别>watch 和 watchEffect 区别</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/发布订阅模式和观察者模式的区别>发布订阅模式和观察者模式的区别</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/js中this有什么意义>JS中this有什么意义</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/比较-tcphttp-和-websocket-三种协议>比较 TCPHTTP 和 WebSocket 三种协议</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/vue3-中的-provide-和-inject>Vue3 中的 provide 和 inject</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/微前端和pnpm工作空间两种方案对比>微前端和PNPM工作空间两种方案对比</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/对等依赖peer-dependency>对等依赖peer dependency</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/为什么清除浮动要使用display-table>为什么清除浮动要使用display table</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/npm-安装包时常见参数>npm 安装包时常见参数</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/解决跨域的九种方案>解决跨域的九种方案</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/html-meta-标签常见属性>HTML meta 标签常见属性</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/vue-provide-和-inject>Vue Provide 和 Inject</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/webpack-常见-loaderplugin>Webpack 常见 LoaderPlugin</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/vue-event-bus-使用案例>Vue Event bus 使用案例</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/vue-history-和-hash-两种模式的优缺点>Vue history 和 hash 两种模式的优缺点</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/vue-自定义指令的使用>Vue 自定义指令的使用</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/vue-scoped--的原理>vue scoped  的原理</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/什么是-keep-alive>什么是 keep-alive</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/nodejs-和浏览器的事件循环有哪些不同>Nodejs 和浏览器的事件循环有哪些不同</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/javascript-搜索栏联想词搜索功能>JavaScript 搜索栏联想词搜索功能</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/objectdefineproperty和objectdefineproperties的区别>ObjectdefineProperty和ObjectdefineProperties的区别</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/实现-mvvm>实现 MVVM</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/5mm耳机插入后电脑不识别>5mm耳机插入后电脑不识别</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/硬盘被写保护去除方法>硬盘被写保护去除方法</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/javascript-常用正则>JavaScript 常用正则</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/前端性能优化>前端性能优化</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/实现nexttick>实现nextTick</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/httphttps的区别>HTTPHTTPS的区别</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/为什么是三次握�手四次挥手>为什么是三次握手四次挥手</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/正向代理和反向代理的区别>正向代理和反向代理的区别</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/前端常见算法题>前端常见算法题</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/如何实现大文件切片上传>如何实现大文件切片上传</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/js-web-workers>JS Web Workers</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/js数组方法练习-根据字符串最后一位大小排序>JS数组方法练习-根据字符串最后一位大小排序</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/v-for-为什么不推荐用-index-做-key>v-for 为什么不推荐用 index 做 key</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/docs-hub/blog/强缓存和协商缓存>强缓存和协商缓存</a></ul></div></nav></aside><main class="col col--7"><header class=margin-bottom--xl><h1>115 篇博文 含有标签「开发工具与环境」</h1><p>开发工具和环境配置相关文章</p><a href=/docs-hub/blog/tags>查看所有标签</a></header><article class=margin-bottom--xl><header><h2 class=title_f1Hy><a href=/docs-hub/blog/linux-使用-tar-命令进行迁移>Linux 使用 tar 命令进行迁移</a></h2><div class="container_mt6G margin-vert--md"><time datetime=2024-09-26T00:00:00.000Z>2024年9月26日</time> · <!-- -->阅读需 2 分钟</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--12 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a class=avatar__photo-link href=/docs-hub/blog/authors/sumingcheng><img class="avatar__photo authorImage_XqGP" src=https://github.com/user-attachments/assets/9a06bd55-094a-4efc-91c3-d1b92236822f alt=素明诚></a><div class="avatar__intro authorDetails_lV9A"><div class=avatar__name><a href=/docs-hub/blog/authors/sumingcheng><span class=authorName_yefp>素明诚</span></a></div><small class=authorTitle_nd0D title="Full stack development">Full stack development</small><div class=authorSocials_rSDt><a href=https://x.com/sumingcheng target=_blank rel="noopener noreferrer" class=authorSocialLink_owbf title=X><svg width=1em height=1em fill=none viewBox="0 0 1200 1227" class="authorSocialLink_owbf xSvg_y3PF" style=--dark:#000;--light:#fff><path d="M714.163 519.284 1160.89 0h-105.86L667.137 450.887 357.328 0H0l468.492 681.821L0 1226.37h105.866l409.625-476.152 327.181 476.152H1200L714.137 519.284h.026ZM569.165 687.828l-47.468-67.894-377.686-540.24h162.604l304.797 435.991 47.468 67.894 396.2 566.721H892.476L569.165 687.854v-.026Z"/></svg></a><a href=https://github.com/sumingcheng target=_blank rel="noopener noreferrer" class=authorSocialLink_owbf title=GitHub><svg viewBox="0 0 256 250" width=1em height=1em class="authorSocialLink_owbf githubSvg_Uu4N" style=--dark:#000;--light:#fff preserveAspectRatio=xMidYMid><path d="M128.001 0C57.317 0 0 57.307 0 128.001c0 56.554 36.676 104.535 87.535 121.46 6.397 1.185 8.746-2.777 8.746-6.158 0-3.052-.12-13.135-.174-23.83-35.61 7.742-43.124-15.103-43.124-15.103-5.823-14.795-14.213-18.73-14.213-18.73-11.613-7.944.876-7.78.876-7.78 12.853.902 19.621 13.19 19.621 13.19 11.417 19.568 29.945 13.911 37.249 10.64 1.149-8.272 4.466-13.92 8.127-17.116-28.431-3.236-58.318-14.212-58.318-63.258 0-13.975 5-25.394 13.188-34.358-1.329-3.224-5.71-16.242 1.24-33.874 0 0 10.749-3.44 35.21 13.121 10.21-2.836 21.16-4.258 32.038-4.307 10.878.049 21.837 1.47 32.066 4.307 24.431-16.56 35.165-13.12 35.165-13.12 6.967 17.63 2.584 30.65 1.255 33.873 8.207 8.964 13.173 20.383 13.173 34.358 0 49.163-29.944 59.988-58.447 63.157 4.591 3.972 8.682 11.762 8.682 23.704 0 17.126-.148 30.91-.148 35.126 0 3.407 2.304 7.398 8.792 6.14C219.37 232.5 256 184.537 256 128.002 256 57.307 198.691 0 128.001 0Zm-80.06 182.34c-.282.636-1.283.827-2.194.39-.929-.417-1.45-1.284-1.15-1.922.276-.655 1.279-.838 2.205-.399.93.418 1.46 1.293 1.139 1.931Zm6.296 5.618c-.61.566-1.804.303-2.614-.591-.837-.892-.994-2.086-.375-2.66.63-.566 1.787-.301 2.626.591.838.903 1 2.088.363 2.66Zm4.32 7.188c-.785.545-2.067.034-2.86-1.104-.784-1.138-.784-2.503.017-3.05.795-.547 2.058-.055 2.861 1.075.782 1.157.782 2.522-.019 3.08Zm7.304 8.325c-.701.774-2.196.566-3.29-.49-1.119-1.032-1.43-2.496-.726-3.27.71-.776 2.213-.558 3.315.49 1.11 1.03 1.45 2.505.701 3.27Zm9.442 2.81c-.31 1.003-1.75 1.459-3.199 1.033-1.448-.439-2.395-1.613-2.103-2.626.301-1.01 1.747-1.484 3.207-1.028 1.446.436 2.396 1.602 2.095 2.622Zm10.744 1.193c.036 1.055-1.193 1.93-2.715 1.95-1.53.034-2.769-.82-2.786-1.86 0-1.065 1.202-1.932 2.733-1.958 1.522-.03 2.768.818 2.768 1.868Zm10.555-.405c.182 1.03-.875 2.088-2.387 2.37-1.485.271-2.861-.365-3.05-1.386-.184-1.056.893-2.114 2.376-2.387 1.514-.263 2.868.356 3.061 1.403Z"/></svg></a></div></div></div></div></div></header><div class=markdown><p>以迁移 MongoDB 的数据为例。</p>
<p>停止当前机器上运行的 MongoDB 服务,以确保数据库文件处于一致状态。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=打包>打包<a href=#打包 class=hash-link aria-label=打包的直接链接 title=打包的直接链接>​</a></h2>
<p>本次迁移的是 mongo/ 的卷文件到另一台机器上</p>
<p>使用 <code>tar</code> 命令将 <code>mongo</code> 目录打包成一个归档文件。<code>tar</code> 命令可以保留文件权限和所有者信息。</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-text codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">tar -czvf mongo.tar.gz mongo/</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=复制代码到剪贴板 title=复制 class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>这会将 <code>mongo</code> 目录打包成一个名为 <code>mongo.tar.gz</code> 的归档文件。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=校验>校验<a href=#校验 class=hash-link aria-label=校验的直接链接 title=校验的直接链接>​</a></h2>
<p>使用 <code>md5sum</code> 或 <code>sha256sum</code> 命令计算归档文件的校验和。例如:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-text codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">md5sum mongo.tar.gz > mongo.tar.gz.md5</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=复制代码到剪贴板 title=复制 class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>这会计算 <code>mongo.tar.gz</code> 文件的 MD5 校验和,并将其保存到 <code>mongo.tar.gz.md5</code> 文件中。</p>
<p>使用安全的文件传输工具将归档文件 <code>mongo.tar.gz</code> 和校验和文件 <code>mongo.tar.gz.md5</code> 传输到目标机器。例如,你可以使用 <code>scp</code> 或 <code>rsync</code> 等工具进行传输。</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-text codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">scp mongo.tar.gz mongo.tar.gz.md5 user@target_machine:/path/to/destination/</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=复制代码到剪贴板 title=复制 class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>将 <code>user</code> 替换为目标机器的用户名,<code>target_machine</code> 替换为目标机器的主机名或 IP,<code>/path/to/destination/</code> 替换为目标机器上的目标目录。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=完整性校验>完整性校验<a href=#完整性校验 class=hash-link aria-label=完整性校验的直接链接 title=完整性校验的直接链接>​</a></h2>
<p>在目标机器上,使用 <code>md5sum</code> 或 <code>sha256sum</code> 命令验证接收到的归档文件的完整性。</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-text codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">md5sum -c mongo.tar.gz.md5</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=复制代码到剪贴板 title=复制 class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>这会计算接收到的 <code>mongo.tar.gz</code> 文件的 MD5 校验和,并与 <code>mongo.tar.gz.md5</code> 文件中的校验和进行比较。如果校验和匹配,则说明文件在传输过程中没有被修改。</p>
<p><img decoding=async loading=lazy alt=1404a69a7ed73f6e9d229366031c54ed src=/docs-hub/assets/images/1404a69a7ed73f6e9d229366031c54ed-390b650a206ef1971366eeab6da3bb1d.jpg width=1414 height=677 class=img_ev3q>## 解压</p>
<p>如果校验和匹配,使用 <code>tar</code> 命令将归档文件解压缩到目标目录。</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-text codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">tar -xzvf mongo.tar.gz</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=复制代码到剪贴板 title=复制 class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>这会将 <code>mongo.tar.gz</code> 文件解压缩,并将 <code>mongo</code> 目录及其内容提取到当前目录。</p>
<p>通过以上步骤,你可以确保 <code>mongo</code> 目录在传输过程中的完整性,并将其准确地复制到目标机器上。</div><footer class="row docusaurus-mt-lg"><div class=col><b>标签：</b><ul class="tags_jXut padding--none margin-left--sm"><li class=tag_QGVx><a title=开发工具和环境配置相关文章 class="tag_zVej tagRegular_sFm0" href=/docs-hub/blog/tags/dev-tools>开发工具与环境</a></ul></div></footer></article><article class=margin-bottom--xl><header><h2 class=title_f1Hy><a href=/docs-hub/blog/docker-更换镜像源阿里科大网易腾讯中科大微软官方>Docker 更换镜像源阿里科大网易腾讯中科大微软官方</a></h2><div class="container_mt6G margin-vert--md"><time datetime=2024-09-25T00:00:00.000Z>2024年9月25日</time> · <!-- -->阅读需 2 分钟</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--12 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a class=avatar__photo-link href=/docs-hub/blog/authors/sumingcheng><img class="avatar__photo authorImage_XqGP" src=https://github.com/user-attachments/assets/9a06bd55-094a-4efc-91c3-d1b92236822f alt=素明诚></a><div class="avatar__intro authorDetails_lV9A"><div class=avatar__name><a href=/docs-hub/blog/authors/sumingcheng><span class=authorName_yefp>素明诚</span></a></div><small class=authorTitle_nd0D title="Full stack development">Full stack development</small><div class=authorSocials_rSDt><a href=https://x.com/sumingcheng target=_blank rel="noopener noreferrer" class=authorSocialLink_owbf title=X><svg width=1em height=1em fill=none viewBox="0 0 1200 1227" class="authorSocialLink_owbf xSvg_y3PF" style=--dark:#000;--light:#fff><path d="M714.163 519.284 1160.89 0h-105.86L667.137 450.887 357.328 0H0l468.492 681.821L0 1226.37h105.866l409.625-476.152 327.181 476.152H1200L714.137 519.284h.026ZM569.165 687.828l-47.468-67.894-377.686-540.24h162.604l304.797 435.991 47.468 67.894 396.2 566.721H892.476L569.165 687.854v-.026Z"/></svg></a><a href=https://github.com/sumingcheng target=_blank rel="noopener noreferrer" class=authorSocialLink_owbf title=GitHub><svg viewBox="0 0 256 250" width=1em height=1em class="authorSocialLink_owbf githubSvg_Uu4N" style=--dark:#000;--light:#fff preserveAspectRatio=xMidYMid><path d="M128.001 0C57.317 0 0 57.307 0 128.001c0 56.554 36.676 104.535 87.535 121.46 6.397 1.185 8.746-2.777 8.746-6.158 0-3.052-.12-13.135-.174-23.83-35.61 7.742-43.124-15.103-43.124-15.103-5.823-14.795-14.213-18.73-14.213-18.73-11.613-7.944.876-7.78.876-7.78 12.853.902 19.621 13.19 19.621 13.19 11.417 19.568 29.945 13.911 37.249 10.64 1.149-8.272 4.466-13.92 8.127-17.116-28.431-3.236-58.318-14.212-58.318-63.258 0-13.975 5-25.394 13.188-34.358-1.329-3.224-5.71-16.242 1.24-33.874 0 0 10.749-3.44 35.21 13.121 10.21-2.836 21.16-4.258 32.038-4.307 10.878.049 21.837 1.47 32.066 4.307 24.431-16.56 35.165-13.12 35.165-13.12 6.967 17.63 2.584 30.65 1.255 33.873 8.207 8.964 13.173 20.383 13.173 34.358 0 49.163-29.944 59.988-58.447 63.157 4.591 3.972 8.682 11.762 8.682 23.704 0 17.126-.148 30.91-.148 35.126 0 3.407 2.304 7.398 8.792 6.14C219.37 232.5 256 184.537 256 128.002 256 57.307 198.691 0 128.001 0Zm-80.06 182.34c-.282.636-1.283.827-2.194.39-.929-.417-1.45-1.284-1.15-1.922.276-.655 1.279-.838 2.205-.399.93.418 1.46 1.293 1.139 1.931Zm6.296 5.618c-.61.566-1.804.303-2.614-.591-.837-.892-.994-2.086-.375-2.66.63-.566 1.787-.301 2.626.591.838.903 1 2.088.363 2.66Zm4.32 7.188c-.785.545-2.067.034-2.86-1.104-.784-1.138-.784-2.503.017-3.05.795-.547 2.058-.055 2.861 1.075.782 1.157.782 2.522-.019 3.08Zm7.304 8.325c-.701.774-2.196.566-3.29-.49-1.119-1.032-1.43-2.496-.726-3.27.71-.776 2.213-.558 3.315.49 1.11 1.03 1.45 2.505.701 3.27Zm9.442 2.81c-.31 1.003-1.75 1.459-3.199 1.033-1.448-.439-2.395-1.613-2.103-2.626.301-1.01 1.747-1.484 3.207-1.028 1.446.436 2.396 1.602 2.095 2.622Zm10.744 1.193c.036 1.055-1.193 1.93-2.715 1.95-1.53.034-2.769-.82-2.786-1.86 0-1.065 1.202-1.932 2.733-1.958 1.522-.03 2.768.818 2.768 1.868Zm10.555-.405c.182 1.03-.875 2.088-2.387 2.37-1.485.271-2.861-.365-3.05-1.386-.184-1.056.893-2.114 2.376-2.387 1.514-.263 2.868.356 3.061 1.403Z"/></svg></a></div></div></div></div></div></header><div class=markdown><p><strong>编辑 Docker 配置文件</strong>: 打开或创建 <code>/etc/docker/daemon.json</code> 文件</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-text codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">{</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  "registry-mirrors": [</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    "https://registry.docker-cn.com",</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    "http://hub-mirror.c.163.com",</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    "https://docker.mirrors.ustc.edu.cn",</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    "https://dockerhub.azk8s.cn",</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    "https://mirror.ccs.tencentyun.com",</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    "https://registry.cn-hangzhou.aliyuncs.com",</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    "https://docker.mirrors.ustc.edu.cn"</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  ]</span><br></span><span class=token-line style=color:#393A34><span class="token plain">}</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=复制代码到剪贴板 title=复制 class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p><strong>重启 Docker 服务</strong>: 为使配置生效，请执行以下命令：</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-text codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">sudo systemctl daemon-reload</span><br></span><span class=token-line style=color:#393A34><span class="token plain">sudo systemctl restart docker</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=复制代码到剪贴板 title=复制 class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=原地址>原地址<a href=#原地址 class=hash-link aria-label=原地址的直接链接 title=原地址的直接链接>​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=docker-官方镜像加速器中国区>Docker 官方镜像加速器（中国区）<a href=#docker-官方镜像加速器中国区 class=hash-link aria-label="Docker 官方镜像加速器（中国区）的直接链接" title="Docker 官方镜像加速器（中国区）的直接链接">​</a></h3>
<ul>
<li><strong>地址</strong>: <code>https://registry.docker-cn.com</code></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=网易云镜像加速器>网易云镜像加速器<a href=#网易云镜像加速器 class=hash-link aria-label=网易云镜像加速器的直接链接 title=网易云镜像加速器的直接链接>​</a></h3>
<ul>
<li><strong>地址</strong>: <code>http://hub-mirror.c.163.com</code></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=科大讯飞开源镜像加速器>科大讯飞开源镜像加速器<a href=#科大讯飞开源镜像加速器 class=hash-link aria-label=科大讯飞开源镜像加速器的直接链接 title=科大讯飞开源镜像加速器的直接链接>​</a></h3>
<ul>
<li><strong>地址</strong>: <code>https://docker.mirrors.ustc.edu.cn</code></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=azure-中国镜像加速器>Azure 中国镜像加速器<a href=#azure-中国镜像加速器 class=hash-link aria-label="Azure 中国镜像加速器的直接链接" title="Azure 中国镜像加速器的直接链接">​</a></h3>
<ul>
<li><strong>地址</strong>: <code>https://dockerhub.azk8s.cn</code></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=腾讯云公共镜像库>腾讯云公共镜像库<a href=#腾讯云公共镜像库 class=hash-link aria-label=腾讯云公共镜像库的直接链接 title=腾讯云公共镜像库的直接链接>​</a></h3>
<ul>
<li><strong>地址</strong>: <code>https://mirror.ccs.tencentyun.com</code></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=阿里云公共镜像加速器>阿里云公共镜像加速器<a href=#阿里云公共镜像加速器 class=hash-link aria-label=阿里云公共镜像加速器的直接链接 title=阿里云公共镜像加��速器的直接链接>​</a></h3>
<ul>
<li><strong>地址</strong>: <code>https://registry.cn-hangzhou.aliyuncs.com</code></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=中国科学技术大学镜像加速器>中国科学技术大学镜像加速器<a href=#中国科学技术大学镜像加速器 class=hash-link aria-label=中国科学技术大学镜像加速器的直接链接 title=中国科学技术大学镜像加速器的直接链接>​</a></h3>
<ul>
<li><strong>地址</strong>: <code>https://docker.mirrors.ustc.edu.cn</code></li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=2024-年-8-月-2-日-091406-更新>2024 年 8 月 2 日 09:14:06 更新<a href=#2024-年-8-月-2-日-091406-更新 class=hash-link aria-label="2024 年 8 月 2 日 09:14:06 更新的直接链接" title="2024 年 8 月 2 日 09:14:06 更新的直接链接">​</a></h2>
<p>如果上面的 G 了，可以试试下面这些</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-text codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">{</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    "registry-mirrors": [</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        "https://hub.uuuadc.top",</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        "https://docker.anyhub.us.kg",</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        "https://dockerhub.jobcher.com",</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        "https://dockerhub.icu",</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        "https://docker.ckyl.me",</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        "https://docker.awsl9527.cn"</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    ]</span><br></span><span class=token-line style=color:#393A34><span class="token plain">}</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=复制代码到剪贴板 title=复制 class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=2024-年-8-月-12-日-153223-更新>2024 年 8 月 12 日 15:32:23 更新<a href=#2024-年-8-月-12-日-153223-更新 class=hash-link aria-label="2024 年 8 月 12 日 15:32:23 更新的直接链接" title="2024 年 8 月 12 日 15:32:23 更新的直接链接">​</a></h2>
<p>镜像源失效的问题,通常有以下几种长期解决方案</p>
<p><strong>使用阿里云+GitHub 构建镜像</strong></p>
<p>这个网上有很多教程，就细说了</p>
<p><strong>本机配置代理 (推荐)</strong></p>
<p>可以封装一下 clash，容器启动，方便管理</p>
<p><strong>搭建私有容器镜像仓库(如 Harbor)</strong></p>
<p>Harbor 是一个开源的企业级容器镜像仓库,提供了镜像管理、访问控制、安全扫描等功能。搭建私有仓库可以方便团队内部的镜像下载和同步,同时也需要配置相应的代理以加速访问。</div><footer class="row docusaurus-mt-lg"><div class=col><b>标签：</b><ul class="tags_jXut padding--none margin-left--sm"><li class=tag_QGVx><a title=开发工具和环境配置相关文章 class="tag_zVej tagRegular_sFm0" href=/docs-hub/blog/tags/dev-tools>开发工具与环境</a></ul></div></footer></article><article class=margin-bottom--xl><header><h2 class=title_f1Hy><a href=/docs-hub/blog/fastgpt47--chatglm3-6b--m3e-本地部署>FastGPT47  chatglm3-6b  m3e 本地部署</a></h2><div class="container_mt6G margin-vert--md"><time datetime=2024-09-25T00:00:00.000Z>2024年9月25日</time> · <!-- -->阅读需 8 分钟</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--12 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a class=avatar__photo-link href=/docs-hub/blog/authors/sumingcheng><img class="avatar__photo authorImage_XqGP" src=https://github.com/user-attachments/assets/9a06bd55-094a-4efc-91c3-d1b92236822f alt=素明诚></a><div class="avatar__intro authorDetails_lV9A"><div class=avatar__name><a href=/docs-hub/blog/authors/sumingcheng><span class=authorName_yefp>素明诚</span></a></div><small class=authorTitle_nd0D title="Full stack development">Full stack development</small><div class=authorSocials_rSDt><a href=https://x.com/sumingcheng target=_blank rel="noopener noreferrer" class=authorSocialLink_owbf title=X><svg width=1em height=1em fill=none viewBox="0 0 1200 1227" class="authorSocialLink_owbf xSvg_y3PF" style=--dark:#000;--light:#fff><path d="M714.163 519.284 1160.89 0h-105.86L667.137 450.887 357.328 0H0l468.492 681.821L0 1226.37h105.866l409.625-476.152 327.181 476.152H1200L714.137 519.284h.026ZM569.165 687.828l-47.468-67.894-377.686-540.24h162.604l304.797 435.991 47.468 67.894 396.2 566.721H892.476L569.165 687.854v-.026Z"/></svg></a><a href=https://github.com/sumingcheng target=_blank rel="noopener noreferrer" class=authorSocialLink_owbf title=GitHub><svg viewBox="0 0 256 250" width=1em height=1em class="authorSocialLink_owbf githubSvg_Uu4N" style=--dark:#000;--light:#fff preserveAspectRatio=xMidYMid><path d="M128.001 0C57.317 0 0 57.307 0 128.001c0 56.554 36.676 104.535 87.535 121.46 6.397 1.185 8.746-2.777 8.746-6.158 0-3.052-.12-13.135-.174-23.83-35.61 7.742-43.124-15.103-43.124-15.103-5.823-14.795-14.213-18.73-14.213-18.73-11.613-7.944.876-7.78.876-7.78 12.853.902 19.621 13.19 19.621 13.19 11.417 19.568 29.945 13.911 37.249 10.64 1.149-8.272 4.466-13.92 8.127-17.116-28.431-3.236-58.318-14.212-58.318-63.258 0-13.975 5-25.394 13.188-34.358-1.329-3.224-5.71-16.242 1.24-33.874 0 0 10.749-3.44 35.21 13.121 10.21-2.836 21.16-4.258 32.038-4.307 10.878.049 21.837 1.47 32.066 4.307 24.431-16.56 35.165-13.12 35.165-13.12 6.967 17.63 2.584 30.65 1.255 33.873 8.207 8.964 13.173 20.383 13.173 34.358 0 49.163-29.944 59.988-58.447 63.157 4.591 3.972 8.682 11.762 8.682 23.704 0 17.126-.148 30.91-.148 35.126 0 3.407 2.304 7.398 8.792 6.14C219.37 232.5 256 184.537 256 128.002 256 57.307 198.691 0 128.001 0Zm-80.06 182.34c-.282.636-1.283.827-2.194.39-.929-.417-1.45-1.284-1.15-1.922.276-.655 1.279-.838 2.205-.399.93.418 1.46 1.293 1.139 1.931Zm6.296 5.618c-.61.566-1.804.303-2.614-.591-.837-.892-.994-2.086-.375-2.66.63-.566 1.787-.301 2.626.591.838.903 1 2.088.363 2.66Zm4.32 7.188c-.785.545-2.067.034-2.86-1.104-.784-1.138-.784-2.503.017-3.05.795-.547 2.058-.055 2.861 1.075.782 1.157.782 2.522-.019 3.08Zm7.304 8.325c-.701.774-2.196.566-3.29-.49-1.119-1.032-1.43-2.496-.726-3.27.71-.776 2.213-.558 3.315.49 1.11 1.03 1.45 2.505.701 3.27Zm9.442 2.81c-.31 1.003-1.75 1.459-3.199 1.033-1.448-.439-2.395-1.613-2.103-2.626.301-1.01 1.747-1.484 3.207-1.028 1.446.436 2.396 1.602 2.095 2.622Zm10.744 1.193c.036 1.055-1.193 1.93-2.715 1.95-1.53.034-2.769-.82-2.786-1.86 0-1.065 1.202-1.932 2.733-1.958 1.522-.03 2.768.818 2.768 1.868Zm10.555-.405c.182 1.03-.875 2.088-2.387 2.37-1.485.271-2.861-.365-3.05-1.386-.184-1.056.893-2.114 2.376-2.387 1.514-.263 2.868.356 3.061 1.403Z"/></svg></a></div></div></div></div></div></header><div class=markdown><h2 class="anchor anchorWithStickyNavbar_LWe7" id=安装-docker-和-docker-compose>安装 Docker 和 docker-compose<a href=#安装-docker-和-docker-compose class=hash-link aria-label="安装 Docker 和 docker-compose的直接链接" title="安装 Docker 和 docker-compose的直接链接">​</a></h2>
<p>Windows 可以使用 wsl</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-text codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain"># 安装 Docker</span><br></span><span class=token-line style=color:#393A34><span class="token plain">curl -fsSL https://get.docker.com | bash -s docker --mirror Aliyun</span><br></span><span class=token-line style=color:#393A34><span class="token plain">systemctl enable --now docker</span><br></span><span class=token-line style=color:#393A34><span class="token plain"># 安装 docker-compose</span><br></span><span class=token-line style=color:#393A34><span class="token plain">curl -L https://github.com/docker/compose/releases/download/v2.20.3/docker-compose-`uname -s`-`uname -m` -o /usr/local/bin/docker-compose</span><br></span><span class=token-line style=color:#393A34><span class="token plain">chmod +x /usr/local/bin/docker-compose</span><br></span><span class=token-line style=color:#393A34><span class="token plain"># 验证安装</span><br></span><span class=token-line style=color:#393A34><span class="token plain">docker -v</span><br></span><span class=token-line style=color:#393A34><span class="token plain">docker-compose -v</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=复制代码到剪贴板 title=复制 class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=安装并启动>安装并启动<a href=#安装并启动 class=hash-link aria-label=安装并启动的直接链接 title=安装并启动的直接链接>​</a></h2>
<p>docker-compose.yml 和 config.json 这两个文件很重要，安装后不要删掉~</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-text codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">mkdir fastgpt</span><br></span><span class=token-line style=color:#393A34><span class="token plain">cd fastgpt</span><br></span><span class=token-line style=color:#393A34><span class="token plain">curl -O https://raw.githubusercontent.com/labring/FastGPT/main/files/deploy/fastgpt/docker-compose.yml</span><br></span><span class=token-line style=color:#393A34><span class="token plain">curl -O https://raw.githubusercontent.com/labring/FastGPT/main/projects/app/data/config.json</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=复制代码到剪贴板 title=复制 class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>注意启动的时候要在 fastgpt 这个目录</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-text codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain"># 启动容器</span><br></span><span class=token-line style=color:#393A34><span class="token plain">docker-compose up -d</span><br></span><span class=token-line style=color:#393A34><span class="token plain"># 等待10s，OneAPI第一次总是要重启几次才能连上Mysql</span><br></span><span class=token-line style=color:#393A34><span class="token plain">sleep 10</span><br></span><span class=token-line style=color:#393A34><span class="token plain"># 重启一次oneapi(由于OneAPI的默认Key有点问题，不重启的话会提示找不到渠道，临时手动重启一次解决，等待作者修复)</span><br></span><span class=token-line style=color:#393A34><span class="token plain">docker restart oneapi</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=复制代码到剪贴板 title=复制 class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p><img decoding=async loading=lazy alt=5b6581830daeef63ab9688aa590e002a src=/docs-hub/assets/images/5b6581830daeef63ab9688aa590e002a-954feb645002275007e6eee009190731.jpg width=1440 height=159 class=img_ev3q></p>
<p>安装成功后可以看到红框里的容器，m3e 后续再说</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=服务说明>服务说明<a href=#服务说明 class=hash-link aria-label=服务说明的直接链接 title=服务说明的直接链接>​</a></h3>
<p>OneAPI：提供标准的 API 格式，后续 M3E 和 GLM 都要对接到这里面</p>
<p>FastGPT：NextJS 做的，提供前端和后端的服务</p>
<p>mongo：聊天记录、历史对话等数据</p>
<p>pg：存向量</p>
<p>MySQL：_</p>
<p>M3E：向量化模型</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=运行-chatglm3-6b>运行 chatglm3-6b<a href=#运行-chatglm3-6b class=hash-link aria-label="运行 chatglm3-6b的直接链接" title="运行 chatglm3-6b的直接链接">​</a></h2>
<p><a href=https://github.com/THUDM/ChatGLM3 target=_blank rel="noopener noreferrer">https://github.com/THUDM/ChatGLM3</a></p>
<p>克隆项目后，我们安装依赖，记得装 CUDA 驱动。</p>
<p>我们需要的就是 openai_api_demo 里面的<a href=https://github.com/THUDM/ChatGLM3/blob/main/openai_api_demo/api_server.py target=_blank rel="noopener noreferrer">https://github.com/THUDM/ChatGLM3/blob/main/openai_api_demo/api_server.py</a></p>
<p>这里需要注意的是，你可以选择提前下载好模型，或者是运行的时候再下载，提前下载可能会快很多~</p>
<p>glm3-6b，这个比较好运行，网上教程非常多，只要跑起来就可以，这里不赘述了</p>
<p><img decoding=async loading=lazy alt=ed8272ae3599f0d00c32bc9b6f989a08 src=/docs-hub/assets/images/ed8272ae3599f0d00c32bc9b6f989a08-159e4e2c21b80f767bdf0995626f2409.jpg width=1440 height=695 class=img_ev3q></p>
<p>注意是 GLM3 的不要 下载错了</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=api_serverpy>api_server.py<a href=#api_serverpy class=hash-link aria-label=api_server.py的直接链接 title=api_server.py的直接链接>​</a></h3>
<p>这里给出来，修改了一下前面的路径，因为我已经提前下载好了模型</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-text codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">import os</span><br></span><span class=token-line style=color:#393A34><span class="token plain">import time</span><br></span><span class=token-line style=color:#393A34><span class="token plain">import tiktoken</span><br></span><span class=token-line style=color:#393A34><span class="token plain">import torch</span><br></span><span class=token-line style=color:#393A34><span class="token plain">import uvicorn</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">from fastapi import FastAPI, HTTPException, Response</span><br></span><span class=token-line style=color:#393A34><span class="token plain">from fastapi.middleware.cors import CORSMiddleware</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">from contextlib import asynccontextmanager</span><br></span><span class=token-line style=color:#393A34><span class="token plain">from typing import List, Literal, Optional, Union</span><br></span><span class=token-line style=color:#393A34><span class="token plain">from loguru import logger</span><br></span><span class=token-line style=color:#393A34><span class="token plain">from pydantic import BaseModel, Field</span><br></span><span class=token-line style=color:#393A34><span class="token plain">from transformers import AutoTokenizer, AutoModel</span><br></span><span class=token-line style=color:#393A34><span class="token plain">from utils import process_response, generate_chatglm3, generate_stream_chatglm3</span><br></span><span class=token-line style=color:#393A34><span class="token plain">from sentence_transformers import SentenceTransformer</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">from sse_starlette.sse import EventSourceResponse</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">print(torch.__version__)</span><br></span><span class=token-line style=color:#393A34><span class="token plain">print(torch.cuda.is_available())</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"># Set up limit request time</span><br></span><span class=token-line style=color:#393A34><span class="token plain">EventSourceResponse.DEFAULT_PING_INTERVAL = 1000</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"># 获取当前脚本的目录</span><br></span><span class=token-line style=color:#393A34><span class="token plain">current_dir = os.path.dirname(os.path.abspath(__file__))</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"># 构建相对于当前脚本的模型目录路径</span><br></span><span class=token-line style=color:#393A34><span class="token plain">model_dir = os.path.abspath(os.path.join(current_dir, "..", "..", "chatglm3-6b"))</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">print(f"model_dir: {model_dir}")</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"># 设置环境变量</span><br></span><span class=token-line style=color:#393A34><span class="token plain">os.environ['MODEL_PATH'] = model_dir</span><br></span><span class=token-line style=color:#393A34><span class="token plain">os.environ['TOKENIZER_PATH'] = model_dir</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">print("MODEL_PATH:", os.getenv('MODEL_PATH'))</span><br></span><span class=token-line style=color:#393A34><span class="token plain">print("TOKENIZER_PATH:", os.getenv('TOKENIZER_PATH'))</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"># set LLM path</span><br></span><span class=token-line style=color:#393A34><span class="token plain">MODEL_PATH = os.environ.get('MODEL_PATH', 'THUDM/chatglm3-6b')</span><br></span><span class=token-line style=color:#393A34><span class="token plain">TOKENIZER_PATH = os.environ.get("TOKENIZER_PATH", MODEL_PATH)</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"># set Embedding Model path</span><br></span><span class=token-line style=color:#393A34><span class="token plain">EMBEDDING_PATH = os.environ.get('EMBEDDING_PATH', 'BAAI/bge-m3')</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">@asynccontextmanager</span><br></span><span class=token-line style=color:#393A34><span class="token plain">async def lifespan(app: FastAPI):</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    yield</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    if torch.cuda.is_available():</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        torch.cuda.empty_cache()</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        torch.cuda.ipc_collect()</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">app = FastAPI(lifespan=lifespan)</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">app.add_middleware(</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    CORSMiddleware,</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    allow_origins=["*"],</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    allow_credentials=True,</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    allow_methods=["*"],</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    allow_headers=["*"],</span><br></span><span class=token-line style=color:#393A34><span class="token plain">)</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">class ModelCard(BaseModel):</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    id: str</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    object: str = "model"</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    created: int = Field(default_factory=lambda: int(time.time()))</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    owned_by: str = "owner"</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    root: Optional[str] = None</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    parent: Optional[str] = None</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    permission: Optional[list] = None</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">class ModelList(BaseModel):</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    object: str = "list"</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    data: List[ModelCard] = []</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">class FunctionCallResponse(BaseModel):</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    name: Optional[str] = None</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    arguments: Optional[str] = None</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">class ChatMessage(BaseModel):</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    role: Literal["user", "assistant", "system", "function"]</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    content: str = None</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    name: Optional[str] = None</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    function_call: Optional[FunctionCallResponse] = None</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">class DeltaMessage(BaseModel):</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    role: Optional[Literal["user", "assistant", "system"]] = None</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    content: Optional[str] = None</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    function_call: Optional[FunctionCallResponse] = None</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">## for Embedding</span><br></span><span class=token-line style=color:#393A34><span class="token plain">class EmbeddingRequest(BaseModel):</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    input: Union[List[str], str]</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    model: str</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">class CompletionUsage(BaseModel):</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    prompt_tokens: int</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    completion_tokens: int</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    total_tokens: int</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">class EmbeddingResponse(BaseModel):</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    data: list</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    model: str</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    object: str</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    usage: CompletionUsage</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"># for ChatCompletionRequest</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">class UsageInfo(BaseModel):</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    prompt_tokens: int = 0</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    total_tokens: int = 0</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    completion_tokens: Optional[int] = 0</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">class ChatCompletionRequest(BaseModel):</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    model: str</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    messages: List[ChatMessage]</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    temperature: Optional[float] = 0.8</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    top_p: Optional[float] = 0.8</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    max_tokens: Optional[int] = None</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    stream: Optional[bool] = False</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    tools: Optional[Union[dict, List[dict]]] = None</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    repetition_penalty: Optional[float] = 1.1</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">class ChatCompletionResponseChoice(BaseModel):</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    index: int</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    message: ChatMessage</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    finish_reason: Literal["stop", "length", "function_call"]</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">class ChatCompletionResponseStreamChoice(BaseModel):</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    delta: DeltaMessage</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    finish_reason: Optional[Literal["stop", "length", "function_call"]]</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    index: int</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">class ChatCompletionResponse(BaseModel):</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    model: str</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    id: str</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    object: Literal["chat.completion", "chat.completion.chunk"]</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    choices: List[Union[ChatCompletionResponseChoice, ChatCompletionResponseStreamChoice]]</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    created: Optional[int] = Field(default_factory=lambda: int(time.time()))</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    usage: Optional[UsageInfo] = None</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">@app.get("/health")</span><br></span><span class=token-line style=color:#393A34><span class="token plain">async def health() -> Response:</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    """Health check."""</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    return Response(status_code=200)</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">@app.post("/v1/embeddings", response_model=EmbeddingResponse)</span><br></span><span class=token-line style=color:#393A34><span class="token plain">async def get_embeddings(request: EmbeddingRequest):</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    if isinstance(request.input, str):</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        embeddings = [embedding_model.encode(request.input)]</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    else:</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        embeddings = [embedding_model.encode(text) for text in request.input]</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    embeddings = [embedding.tolist() for embedding in embeddings]</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    def num_tokens_from_string(string: str) -> int:</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        """</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        Returns the number of tokens in a text string.</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        use cl100k_base tokenizer</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        """</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        encoding = tiktoken.get_encoding('cl100k_base')</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        num_tokens = len(encoding.encode(string))</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        return num_tokens</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    response = {</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        "data": [</span><br></span><span class=token-line style=color:#393A34><span class="token plain">            {</span><br></span><span class=token-line style=color:#393A34><span class="token plain">                "object": "embedding",</span><br></span><span class=token-line style=color:#393A34><span class="token plain">                "embedding": embedding,</span><br></span><span class=token-line style=color:#393A34><span class="token plain">                "index": index</span><br></span><span class=token-line style=color:#393A34><span class="token plain">            }</span><br></span><span class=token-line style=color:#393A34><span class="token plain">            for index, embedding in enumerate(embeddings)</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        ],</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        "model": request.model,</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        "object": "list",</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        "usage": CompletionUsage(</span><br></span><span class=token-line style=color:#393A34><span class="token plain">            prompt_tokens=sum(len(text.split()) for text in request.input),</span><br></span><span class=token-line style=color:#393A34><span class="token plain">            completion_tokens=0,</span><br></span><span class=token-line style=color:#393A34><span class="token plain">            total_tokens=sum(num_tokens_from_string(text) for text in request.input),</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        )</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    }</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    return response</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">@app.get("/v1/models", response_model=ModelList)</span><br></span><span class=token-line style=color:#393A34><span class="token plain">async def list_models():</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    model_card = ModelCard(</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        id="chatglm3-6b"</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    )</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    return ModelList(</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        data=[model_card]</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    )</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">@app.post("/v1/chat/completions", response_model=ChatCompletionResponse)</span><br></span><span class=token-line style=color:#393A34><span class="token plain">async def create_chat_completion(request: ChatCompletionRequest):</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    global model, tokenizer</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    if len(request.messages) &lt; 1 or request.messages[-1].role == "assistant":</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        raise HTTPException(status_code=400, detail="Invalid request")</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    gen_params = dict(</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        messages=request.messages,</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        temperature=request.temperature,</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        top_p=request.top_p,</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        max_tokens=request.max_tokens or 1024,</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        echo=False,</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        stream=request.stream,</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        repetition_penalty=request.repetition_penalty,</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        tools=request.tools,</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    )</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    logger.debug(f"==== request ====\n{gen_params}")</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    if request.stream:</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">        # Use the stream mode to read the first few characters, if it is not a function call, direct stram output</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        predict_stream_generator = predict_stream(request.model, gen_params)</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        output = next(predict_stream_generator)</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        if not contains_custom_function(output):</span><br></span><span class=token-line style=color:#393A34><span class="token plain">            return EventSourceResponse(predict_stream_generator, media_type="text/event-stream")</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">        # Obtain the result directly at one time and determine whether tools needs to be called.</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        logger.debug(f"First result output：\n{output}")</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">        function_call = None</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        if output and request.tools:</span><br></span><span class=token-line style=color:#393A34><span class="token plain">            try:</span><br></span><span class=token-line style=color:#393A34><span class="token plain">                function_call = process_response(output, use_tool=True)</span><br></span><span class=token-line style=color:#393A34><span class="token plain">            except:</span><br></span><span class=token-line style=color:#393A34><span class="token plain">                logger.warning("Failed to parse tool call")</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">        # CallFunction</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        if isinstance(function_call, dict):</span><br></span><span class=token-line style=color:#393A34><span class="token plain">            function_call = FunctionCallResponse(**function_call)</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">            """</span><br></span><span class=token-line style=color:#393A34><span class="token plain">            In this demo, we did not register any tools.</span><br></span><span class=token-line style=color:#393A34><span class="token plain">            You can use the tools that have been implemented in our `tools_using_demo` and implement your own streaming tool implementation here.</span><br></span><span class=token-line style=color:#393A34><span class="token plain">            Similar to the following method:</span><br></span><span class=token-line style=color:#393A34><span class="token plain">                function_args = json.loads(function_call.arguments)</span><br></span><span class=token-line style=color:#393A34><span class="token plain">                tool_response = dispatch_tool(tool_name: str, tool_params: dict)</span><br></span><span class=token-line style=color:#393A34><span class="token plain">            """</span><br></span><span class=token-line style=color:#393A34><span class="token plain">            tool_response = ""</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">            if not gen_params.get("messages"):</span><br></span><span class=token-line style=color:#393A34><span class="token plain">                gen_params["messages"] = []</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">            gen_params["messages"].append(ChatMessage(</span><br></span><span class=token-line style=color:#393A34><span class="token plain">                role="assistant",</span><br></span><span class=token-line style=color:#393A34><span class="token plain">                content=output,</span><br></span><span class=token-line style=color:#393A34><span class="token plain">            ))</span><br></span><span class=token-line style=color:#393A34><span class="token plain">            gen_params["messages"].append(ChatMessage(</span><br></span><span class=token-line style=color:#393A34><span class="token plain">                role="function",</span><br></span><span class=token-line style=color:#393A34><span class="token plain">                name=function_call.name,</span><br></span><span class=token-line style=color:#393A34><span class="token plain">                content=tool_response,</span><br></span><span class=token-line style=color:#393A34><span class="token plain">            ))</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">            # Streaming output of results after function calls</span><br></span><span class=token-line style=color:#393A34><span class="token plain">            generate = predict(request.model, gen_params)</span><br></span><span class=token-line style=color:#393A34><span class="token plain">            return EventSourceResponse(generate, media_type="text/event-stream")</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">        else:</span><br></span><span class=token-line style=color:#393A34><span class="token plain">            # Handled to avoid exceptions in the above parsing function process.</span><br></span><span class=token-line style=color:#393A34><span class="token plain">            generate = parse_output_text(request.model, output)</span><br></span><span class=token-line style=color:#393A34><span class="token plain">            return EventSourceResponse(generate, media_type="text/event-stream")</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    # Here is the handling of stream = False</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    response = generate_chatglm3(model, tokenizer, gen_params)</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    # Remove the first newline character</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    if response["text"].startswith("\n"):</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        response["text"] = response["text"][1:]</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    response["text"] = response["text"].strip()</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    usage = UsageInfo()</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    function_call, finish_reason = None, "stop"</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    if request.tools:</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        try:</span><br></span><span class=token-line style=color:#393A34><span class="token plain">            function_call = process_response(response["text"], use_tool=True)</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        except:</span><br></span><span class=token-line style=color:#393A34><span class="token plain">            logger.warning("Failed to parse tool call, maybe the response is not a tool call or have been answered.")</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    if isinstance(function_call, dict):</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        finish_reason = "function_call"</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        function_call = FunctionCallResponse(**function_call)</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    message = ChatMessage(</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        role="assistant",</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        content=response["text"],</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        function_call=function_call if isinstance(function_call, FunctionCallResponse) else None,</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    )</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    logger.debug(f"==== message ====\n{message}")</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    choice_data = ChatCompletionResponseChoice(</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        index=0,</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        message=message,</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        finish_reason=finish_reason,</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    )</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    task_usage = UsageInfo.model_validate(response["usage"])</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    for usage_key, usage_value in task_usage.model_dump().items():</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        setattr(usage, usage_key, getattr(usage, usage_key) + usage_value)</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    return ChatCompletionResponse(</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        model=request.model,</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        id="",  # for open_source model, id is empty</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        choices=[choice_data],</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        object="chat.completion",</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        usage=usage</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    )</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">async def predict(model_id: str, params: dict):</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    global model, tokenizer</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    choice_data = ChatCompletionResponseStreamChoice(</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        index=0,</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        delta=DeltaMessage(role="assistant"),</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        finish_reason=None</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    )</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    chunk = ChatCompletionResponse(model=model_id, id="", choices=[choice_data], object="chat.completion.chunk")</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    yield "{}".format(chunk.model_dump_json(exclude_unset=True))</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    previous_text = ""</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    for new_response in generate_stream_chatglm3(model, tokenizer, params):</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        decoded_unicode = new_response["text"]</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        delta_text = decoded_unicode[len(previous_text):]</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        previous_text = decoded_unicode</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">        finish_reason = new_response["finish_reason"]</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        if len(delta_text) == 0 and finish_reason != "function_call":</span><br></span><span class=token-line style=color:#393A34><span class="token plain">            continue</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">        function_call = None</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        if finish_reason == "function_call":</span><br></span><span class=token-line style=color:#393A34><span class="token plain">            try:</span><br></span><span class=token-line style=color:#393A34><span class="token plain">                function_call = process_response(decoded_unicode, use_tool=True)</span><br></span><span class=token-line style=color:#393A34><span class="token plain">            except:</span><br></span><span class=token-line style=color:#393A34><span class="token plain">                logger.warning(</span><br></span><span class=token-line style=color:#393A34><span class="token plain">                    "Failed to parse tool call, maybe the response is not a tool call or have been answered.")</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">        if isinstance(function_call, dict):</span><br></span><span class=token-line style=color:#393A34><span class="token plain">            function_call = FunctionCallResponse(**function_call)</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">        delta = DeltaMessage(</span><br></span><span class=token-line style=color:#393A34><span class="token plain">            content=delta_text,</span><br></span><span class=token-line style=color:#393A34><span class="token plain">            role="assistant",</span><br></span><span class=token-line style=color:#393A34><span class="token plain">            function_call=function_call if isinstance(function_call, FunctionCallResponse) else None,</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        )</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">        choice_data = ChatCompletionResponseStreamChoice(</span><br></span><span class=token-line style=color:#393A34><span class="token plain">            index=0,</span><br></span><span class=token-line style=color:#393A34><span class="token plain">            delta=delta,</span><br></span><span class=token-line style=color:#393A34><span class="token plain">            finish_reason=finish_reason</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        )</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        chunk = ChatCompletionResponse(</span><br></span><span class=token-line style=color:#393A34><span class="token plain">            model=model_id,</span><br></span><span class=token-line style=color:#393A34><span class="token plain">            id="",</span><br></span><span class=token-line style=color:#393A34><span class="token plain">            choices=[choice_data],</span><br></span><span class=token-line style=color:#393A34><span class="token plain">            object="chat.completion.chunk"</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        )</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        yield "{}".format(chunk.model_dump_json(exclude_unset=True))</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    choice_data = ChatCompletionResponseStreamChoice(</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        index=0,</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        delta=DeltaMessage(),</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        finish_reason="stop"</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    )</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    chunk = ChatCompletionResponse(</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        model=model_id,</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        id="",</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        choices=[choice_data],</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        object="chat.completion.chunk"</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    )</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    yield "{}".format(chunk.model_dump_json(exclude_unset=True))</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    yield '[DONE]'</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">def predict_stream(model_id, gen_params):</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    """</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    The function call is compatible with stream mode output.</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    The first seven characters are determined.</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    If not a function call, the stream output is directly generated.</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    Otherwise, the complete character content of the function call is returned.</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    :param model_id:</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    :param gen_params:</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    :return:</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    """</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    output = ""</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    is_function_call = False</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    has_send_first_chunk = False</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    for new_response in generate_stream_chatglm3(model, tokenizer, gen_params):</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        decoded_unicode = new_response["text"]</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        delta_text = decoded_unicode[len(output):]</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        output = decoded_unicode</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">        # When it is not a function call and the character length is> 7,</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        # try to judge whether it is a function call according to the special function prefix</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        if not is_function_call and len(output) > 7:</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">            # Determine whether a function is called</span><br></span><span class=token-line style=color:#393A34><span class="token plain">            is_function_call = contains_custom_function(output)</span><br></span><span class=token-line style=color:#393A34><span class="token plain">            if is_function_call:</span><br></span><span class=token-line style=color:#393A34><span class="token plain">                continue</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">            # Non-function call, direct stream output</span><br></span><span class=token-line style=color:#393A34><span class="token plain">            finish_reason = new_response["finish_reason"]</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">            # Send an empty string first to avoid truncation by subsequent next() operations.</span><br></span><span class=token-line style=color:#393A34><span class="token plain">            if not has_send_first_chunk:</span><br></span><span class=token-line style=color:#393A34><span class="token plain">                message = DeltaMessage(</span><br></span><span class=token-line style=color:#393A34><span class="token plain">                    content="",</span><br></span><span class=token-line style=color:#393A34><span class="token plain">                    role="assistant",</span><br></span><span class=token-line style=color:#393A34><span class="token plain">                    function_call=None,</span><br></span><span class=token-line style=color:#393A34><span class="token plain">                )</span><br></span><span class=token-line style=color:#393A34><span class="token plain">                choice_data = ChatCompletionResponseStreamChoice(</span><br></span><span class=token-line style=color:#393A34><span class="token plain">                    index=0,</span><br></span><span class=token-line style=color:#393A34><span class="token plain">                    delta=message,</span><br></span><span class=token-line style=color:#393A34><span class="token plain">                    finish_reason=finish_reason</span><br></span><span class=token-line style=color:#393A34><span class="token plain">                )</span><br></span><span class=token-line style=color:#393A34><span class="token plain">                chunk = ChatCompletionResponse(</span><br></span><span class=token-line style=color:#393A34><span class="token plain">                    model=model_id,</span><br></span><span class=token-line style=color:#393A34><span class="token plain">                    id="",</span><br></span><span class=token-line style=color:#393A34><span class="token plain">                    choices=[choice_data],</span><br></span><span class=token-line style=color:#393A34><span class="token plain">                    created=int(time.time()),</span><br></span><span class=token-line style=color:#393A34><span class="token plain">                    object="chat.completion.chunk"</span><br></span><span class=token-line style=color:#393A34><span class="token plain">                )</span><br></span><span class=token-line style=color:#393A34><span class="token plain">                yield "{}".format(chunk.model_dump_json(exclude_unset=True))</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">            send_msg = delta_text if has_send_first_chunk else output</span><br></span><span class=token-line style=color:#393A34><span class="token plain">            has_send_first_chunk = True</span><br></span><span class=token-line style=color:#393A34><span class="token plain">            message = DeltaMessage(</span><br></span><span class=token-line style=color:#393A34><span class="token plain">                content=send_msg,</span><br></span><span class=token-line style=color:#393A34><span class="token plain">                role="assistant",</span><br></span><span class=token-line style=color:#393A34><span class="token plain">                function_call=None,</span><br></span><span class=token-line style=color:#393A34><span class="token plain">            )</span><br></span><span class=token-line style=color:#393A34><span class="token plain">            choice_data = ChatCompletionResponseStreamChoice(</span><br></span><span class=token-line style=color:#393A34><span class="token plain">                index=0,</span><br></span><span class=token-line style=color:#393A34><span class="token plain">                delta=message,</span><br></span><span class=token-line style=color:#393A34><span class="token plain">                finish_reason=finish_reason</span><br></span><span class=token-line style=color:#393A34><span class="token plain">            )</span><br></span><span class=token-line style=color:#393A34><span class="token plain">            chunk = ChatCompletionResponse(</span><br></span><span class=token-line style=color:#393A34><span class="token plain">                model=model_id,</span><br></span><span class=token-line style=color:#393A34><span class="token plain">                id="",</span><br></span><span class=token-line style=color:#393A34><span class="token plain">                choices=[choice_data],</span><br></span><span class=token-line style=color:#393A34><span class="token plain">                created=int(time.time()),</span><br></span><span class=token-line style=color:#393A34><span class="token plain">                object="chat.completion.chunk"</span><br></span><span class=token-line style=color:#393A34><span class="token plain">            )</span><br></span><span class=token-line style=color:#393A34><span class="token plain">            yield "{}".format(chunk.model_dump_json(exclude_unset=True))</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    if is_function_call:</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        yield output</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    else:</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        yield '[DONE]'</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">async def parse_output_text(model_id: str, value: str):</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    """</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    Directly output the text content of value</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    :param model_id:</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    :param value:</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    :return:</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    """</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    choice_data = ChatCompletionResponseStreamChoice(</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        index=0,</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        delta=DeltaMessage(role="assistant", content=value),</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        finish_reason=None</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    )</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    chunk = ChatCompletionResponse(model=model_id, id="", choices=[choice_data], object="chat.completion.chunk")</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    yield "{}".format(chunk.model_dump_json(exclude_unset=True))</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    choice_data = ChatCompletionResponseStreamChoice(</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        index=0,</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        delta=DeltaMessage(),</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        finish_reason="stop"</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    )</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    chunk = ChatCompletionResponse(model=model_id, id="", choices=[choice_data], object="chat.completion.chunk")</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    yield "{}".format(chunk.model_dump_json(exclude_unset=True))</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    yield '[DONE]'</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">def contains_custom_function(value: str) -> bool:</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    """</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    Determine whether 'function_call' according to a special function prefix.</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    For example, the functions defined in "tools_using_demo/tool_register.py" are all "get_xxx" and start with "get_"</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    [Note] This is not a rigorous judgment method, only for reference.</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    :param value:</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    :return:</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    """</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    return value and 'get_' in value</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">if __name__ == "__main__":</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    # Load LLM</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    tokenizer = AutoTokenizer.from_pretrained(os.getenv('TOKENIZER_PATH'), trust_remote_code=True)</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    model = AutoModel.from_pretrained(os.getenv('MODEL_PATH'), trust_remote_code=True, device_map="auto").eval()</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    # load Embedding</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    embedding_model = SentenceTransformer(EMBEDDING_PATH, device="cuda")</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    uvicorn.run(app, host='0.0.0.0', port=8888, workers=1)</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=复制代码到剪贴板 title=复制 class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=运行成功后>运行成功后<a href=#运行成功后 class=hash-link aria-label=运行成功后的直接链接 title=运行成功后的直接链接>​</a></h3>
<p><img decoding=async loading=lazy alt=85e97e5d6213b8e74cd7faa2622a355b src=/docs-hub/assets/images/85e97e5d6213b8e74cd7faa2622a355b-012260ec67045ff50aaf5c6a451c63b0.jpg width=1440 height=283 class=img_ev3q>### 安装 M3E</p>
<p>可以参考官方给出的镜像，这个自己搞容易出问题，直接使用镜像最方便，<a href=https://doc.fastai.site/docs/development/custom-models/m3e/ target=_blank rel="noopener noreferrer">https://doc.fastai.site/docs/development/custom-models/m3e/</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=配置-oneapi>配置 OneAPI<a href=#配置-oneapi class=hash-link aria-label="配置 OneAPI的直接链接" title="配置 OneAPI的直接链接">​</a></h2>
<p>重点来了，OneAPI 目前这个地方有个坑，你参考这篇文章的时候，<a href=https://doc.fastai.site/docs/development/custom-models/m3e/#%E6%8E%A5%E5%85%A5-one-api target=_blank rel="noopener noreferrer">https://doc.fastai.site/docs/development/custom-models/m3e/#接入-one-api</a>，记得 Base URL 一定要填写具体的 IP 地址。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=我的-m3e-在-wsl-里面>我的 M3E 在 WSL 里面<a href=#我的-m3e-在-wsl-里面 class=hash-link aria-label="我的 M3E 在 WSL 里面的直接链接" title="我的 M3E 在 WSL 里面的直接链接">​</a></h3>
<p><img decoding=async loading=lazy alt=2090aa22ad0e2333c3349df4bcff350e src=/docs-hub/assets/images/2090aa22ad0e2333c3349df4bcff350e-e1a44ebf8c422d3b50c30467a99bd4d8.jpg width=1403 height=606 class=img_ev3q>### 我的 ChatGLM API 在本机本地运行<br>
<img decoding=async loading=lazy alt=c04de4dba58351b4174778516b263eb1 src=/docs-hub/assets/images/c04de4dba58351b4174778516b263eb1-119097838deb0dabfdc152dfd0c8b318.jpg width=1394 height=620 class=img_ev3q>### 测试</p>
<p>如果响应时间特别长，就是有问题</p>
<p><img decoding=async loading=lazy alt=ed0d8bf11e9e4b189ad5dbcde10b5bb7 src=/docs-hub/assets/images/ed0d8bf11e9e4b189ad5dbcde10b5bb7-9a11bd0df2876fff3274c0ed2a10193f.jpg width=1385 height=277 class=img_ev3q>### 增加 config.json 配置</p>
<p>这里我直接给出我增加的内容，配置文件说明请看 <a href=https://doc.fastai.site/docs/development/configuration/ target=_blank rel="noopener noreferrer">https://doc.fastai.site/docs/development/configuration/</a></p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-text codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">{</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  "feConfigs": {</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    "lafEnv": "https://laf.dev"</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  },</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  "systemEnv": {</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    "openapiPrefix": "fastgpt",</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    "vectorMaxProcess": 15,</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    "qaMaxProcess": 15,</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    "pgHNSWEfSearch": 100</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  },</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  "llmModels": [</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  	{</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  	"model": "gpt-3.5-turbo",</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  	"name": "gpt-3.5-turbo",</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  	"maxContext": 16000,</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  	"avatar": "/imgs/model/openai.svg",</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  	"maxResponse": 4000,</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  	"quoteMaxToken": 13000,</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  	"maxTemperature": 1.2,</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  	"charsPointsPrice": 0,</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  	"censor": false,</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  	"vision": false,</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  	"datasetProcess": true,</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  	"usedInClassify": true,</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  	"usedInExtractFields": true,</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  	"usedInToolCall": true,</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  	"usedInQueryExtension": true,</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  	"toolChoice": true,</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  	"functionCall": true,</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  	"customCQPrompt": "",</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  	"customExtractPrompt": "",</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  	"defaultSystemChatPrompt": "",</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  	"defaultConfig": {}</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  	},</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  	{</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  	"model": "gpt-4-0125-preview",</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  	"name": "gpt-4-turbo",</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  	"avatar": "/imgs/model/openai.svg",</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  	"maxContext": 125000,</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  	"maxResponse": 4000,</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  	"quoteMaxToken": 100000,</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  	"maxTemperature": 1.2,</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  	"charsPointsPrice": 0,</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  	"censor": false,</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  	"vision": false,</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  	"datasetProcess": false,</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  	"usedInClassify": true,</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  	"usedInExtractFields": true,</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  	"usedInToolCall": true,</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  	"usedInQueryExtension": true,</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  	"toolChoice": true,</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  	"functionCall": false,</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  	"customCQPrompt": "",</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  	"customExtractPrompt": "",</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  	"defaultSystemChatPrompt": "",</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  	"defaultConfig": {}</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  	},</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  	{</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  	"model": "gpt-4-vision-preview",</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  	"name": "gpt-4-vision",</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  	"avatar": "/imgs/model/openai.svg",</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  	"maxContext": 128000,</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  	"maxResponse": 4000,</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  	"quoteMaxToken": 100000,</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  	"maxTemperature": 1.2,</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  	"charsPointsPrice": 0,</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  	"censor": false,</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  	"vision": true,</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  	"datasetProcess": false,</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  	"usedInClassify": false,</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  	"usedInExtractFields": false,</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  	"usedInToolCall": false,</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  	"usedInQueryExtension": false,</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  	"toolChoice": true,</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  	"functionCall": false,</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  	"customCQPrompt": "",</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  	"customExtractPrompt": "",</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  	"defaultSystemChatPrompt": "",</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  	"defaultConfig": {}</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  	},</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    {</span><br></span><span class=token-line style=color:#393A34><span class="token plain">      "model": "chatglm3-6b",</span><br></span><span class=token-line style=color:#393A34><span class="token plain">      "name": "chatglm3-6b",</span><br></span><span class=token-line style=color:#393A34><span class="token plain">      "maxContext": 8000,</span><br></span><span class=token-line style=color:#393A34><span class="token plain">      "maxResponse": 8000,</span><br></span><span class=token-line style=color:#393A34><span class="token plain">      "quoteMaxToken": 2000,</span><br></span><span class=token-line style=color:#393A34><span class="token plain">      "maxTemperature": 1,</span><br></span><span class=token-line style=color:#393A34><span class="token plain">      "vision": false,</span><br></span><span class=token-line style=color:#393A34><span class="token plain">      "defaultSystemChatPrompt": ""</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    }</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  ],</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  "vectorModels": [</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    {</span><br></span><span class=token-line style=color:#393A34><span class="token plain">      "model": "m3e",</span><br></span><span class=token-line style=color:#393A34><span class="token plain">      "name": "M3E（测试使用）",</span><br></span><span class=token-line style=color:#393A34><span class="token plain">      "price": 0.1,</span><br></span><span class=token-line style=color:#393A34><span class="token plain">      "defaultToken": 500,</span><br></span><span class=token-line style=color:#393A34><span class="token plain">      "maxToken": 1800</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    }</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  ],</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  "reRankModels": [],</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  "audioSpeechModels": [</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    {</span><br></span><span class=token-line style=color:#393A34><span class="token plain">      "model": "tts-1",</span><br></span><span class=token-line style=color:#393A34><span class="token plain">      "name": "OpenAI TTS1",</span><br></span><span class=token-line style=color:#393A34><span class="token plain">      "charsPointsPrice": 0,</span><br></span><span class=token-line style=color:#393A34><span class="token plain">      "voices": [</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        {</span><br></span><span class=token-line style=color:#393A34><span class="token plain">          "label": "Alloy",</span><br></span><span class=token-line style=color:#393A34><span class="token plain">          "value": "alloy",</span><br></span><span class=token-line style=color:#393A34><span class="token plain">          "bufferId": "openai-Alloy"</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        },</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        {</span><br></span><span class=token-line style=color:#393A34><span class="token plain">          "label": "Echo",</span><br></span><span class=token-line style=color:#393A34><span class="token plain">          "value": "echo",</span><br></span><span class=token-line style=color:#393A34><span class="token plain">          "bufferId": "openai-Echo"</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        },</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        {</span><br></span><span class=token-line style=color:#393A34><span class="token plain">          "label": "Fable",</span><br></span><span class=token-line style=color:#393A34><span class="token plain">          "value": "fable",</span><br></span><span class=token-line style=color:#393A34><span class="token plain">          "bufferId": "openai-Fable"</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        },</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        {</span><br></span><span class=token-line style=color:#393A34><span class="token plain">          "label": "Onyx",</span><br></span><span class=token-line style=color:#393A34><span class="token plain">          "value": "onyx",</span><br></span><span class=token-line style=color:#393A34><span class="token plain">          "bufferId": "openai-Onyx"</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        },</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        {</span><br></span><span class=token-line style=color:#393A34><span class="token plain">          "label": "Nova",</span><br></span><span class=token-line style=color:#393A34><span class="token plain">          "value": "nova",</span><br></span><span class=token-line style=color:#393A34><span class="token plain">          "bufferId": "openai-Nova"</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        },</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        {</span><br></span><span class=token-line style=color:#393A34><span class="token plain">          "label": "Shimmer",</span><br></span><span class=token-line style=color:#393A34><span class="token plain">          "value": "shimmer",</span><br></span><span class=token-line style=color:#393A34><span class="token plain">          "bufferId": "openai-Shimmer"</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        }</span><br></span><span class=token-line style=color:#393A34><span class="token plain">      ]</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    }</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  ],</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  "whisperModel": {</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    "model": "whisper-1",</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    "name": "Whisper1",</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    "charsPointsPrice": 0</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  }</span><br></span><span class=token-line style=color:#393A34><span class="token plain">}</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=复制代码到剪贴板 title=复制 class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=常见问题>常见问题<a href=#常见问题 class=hash-link aria-label=常见问题的直接链接 title=常见问题的直接链接>​</a></h3>
<ul>
<li>使用<code>WSL</code>最好电脑内存大点，<code>WSL</code>这玩意很吃内存</li>
<li>能用<code>docker</code>就用<code>docker</code>，很多都是因为配置的问题出错</li>
<li>显存不够可以量化，不行就用<code>API</code></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=参考链接>参考链接<a href=#参考链接 class=hash-link aria-label=参考链接的直接链接 title=参考链接的直接链接>​</a></h3>
<p><a href=https://doc.fastai.site/docs/development/docker/ target=_blank rel="noopener noreferrer">https://doc.fastai.site/docs/development/docker/</a></p>
<p><a href=https://github.com/THUDM/ChatGLM3/tree/main/openai_api_demo target=_blank rel="noopener noreferrer">https://github.com/THUDM/ChatGLM3/tree/main/openai_api_demo</a></p>
<p><a href=https://huggingface.co/THUDM/chatglm3-6b target=_blank rel="noopener noreferrer">https://huggingface.co/THUDM/chatglm3-6b</a></p>
<p><a href=https://www.modelscope.cn/models/xrunda/m3e-base/summary target=_blank rel="noopener noreferrer">https://www.modelscope.cn/models/xrunda/m3e-base/summary</a></p>
<p><a href=https://github.com/labring/FastGPT target=_blank rel="noopener noreferrer">https://github.com/labring/FastGPT</a></p>
<p><a href=https://github.com/labring/sealos target=_blank rel="noopener noreferrer">https://github.com/labring/sealos</a></p>
<p><a href=https://github.com/songquanpeng/one-api target=_blank rel="noopener noreferrer">https://github.com/songquanpeng/one-api</a></p>
<p><strong>如果您喜欢这篇文章，不妨给它点个赞并收藏，感谢您的支持！</strong></div><footer class="row docusaurus-mt-lg"><div class=col><b>标签：</b><ul class="tags_jXut padding--none margin-left--sm"><li class=tag_QGVx><a title=开发工具和环境配置相关文章 class="tag_zVej tagRegular_sFm0" href=/docs-hub/blog/tags/dev-tools>开发工具与环境</a></ul></div></footer></article><article class=margin-bottom--xl><header><h2 class=title_f1Hy><a href=/docs-hub/blog/单元测试和集成测试的区别>单元测试和集成测试的区别</a></h2><div class="container_mt6G margin-vert--md"><time datetime=2024-09-25T00:00:00.000Z>2024年9月25日</time> · <!-- -->阅读需 3 分钟</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--12 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a class=avatar__photo-link href=/docs-hub/blog/authors/sumingcheng><img class="avatar__photo authorImage_XqGP" src=https://github.com/user-attachments/assets/9a06bd55-094a-4efc-91c3-d1b92236822f alt=素明诚></a><div class="avatar__intro authorDetails_lV9A"><div class=avatar__name><a href=/docs-hub/blog/authors/sumingcheng><span class=authorName_yefp>素明诚</span></a></div><small class=authorTitle_nd0D title="Full stack development">Full stack development</small><div class=authorSocials_rSDt><a href=https://x.com/sumingcheng target=_blank rel="noopener noreferrer" class=authorSocialLink_owbf title=X><svg width=1em height=1em fill=none viewBox="0 0 1200 1227" class="authorSocialLink_owbf xSvg_y3PF" style=--dark:#000;--light:#fff><path d="M714.163 519.284 1160.89 0h-105.86L667.137 450.887 357.328 0H0l468.492 681.821L0 1226.37h105.866l409.625-476.152 327.181 476.152H1200L714.137 519.284h.026ZM569.165 687.828l-47.468-67.894-377.686-540.24h162.604l304.797 435.991 47.468 67.894 396.2 566.721H892.476L569.165 687.854v-.026Z"/></svg></a><a href=https://github.com/sumingcheng target=_blank rel="noopener noreferrer" class=authorSocialLink_owbf title=GitHub><svg viewBox="0 0 256 250" width=1em height=1em class="authorSocialLink_owbf githubSvg_Uu4N" style=--dark:#000;--light:#fff preserveAspectRatio=xMidYMid><path d="M128.001 0C57.317 0 0 57.307 0 128.001c0 56.554 36.676 104.535 87.535 121.46 6.397 1.185 8.746-2.777 8.746-6.158 0-3.052-.12-13.135-.174-23.83-35.61 7.742-43.124-15.103-43.124-15.103-5.823-14.795-14.213-18.73-14.213-18.73-11.613-7.944.876-7.78.876-7.78 12.853.902 19.621 13.19 19.621 13.19 11.417 19.568 29.945 13.911 37.249 10.64 1.149-8.272 4.466-13.92 8.127-17.116-28.431-3.236-58.318-14.212-58.318-63.258 0-13.975 5-25.394 13.188-34.358-1.329-3.224-5.71-16.242 1.24-33.874 0 0 10.749-3.44 35.21 13.121 10.21-2.836 21.16-4.258 32.038-4.307 10.878.049 21.837 1.47 32.066 4.307 24.431-16.56 35.165-13.12 35.165-13.12 6.967 17.63 2.584 30.65 1.255 33.873 8.207 8.964 13.173 20.383 13.173 34.358 0 49.163-29.944 59.988-58.447 63.157 4.591 3.972 8.682 11.762 8.682 23.704 0 17.126-.148 30.91-.148 35.126 0 3.407 2.304 7.398 8.792 6.14C219.37 232.5 256 184.537 256 128.002 256 57.307 198.691 0 128.001 0Zm-80.06 182.34c-.282.636-1.283.827-2.194.39-.929-.417-1.45-1.284-1.15-1.922.276-.655 1.279-.838 2.205-.399.93.418 1.46 1.293 1.139 1.931Zm6.296 5.618c-.61.566-1.804.303-2.614-.591-.837-.892-.994-2.086-.375-2.66.63-.566 1.787-.301 2.626.591.838.903 1 2.088.363 2.66Zm4.32 7.188c-.785.545-2.067.034-2.86-1.104-.784-1.138-.784-2.503.017-3.05.795-.547 2.058-.055 2.861 1.075.782 1.157.782 2.522-.019 3.08Zm7.304 8.325c-.701.774-2.196.566-3.29-.49-1.119-1.032-1.43-2.496-.726-3.27.71-.776 2.213-.558 3.315.49 1.11 1.03 1.45 2.505.701 3.27Zm9.442 2.81c-.31 1.003-1.75 1.459-3.199 1.033-1.448-.439-2.395-1.613-2.103-2.626.301-1.01 1.747-1.484 3.207-1.028 1.446.436 2.396 1.602 2.095 2.622Zm10.744 1.193c.036 1.055-1.193 1.93-2.715 1.95-1.53.034-2.769-.82-2.786-1.86 0-1.065 1.202-1.932 2.733-1.958 1.522-.03 2.768.818 2.768 1.868Zm10.555-.405c.182 1.03-.875 2.088-2.387 2.37-1.485.271-2.861-.365-3.05-1.386-.184-1.056.893-2.114 2.376-2.387 1.514-.263 2.868.356 3.061 1.403Z"/></svg></a></div></div></div></div></div></header><div class=markdown><h2 class="anchor anchorWithStickyNavbar_LWe7" id=单元测试unit-testing>单元测试(Unit Testing)<a href=#单元测试unit-testing class=hash-link aria-label="单元测试(Unit Testing)的直接链接" title="单元测试(Unit Testing)的直接链接">​</a></h2>
<p>单元测试是对软件中的最小可测试部分，通常是单个函数或方法进行测试，以确保它们能够正确执行预定的任务。可以说单元测试是针对每一个函数或方法都是一块砖，单元测试就是确保每块砖本身没有缺陷。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=为什么要进行单元测试>为什么要进行单元测试<a href=#为什么要进行单元测试 class=hash-link aria-label=为什么要进行单元测试的直接链接 title=为什么要进行单元测试的直接链接>​</a></h3>
<p><strong>确保质量</strong> 通过单元测试，开发者可以确认每个基本部件都按照预期工作。</p>
<p><strong>快速识别问题</strong> 如果出现问题，很容易定位到具体的函数或方法，因为测试是独立进行的。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=单元测试的特点>单元测试的特点<a href=#单元测试的特点 class=hash-link aria-label=单元测试的特点的直接链接 title=单元测试的特点的直接链接>​</a></h3>
<p><strong>独立性</strong> 每个测试独立于其他测试，确保测试结果的准确性。</p>
<p><strong>无外部依赖</strong> 避免使用数据库或网络服务等外部系统，简单点说就是，只是针对特定的组件进行测试，不连接缓存或者是数据库，也不会请求其他的模块~</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=集成测试integration-testing>集成测试(Integration Testing)<a href=#集成测试integration-testing class=hash-link aria-label="集成测试(Integration Testing)的直接链接" title="集成测试(Integration Testing)的直接链接">​</a></h2>
<p>集成测试是在单元测试之后进行的，目的是检查多个单元（比如几个函数或模块）组合在一起时是否能够协同工作。如果说单元测试是检查每块砖，那么集成测试就是检查砖与砖之间的粘合是否牢固。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=为什么要进行集成测试>为什么要进行集成测试<a href=#为什么要进行集成测试 class=hash-link aria-label=为什么要进行集成测试的直接链接 title=为什么要进行集成测试的直接链接>​</a></h3>
<p><strong>接口和数据流</strong> 确保不同部分之间的接口正确无误，数据能够正确传递。</p>
<p><strong>发现协同问题</strong> 单元测试可能漏掉的问题，在集成测试中往往可以被发现，一般来说只要你对其他业务接口的数据理解没问题，集成测试也基本没问题</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=集成测试的特点>集成测试的特点<a href=#集成测试的特点 class=hash-link aria-label=集成测试的特点的直接链接 title=集成测试的特点的直接链接>​</a></h3>
<p><strong>逐步集成</strong> 从测试最小的组合开始，逐步增加直到整个系统被测试完毕。很多人理解集成测试就是一下子都笼起来，全部测一下。其实也是可以一部分一部分测的</p>
<p><strong>模拟真实环境</strong> 尽可能在接近生产环境的设置中进行测试，以模拟真实操作。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=总结>总结<a href=#总结 class=hash-link aria-label=总结的直接链接 title=总结的直接链接>​</a></h2>
<p>单元测试就是为了测试某个具体的功能是否能通过，有 bug 就改完再测，不行就再来亿遍。集成测试你的代码基本跑通，接下来要跟第三方进行集成测试。</div><footer class="row docusaurus-mt-lg"><div class=col><b>标签：</b><ul class="tags_jXut padding--none margin-left--sm"><li class=tag_QGVx><a title=开发工具和环境配置相关文章 class="tag_zVej tagRegular_sFm0" href=/docs-hub/blog/tags/dev-tools>开发工具与环境</a></ul></div></footer></article><article class=margin-bottom--xl><header><h2 class=title_f1Hy><a href=/docs-hub/blog/python-根据-markdown-目录创建文件文件夹>Python 根据 Markdown 目录创建文件文件夹</a></h2><div class="container_mt6G margin-vert--md"><time datetime=2024-09-15T00:00:00.000Z>2024年9月15日</time> · <!-- -->阅读需 1 分钟</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--12 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a class=avatar__photo-link href=/docs-hub/blog/authors/sumingcheng><img class="avatar__photo authorImage_XqGP" src=https://github.com/user-attachments/assets/9a06bd55-094a-4efc-91c3-d1b92236822f alt=素明诚></a><div class="avatar__intro authorDetails_lV9A"><div class=avatar__name><a href=/docs-hub/blog/authors/sumingcheng><span class=authorName_yefp>素明诚</span></a></div><small class=authorTitle_nd0D title="Full stack development">Full stack development</small><div class=authorSocials_rSDt><a href=https://x.com/sumingcheng target=_blank rel="noopener noreferrer" class=authorSocialLink_owbf title=X><svg width=1em height=1em fill=none viewBox="0 0 1200 1227" class="authorSocialLink_owbf xSvg_y3PF" style=--dark:#000;--light:#fff><path d="M714.163 519.284 1160.89 0h-105.86L667.137 450.887 357.328 0H0l468.492 681.821L0 1226.37h105.866l409.625-476.152 327.181 476.152H1200L714.137 519.284h.026ZM569.165 687.828l-47.468-67.894-377.686-540.24h162.604l304.797 435.991 47.468 67.894 396.2 566.721H892.476L569.165 687.854v-.026Z"/></svg></a><a href=https://github.com/sumingcheng target=_blank rel="noopener noreferrer" class=authorSocialLink_owbf title=GitHub><svg viewBox="0 0 256 250" width=1em height=1em class="authorSocialLink_owbf githubSvg_Uu4N" style=--dark:#000;--light:#fff preserveAspectRatio=xMidYMid><path d="M128.001 0C57.317 0 0 57.307 0 128.001c0 56.554 36.676 104.535 87.535 121.46 6.397 1.185 8.746-2.777 8.746-6.158 0-3.052-.12-13.135-.174-23.83-35.61 7.742-43.124-15.103-43.124-15.103-5.823-14.795-14.213-18.73-14.213-18.73-11.613-7.944.876-7.78.876-7.78 12.853.902 19.621 13.19 19.621 13.19 11.417 19.568 29.945 13.911 37.249 10.64 1.149-8.272 4.466-13.92 8.127-17.116-28.431-3.236-58.318-14.212-58.318-63.258 0-13.975 5-25.394 13.188-34.358-1.329-3.224-5.71-16.242 1.24-33.874 0 0 10.749-3.44 35.21 13.121 10.21-2.836 21.16-4.258 32.038-4.307 10.878.049 21.837 1.47 32.066 4.307 24.431-16.56 35.165-13.12 35.165-13.12 6.967 17.63 2.584 30.65 1.255 33.873 8.207 8.964 13.173 20.383 13.173 34.358 0 49.163-29.944 59.988-58.447 63.157 4.591 3.972 8.682 11.762 8.682 23.704 0 17.126-.148 30.91-.148 35.126 0 3.407 2.304 7.398 8.792 6.14C219.37 232.5 256 184.537 256 128.002 256 57.307 198.691 0 128.001 0Zm-80.06 182.34c-.282.636-1.283.827-2.194.39-.929-.417-1.45-1.284-1.15-1.922.276-.655 1.279-.838 2.205-.399.93.418 1.46 1.293 1.139 1.931Zm6.296 5.618c-.61.566-1.804.303-2.614-.591-.837-.892-.994-2.086-.375-2.66.63-.566 1.787-.301 2.626.591.838.903 1 2.088.363 2.66Zm4.32 7.188c-.785.545-2.067.034-2.86-1.104-.784-1.138-.784-2.503.017-3.05.795-.547 2.058-.055 2.861 1.075.782 1.157.782 2.522-.019 3.08Zm7.304 8.325c-.701.774-2.196.566-3.29-.49-1.119-1.032-1.43-2.496-.726-3.27.71-.776 2.213-.558 3.315.49 1.11 1.03 1.45 2.505.701 3.27Zm9.442 2.81c-.31 1.003-1.75 1.459-3.199 1.033-1.448-.439-2.395-1.613-2.103-2.626.301-1.01 1.747-1.484 3.207-1.028 1.446.436 2.396 1.602 2.095 2.622Zm10.744 1.193c.036 1.055-1.193 1.93-2.715 1.95-1.53.034-2.769-.82-2.786-1.86 0-1.065 1.202-1.932 2.733-1.958 1.522-.03 2.768.818 2.768 1.868Zm10.555-.405c.182 1.03-.875 2.088-2.387 2.37-1.485.271-2.861-.365-3.05-1.386-.184-1.056.893-2.114 2.376-2.387 1.514-.263 2.868.356 3.061 1.403Z"/></svg></a></div></div></div></div></div></header><div class=markdown><p><strong>将脚本保存为 <code>create_dirs_from_md.py</code>。</strong></p>
<p><strong>将您的目录结构粘贴到 <code>md_structure</code> 变量中。</strong></p>
<p><strong>在终端运行脚本：</strong><code>python3 create_dirs_from_md.py</code></p>
<p><img decoding=async loading=lazy alt=17adf28490d266622875f6dd7c4cbabe src=/docs-hub/assets/images/17adf28490d266622875f6dd7c4cbabe-95db3379b5792eb0dd2d9a3c60022d93.jpg width=859 height=691 class=img_ev3q></p>
<p>创建成功</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-text codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">import os</span><br></span><span class=token-line style=color:#393A34><span class="token plain">import re</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">md_structure = '''</span><br></span><span class=token-line style=color:#393A34><span class="token plain">- cmd/</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  - main.go</span><br></span><span class=token-line style=color:#393A34><span class="token plain">- internal/</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  - domain/</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    - model/</span><br></span><span class=token-line style=color:#393A34><span class="token plain">      - order.go</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    - repository/</span><br></span><span class=token-line style=color:#393A34><span class="token plain">      - order_repository.go</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  - application/</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    - service/</span><br></span><span class=token-line style=color:#393A34><span class="token plain">      - order_service.go</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  - infrastructure/</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    - repository/</span><br></span><span class=token-line style=color:#393A34><span class="token plain">      - order_repository_impl.go</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    - db/</span><br></span><span class=token-line style=color:#393A34><span class="token plain">      - database.go</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  - interfaces/</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    - handler/</span><br></span><span class=token-line style=color:#393A34><span class="token plain">      - order_handler.go</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  - di/</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    - wire.go</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    - wire_gen.go</span><br></span><span class=token-line style=color:#393A34><span class="token plain">'''</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">def parse_md_structure(md_text):</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    lines = md_text.strip().split('\n')</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    stack = []</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    paths = []</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    for line in lines:</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        # 计算缩进级别</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        indent = len(line) - len(line.lstrip(' '))</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        level = indent // 2  # 每两个空格一个级别</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">        # 提取名称，去除前面的符号和空格</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        name = line.strip().lstrip('-').strip()</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">        # 更新堆栈</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        while len(stack) > level:</span><br></span><span class=token-line style=color:#393A34><span class="token plain">            stack.pop()</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        stack.append(name)</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">        # 构建路径</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        path = os.path.join(*stack)</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        paths.append(path)</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    return paths</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">def create_dirs_and_files(paths):</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    for path in paths:</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        if path.endswith('/'):</span><br></span><span class=token-line style=color:#393A34><span class="token plain">            # 是目录</span><br></span><span class=token-line style=color:#393A34><span class="token plain">            dir_path = path.rstrip('/')</span><br></span><span class=token-line style=color:#393A34><span class="token plain">            os.makedirs(dir_path, exist_ok=True)</span><br></span><span class=token-line style=color:#393A34><span class="token plain">            print(f"Created directory: {dir_path}")</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        elif '.' in os.path.basename(path):</span><br></span><span class=token-line style=color:#393A34><span class="token plain">            # 是文件</span><br></span><span class=token-line style=color:#393A34><span class="token plain">            dir_name = os.path.dirname(path)</span><br></span><span class=token-line style=color:#393A34><span class="token plain">            if dir_name and not os.path.exists(dir_name):</span><br></span><span class=token-line style=color:#393A34><span class="token plain">                os.makedirs(dir_name, exist_ok=True)</span><br></span><span class=token-line style=color:#393A34><span class="token plain">                print(f"Created directory: {dir_name}")</span><br></span><span class=token-line style=color:#393A34><span class="token plain">            with open(path, 'w') as f:</span><br></span><span class=token-line style=color:#393A34><span class="token plain">                pass</span><br></span><span class=token-line style=color:#393A34><span class="token plain">            print(f"Created file: {path}")</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        else:</span><br></span><span class=token-line style=color:#393A34><span class="token plain">            # 是目录（没有斜杠，但也不是文件）</span><br></span><span class=token-line style=color:#393A34><span class="token plain">            os.makedirs(path, exist_ok=True)</span><br></span><span class=token-line style=color:#393A34><span class="token plain">            print(f"Created directory: {path}")</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">if __name__ == "__main__":</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    paths = parse_md_structure(md_structure)</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    create_dirs_and_files(paths)</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=复制代码到剪贴板 title=复制 class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div></div><footer class="row docusaurus-mt-lg"><div class=col><b>标签：</b><ul class="tags_jXut padding--none margin-left--sm"><li class=tag_QGVx><a title=开发工具和环境配置相关文章 class="tag_zVej tagRegular_sFm0" href=/docs-hub/blog/tags/dev-tools>开发工具与环境</a></ul></div></footer></article><article class=margin-bottom--xl><header><h2 class=title_f1Hy><a href=/docs-hub/blog/linux-系统中-所有权ownership和操作权permissions>Linux 系统中 所有权Ownership和操作权Permissions</a></h2><div class="container_mt6G margin-vert--md"><time datetime=2024-09-14T00:00:00.000Z>2024年9月14日</time> · <!-- -->阅读需 3 分钟</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--12 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a class=avatar__photo-link href=/docs-hub/blog/authors/sumingcheng><img class="avatar__photo authorImage_XqGP" src=https://github.com/user-attachments/assets/9a06bd55-094a-4efc-91c3-d1b92236822f alt=素明诚></a><div class="avatar__intro authorDetails_lV9A"><div class=avatar__name><a href=/docs-hub/blog/authors/sumingcheng><span class=authorName_yefp>素明诚</span></a></div><small class=authorTitle_nd0D title="Full stack development">Full stack development</small><div class=authorSocials_rSDt><a href=https://x.com/sumingcheng target=_blank rel="noopener noreferrer" class=authorSocialLink_owbf title=X><svg width=1em height=1em fill=none viewBox="0 0 1200 1227" class="authorSocialLink_owbf xSvg_y3PF" style=--dark:#000;--light:#fff><path d="M714.163 519.284 1160.89 0h-105.86L667.137 450.887 357.328 0H0l468.492 681.821L0 1226.37h105.866l409.625-476.152 327.181 476.152H1200L714.137 519.284h.026ZM569.165 687.828l-47.468-67.894-377.686-540.24h162.604l304.797 435.991 47.468 67.894 396.2 566.721H892.476L569.165 687.854v-.026Z"/></svg></a><a href=https://github.com/sumingcheng target=_blank rel="noopener noreferrer" class=authorSocialLink_owbf title=GitHub><svg viewBox="0 0 256 250" width=1em height=1em class="authorSocialLink_owbf githubSvg_Uu4N" style=--dark:#000;--light:#fff preserveAspectRatio=xMidYMid><path d="M128.001 0C57.317 0 0 57.307 0 128.001c0 56.554 36.676 104.535 87.535 121.46 6.397 1.185 8.746-2.777 8.746-6.158 0-3.052-.12-13.135-.174-23.83-35.61 7.742-43.124-15.103-43.124-15.103-5.823-14.795-14.213-18.73-14.213-18.73-11.613-7.944.876-7.78.876-7.78 12.853.902 19.621 13.19 19.621 13.19 11.417 19.568 29.945 13.911 37.249 10.64 1.149-8.272 4.466-13.92 8.127-17.116-28.431-3.236-58.318-14.212-58.318-63.258 0-13.975 5-25.394 13.188-34.358-1.329-3.224-5.71-16.242 1.24-33.874 0 0 10.749-3.44 35.21 13.121 10.21-2.836 21.16-4.258 32.038-4.307 10.878.049 21.837 1.47 32.066 4.307 24.431-16.56 35.165-13.12 35.165-13.12 6.967 17.63 2.584 30.65 1.255 33.873 8.207 8.964 13.173 20.383 13.173 34.358 0 49.163-29.944 59.988-58.447 63.157 4.591 3.972 8.682 11.762 8.682 23.704 0 17.126-.148 30.91-.148 35.126 0 3.407 2.304 7.398 8.792 6.14C219.37 232.5 256 184.537 256 128.002 256 57.307 198.691 0 128.001 0Zm-80.06 182.34c-.282.636-1.283.827-2.194.39-.929-.417-1.45-1.284-1.15-1.922.276-.655 1.279-.838 2.205-.399.93.418 1.46 1.293 1.139 1.931Zm6.296 5.618c-.61.566-1.804.303-2.614-.591-.837-.892-.994-2.086-.375-2.66.63-.566 1.787-.301 2.626.591.838.903 1 2.088.363 2.66Zm4.32 7.188c-.785.545-2.067.034-2.86-1.104-.784-1.138-.784-2.503.017-3.05.795-.547 2.058-.055 2.861 1.075.782 1.157.782 2.522-.019 3.08Zm7.304 8.325c-.701.774-2.196.566-3.29-.49-1.119-1.032-1.43-2.496-.726-3.27.71-.776 2.213-.558 3.315.49 1.11 1.03 1.45 2.505.701 3.27Zm9.442 2.81c-.31 1.003-1.75 1.459-3.199 1.033-1.448-.439-2.395-1.613-2.103-2.626.301-1.01 1.747-1.484 3.207-1.028 1.446.436 2.396 1.602 2.095 2.622Zm10.744 1.193c.036 1.055-1.193 1.93-2.715 1.95-1.53.034-2.769-.82-2.786-1.86 0-1.065 1.202-1.932 2.733-1.958 1.522-.03 2.768.818 2.768 1.868Zm10.555-.405c.182 1.03-.875 2.088-2.387 2.37-1.485.271-2.861-.365-3.05-1.386-.184-1.056.893-2.114 2.376-2.387 1.514-.263 2.868.356 3.061 1.403Z"/></svg></a></div></div></div></div></div></header><div class=markdown><h3 class="anchor anchorWithStickyNavbar_LWe7" id=所有权ownership>所有权（Ownership）<a href=#所有权ownership class=hash-link aria-label=所有权（Ownership）的直接链接 title=所有权（Ownership）的直接链接>​</a></h3>
<p>文件和目录的所有权包括两个主要属性：用户所有者（User Owner）和组所有者（Group Owner）。</p>
<p><strong>用户所有者</strong>：指对文件或目录具有特定权限的用户。通常，用户所有者可以修改文件内容、改变文件权限等。</p>
<p><strong>组所有者</strong>：指被分配给文件或目录的用户组。组内的所有成员可以根据组权限对文件或目录进行操作。</p>
<p>更改所有权通常通过 <code>chown</code> 命令完成，这对于系统安全管理、文件共享和用户数据隔离至关重要。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=权限permissions>权限（Permissions）<a href=#权限permissions class=hash-link aria-label=权限（Permissions）的直接链接 title=权限（Permissions）的直接链接>​</a></h3>
<p>权限决定了用户对文件或目录可以执行的操作，分为所有者权限、组权限和其他用户（Others）权限</p>
<p><strong>所有者权限</strong>：定义文件或目录的所有者可以执行的操作。</p>
<p><strong>组权限</strong>：定义同一用户组内的用户可以执行的操作。</p>
<p><strong>其他用户权限</strong>：定义不属于文件所属组的其他用户可以执行的操作。</p>
<p>权限设置通常通过 <code>chmod</code> 命令进行控制，包括读取（r）、写入（w）和执行（x）权限。这些权限对于保护敏感数据、维护系统安全和控制程序执行至关重要。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=为什么需要区分所有权和权限>为什么需要区分所有权和权限？<a href=#为什么需要区分所有权和权��限 class=hash-link aria-label=为什么需要区分所有权和权限？的直接链接 title=为什么需要区分所有权和权限？的直接链接>​</a></h3>
<p><strong>从设计角度来看，区分所有权和权限是为了实现灵活且精细的访问控制</strong></p>
<p><strong>责任分离</strong>：所有权确定了谁对文件或目录负责，而权限则定义了不同用户可以对其执行的操作。这种分离使系统能够明确归属，同时独立地管理访问控制。</p>
<p><strong>精细的访问控制</strong>：通过区分所有权和权限，系统可以为所有者、所属组和其他用户分别设置不同的权限。这种设计允许文件所有者限制自己的权限，或者授予其他用户特定的访问权，实现更精细的控制。</p>
<p><strong>灵活性</strong>：这种区分使得权限设置更加灵活，适应各种使用场景。例如，某个文件可以由用户 A 拥有，但权限设置允许用户 B 读取或修改，而无需更改所有权。</p>
<p><strong>安全性增强</strong>：系统管理员可以独立于所有权来调整权限，以强化安全策略。例如，即使用户是某个文件的所有者，管理员也可以限制其权限，防止潜在的误用或恶意操作。</p>
<p><strong>资源管理</strong>：在多用户环境中，区分所有权和权限有助于更有效地管理系统资源。用户可以共享文件而不失去对其的控制权，促进协作的同时保障数据安全。</p>
<p><strong>历史设计选择</strong>：Unix 系统最初设计时，就采用了这种所有权和权限分离的模型。它提供了一个简单 yet 强大的机制，避免了复杂的访问控制列表（ACL），满足了当时对效率和性能的需求。</div><footer class="row docusaurus-mt-lg"><div class=col><b>标签：</b><ul class="tags_jXut padding--none margin-left--sm"><li class=tag_QGVx><a title=开发工具和环境配置相关文章 class="tag_zVej tagRegular_sFm0" href=/docs-hub/blog/tags/dev-tools>开发工具与环境</a></ul></div></footer></article><article class=margin-bottom--xl><header><h2 class=title_f1Hy><a href=/docs-hub/blog/docker-danglingunused--images>Docker DanglingUnused  Images</a></h2><div class="container_mt6G margin-vert--md"><time datetime=2024-09-12T00:00:00.000Z>2024年9月12日</time> · <!-- -->阅读需 2 分钟</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--12 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a class=avatar__photo-link href=/docs-hub/blog/authors/sumingcheng><img class="avatar__photo authorImage_XqGP" src=https://github.com/user-attachments/assets/9a06bd55-094a-4efc-91c3-d1b92236822f alt=素明诚></a><div class="avatar__intro authorDetails_lV9A"><div class=avatar__name><a href=/docs-hub/blog/authors/sumingcheng><span class=authorName_yefp>素明诚</span></a></div><small class=authorTitle_nd0D title="Full stack development">Full stack development</small><div class=authorSocials_rSDt><a href=https://x.com/sumingcheng target=_blank rel="noopener noreferrer" class=authorSocialLink_owbf title=X><svg width=1em height=1em fill=none viewBox="0 0 1200 1227" class="authorSocialLink_owbf xSvg_y3PF" style=--dark:#000;--light:#fff><path d="M714.163 519.284 1160.89 0h-105.86L667.137 450.887 357.328 0H0l468.492 681.821L0 1226.37h105.866l409.625-476.152 327.181 476.152H1200L714.137 519.284h.026ZM569.165 687.828l-47.468-67.894-377.686-540.24h162.604l304.797 435.991 47.468 67.894 396.2 566.721H892.476L569.165 687.854v-.026Z"/></svg></a><a href=https://github.com/sumingcheng target=_blank rel="noopener noreferrer" class=authorSocialLink_owbf title=GitHub><svg viewBox="0 0 256 250" width=1em height=1em class="authorSocialLink_owbf githubSvg_Uu4N" style=--dark:#000;--light:#fff preserveAspectRatio=xMidYMid><path d="M128.001 0C57.317 0 0 57.307 0 128.001c0 56.554 36.676 104.535 87.535 121.46 6.397 1.185 8.746-2.777 8.746-6.158 0-3.052-.12-13.135-.174-23.83-35.61 7.742-43.124-15.103-43.124-15.103-5.823-14.795-14.213-18.73-14.213-18.73-11.613-7.944.876-7.78.876-7.78 12.853.902 19.621 13.19 19.621 13.19 11.417 19.568 29.945 13.911 37.249 10.64 1.149-8.272 4.466-13.92 8.127-17.116-28.431-3.236-58.318-14.212-58.318-63.258 0-13.975 5-25.394 13.188-34.358-1.329-3.224-5.71-16.242 1.24-33.874 0 0 10.749-3.44 35.21 13.121 10.21-2.836 21.16-4.258 32.038-4.307 10.878.049 21.837 1.47 32.066 4.307 24.431-16.56 35.165-13.12 35.165-13.12 6.967 17.63 2.584 30.65 1.255 33.873 8.207 8.964 13.173 20.383 13.173 34.358 0 49.163-29.944 59.988-58.447 63.157 4.591 3.972 8.682 11.762 8.682 23.704 0 17.126-.148 30.91-.148 35.126 0 3.407 2.304 7.398 8.792 6.14C219.37 232.5 256 184.537 256 128.002 256 57.307 198.691 0 128.001 0Zm-80.06 182.34c-.282.636-1.283.827-2.194.39-.929-.417-1.45-1.284-1.15-1.922.276-.655 1.279-.838 2.205-.399.93.418 1.46 1.293 1.139 1.931Zm6.296 5.618c-.61.566-1.804.303-2.614-.591-.837-.892-.994-2.086-.375-2.66.63-.566 1.787-.301 2.626.591.838.903 1 2.088.363 2.66Zm4.32 7.188c-.785.545-2.067.034-2.86-1.104-.784-1.138-.784-2.503.017-3.05.795-.547 2.058-.055 2.861 1.075.782 1.157.782 2.522-.019 3.08Zm7.304 8.325c-.701.774-2.196.566-3.29-.49-1.119-1.032-1.43-2.496-.726-3.27.71-.776 2.213-.558 3.315.49 1.11 1.03 1.45 2.505.701 3.27Zm9.442 2.81c-.31 1.003-1.75 1.459-3.199 1.033-1.448-.439-2.395-1.613-2.103-2.626.301-1.01 1.747-1.484 3.207-1.028 1.446.436 2.396 1.602 2.095 2.622Zm10.744 1.193c.036 1.055-1.193 1.93-2.715 1.95-1.53.034-2.769-.82-2.786-1.86 0-1.065 1.202-1.932 2.733-1.958 1.522-.03 2.768.818 2.768 1.868Zm10.555-.405c.182 1.03-.875 2.088-2.387 2.37-1.485.271-2.861-.365-3.05-1.386-.184-1.056.893-2.114 2.376-2.387 1.514-.263 2.868.356 3.061 1.403Z"/></svg></a></div></div></div></div></div></header><div class=markdown><h2 class="anchor anchorWithStickyNavbar_LWe7" id=dangling-images悬空镜像>Dangling Images（悬空镜像）<a href=#dangling-images悬空镜像 class=hash-link aria-label="Dangling Images（悬空镜像）的直接链接" title="Dangling Images（悬空镜像）的直接链接">​</a></h2>
<p>定义这些镜像在本地存在，但是在 Docker 仓库中已经不存在对应的标签了。通常是因为镜像的标签被更新或删除导致的。</p>
<p>特点它们没有标签，只有镜像 ID。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=产生原因>产生原因<a href=#产生原因 class=hash-link aria-label=产生原因的直接链接 title=产生原因的直接链接>​</a></h3>
<ul>
<li>构建一个新版本的镜像，自动取消旧版本镜像的标签。</li>
<li>手动删除一个镜像的标签。</li>
<li>使用<code>docker pull</code>拉取一个已有标签的新版本镜像，旧版本镜像标签被取消。</li>
</ul>
<p>识别方法使用命令<code>docker images -f dangling=true</code>列出所有悬空镜像。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=unused-images未使用镜像>Unused Images（未使用镜像）<a href=#unused-images未使用镜像 class=hash-link aria-label="Unused Images（未使用镜像）的直接链接" title="Unused Images（未使用镜像）的直接链接">​</a></h2>
<p>定义这些镜像不是任何容器的基础镜像，也不是任何镜像的父镜像。</p>
<p>特点它们可能有标签，但是已经不被需要了。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=产生原因-1>产生原因<a href=#产生原因-1 class=hash-link aria-label=产生原因的直接链接 title=产生原因的直接链接>​</a></h3>
<ul>
<li>某个容器或者镜像被删除，依赖于它的镜像层也随之变为未使用。</li>
<li>手动删除一个容器或镜像。</li>
</ul>
<p>识别方法使用命令<code>docker images -f dangling=false</code>并手动识别那些未被使用的镜像。Docker 目前没有提供自动识别 Unused Images 的命令。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=清理-dangling-images>清理 Dangling Images<a href=#清理-dangling-images class=hash-link aria-label="清理 Dangling Images的直接链接" title="清理 Dangling Images的直接链接">​</a></h2>
<p>使用命令<code>docker rmi $(docker images -f dangling=true -q)</code>删除所有悬空镜像。</p>
<p>使用 Docker 1.13 版本提供的<code>docker system prune</code>命令自动清理悬空镜像。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=清理-unused-images>清理 Unused Images<a href=#清理-unused-images class=hash-link aria-label="清理 Unused Images的直接链接" title="清理 Unused Images的直接链接">​</a></h3>
<p>手动识别并删除那些已知不再需要的镜像，使用<code>docker rmi &lt;image_id></code>命令。</p>
<p>谨慎使用<code>docker system prune -a</code>命令自动删除所有未使用镜像，此操作不可恢复。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=清理时的注意事项>清理时的注意事项<a href=#清理时的注意事项 class=hash-link aria-label=清理时的注意事项的直接链接 title=清理时的注意事项的直接链接>​</a></h3>
<p>清理前确保不需要这些镜像，清理操作不可恢复。</p>
<p>如果一个悬空镜像同时也是一个未使用镜像，使用<code>docker image prune</code>或者<code>docker system prune</code>命令就足够了。</p>
<p>定期清理不需要的镜像，以节省磁盘空间。但不要过于频繁。</div><footer class="row docusaurus-mt-lg"><div class=col><b>标签：</b><ul class="tags_jXut padding--none margin-left--sm"><li class=tag_QGVx><a title=开发工具和环境配置相关文章 class="tag_zVej tagRegular_sFm0" href=/docs-hub/blog/tags/dev-tools>开发工具与环境</a></ul></div></footer></article><article class=margin-bottom--xl><header><h2 class=title_f1Hy><a href=/docs-hub/blog/kubernetesk8s集群-docker-作为容器运行时>KubernetesK8s集群 Docker 作为容器运行时</a></h2><div class="container_mt6G margin-vert--md"><time datetime=2024-09-12T00:00:00.000Z>2024年9月12日</time> · <!-- -->阅读需 5 分钟</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--12 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a class=avatar__photo-link href=/docs-hub/blog/authors/sumingcheng><img class="avatar__photo authorImage_XqGP" src=https://github.com/user-attachments/assets/9a06bd55-094a-4efc-91c3-d1b92236822f alt=素明诚></a><div class="avatar__intro authorDetails_lV9A"><div class=avatar__name><a href=/docs-hub/blog/authors/sumingcheng><span class=authorName_yefp>素明诚</span></a></div><small class=authorTitle_nd0D title="Full stack development">Full stack development</small><div class=authorSocials_rSDt><a href=https://x.com/sumingcheng target=_blank rel="noopener noreferrer" class=authorSocialLink_owbf title=X><svg width=1em height=1em fill=none viewBox="0 0 1200 1227" class="authorSocialLink_owbf xSvg_y3PF" style=--dark:#000;--light:#fff><path d="M714.163 519.284 1160.89 0h-105.86L667.137 450.887 357.328 0H0l468.492 681.821L0 1226.37h105.866l409.625-476.152 327.181 476.152H1200L714.137 519.284h.026ZM569.165 687.828l-47.468-67.894-377.686-540.24h162.604l304.797 435.991 47.468 67.894 396.2 566.721H892.476L569.165 687.854v-.026Z"/></svg></a><a href=https://github.com/sumingcheng target=_blank rel="noopener noreferrer" class=authorSocialLink_owbf title=GitHub><svg viewBox="0 0 256 250" width=1em height=1em class="authorSocialLink_owbf githubSvg_Uu4N" style=--dark:#000;--light:#fff preserveAspectRatio=xMidYMid><path d="M128.001 0C57.317 0 0 57.307 0 128.001c0 56.554 36.676 104.535 87.535 121.46 6.397 1.185 8.746-2.777 8.746-6.158 0-3.052-.12-13.135-.174-23.83-35.61 7.742-43.124-15.103-43.124-15.103-5.823-14.795-14.213-18.73-14.213-18.73-11.613-7.944.876-7.78.876-7.78 12.853.902 19.621 13.19 19.621 13.19 11.417 19.568 29.945 13.911 37.249 10.64 1.149-8.272 4.466-13.92 8.127-17.116-28.431-3.236-58.318-14.212-58.318-63.258 0-13.975 5-25.394 13.188-34.358-1.329-3.224-5.71-16.242 1.24-33.874 0 0 10.749-3.44 35.21 13.121 10.21-2.836 21.16-4.258 32.038-4.307 10.878.049 21.837 1.47 32.066 4.307 24.431-16.56 35.165-13.12 35.165-13.12 6.967 17.63 2.584 30.65 1.255 33.873 8.207 8.964 13.173 20.383 13.173 34.358 0 49.163-29.944 59.988-58.447 63.157 4.591 3.972 8.682 11.762 8.682 23.704 0 17.126-.148 30.91-.148 35.126 0 3.407 2.304 7.398 8.792 6.14C219.37 232.5 256 184.537 256 128.002 256 57.307 198.691 0 128.001 0Zm-80.06 182.34c-.282.636-1.283.827-2.194.39-.929-.417-1.45-1.284-1.15-1.922.276-.655 1.279-.838 2.205-.399.93.418 1.46 1.293 1.139 1.931Zm6.296 5.618c-.61.566-1.804.303-2.614-.591-.837-.892-.994-2.086-.375-2.66.63-.566 1.787-.301 2.626.591.838.903 1 2.088.363 2.66Zm4.32 7.188c-.785.545-2.067.034-2.86-1.104-.784-1.138-.784-2.503.017-3.05.795-.547 2.058-.055 2.861 1.075.782 1.157.782 2.522-.019 3.08Zm7.304 8.325c-.701.774-2.196.566-3.29-.49-1.119-1.032-1.43-2.496-.726-3.27.71-.776 2.213-.558 3.315.49 1.11 1.03 1.45 2.505.701 3.27Zm9.442 2.81c-.31 1.003-1.75 1.459-3.199 1.033-1.448-.439-2.395-1.613-2.103-2.626.301-1.01 1.747-1.484 3.207-1.028 1.446.436 2.396 1.602 2.095 2.622Zm10.744 1.193c.036 1.055-1.193 1.93-2.715 1.95-1.53.034-2.769-.82-2.786-1.86 0-1.065 1.202-1.932 2.733-1.958 1.522-.03 2.768.818 2.768 1.868Zm10.555-.405c.182 1.03-.875 2.088-2.387 2.37-1.485.271-2.861-.365-3.05-1.386-.184-1.056.893-2.114 2.376-2.387 1.514-.263 2.868.356 3.061 1.403Z"/></svg></a></div></div></div></div></div></header><div class=markdown><h2 class="anchor anchorWithStickyNavbar_LWe7" id=准备代理>准备代理<a href=#准备代理 class=hash-link aria-label=准备代理的直接链接 title=准备代理的直接链接>​</a></h2>
<div class="codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-text codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">export HTTPS_PROXY="http://172.22.220.64:7890"</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=复制代码到剪贴板 title=复制 class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=版本问题>版本问题<a href=#版本问题 class=hash-link aria-label=版本问题的直接链接 title=版本问题的直接链接>​</a></h2>
<p>三台 Ubuntu 22.04.4 LTS x86_64 机器上搭建 Kubernetes 集群。使用的 Docker 版本至少是 19.03，因为这个版本支持 Kubernetes 所需的特性和配置。确保 Docker 的 cgroup 驱动设置为<code>systemd</code>，以与 kubelet 保持一致，避免资源管理上的潜在冲突。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=环境准备>环境准备<a href=#环境准备 class=hash-link aria-label=环境准备的直接链接 title=环��境准备的直接链接>​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=设置主机名>设置主机名<a href=#设置主机名 class=hash-link aria-label=设置主机名的直接链接 title=设置主机名的直接链接>​</a></h3>
<p>每台机器上设置适当的主机名并更新 <code>/etc/hosts</code> 文件以便节点间能够相互解析。</p>
<p>在每台机器上执行以下命令</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-text codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain"># 在 k8s-master 上</span><br></span><span class=token-line style=color:#393A34><span class="token plain">sudo hostnamectl set-hostname k8s-master</span><br></span><span class=token-line style=color:#393A34><span class="token plain">echo "172.22.220.64 k8s-master" | sudo tee -a /etc/hosts</span><br></span><span class=token-line style=color:#393A34><span class="token plain">​</span><br></span><span class=token-line style=color:#393A34><span class="token plain"># 在 k8s-worker1 上</span><br></span><span class=token-line style=color:#393A34><span class="token plain">sudo hostnamectl set-hostname k8s-worker1</span><br></span><span class=token-line style=color:#393A34><span class="token plain">echo "192.168.33.110 k8s-worker1" | sudo tee -a /etc/hosts</span><br></span><span class=token-line style=color:#393A34><span class="token plain">​</span><br></span><span class=token-line style=color:#393A34><span class="token plain"># 在 k8s-worker2 上</span><br></span><span class=token-line style=color:#393A34><span class="token plain">sudo hostnamectl set-hostname k8s-worker2</span><br></span><span class=token-line style=color:#393A34><span class="token plain">echo "192.168.33.111 k8s-worker2" | sudo tee -a /etc/hosts</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=复制代码到剪贴板 title=复制 class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=禁用-swap>禁用 Swap<a href=#禁用-swap class=hash-link aria-label="禁用 Swap的直接链接" title="禁用 Swap的直接链接">​</a></h3>
<p>Kubernetes 要求禁用 swap。在每台机器上执行</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-text codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">sudo swapoff -a</span><br></span><span class=token-line style=color:#393A34><span class="token plain"># 永久禁用，注释掉 /etc/fstab 中相关的 swap 行</span><br></span><span class=token-line style=color:#393A34><span class="token plain">sudo sed -i '/ swap / s/^/#/' /etc/fstab</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=复制代码到剪贴板 title=复制 class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=加载必要的内核模块>加载必要的内核模块<a href=#加载必要的内核模块 class=hash-link aria-label=加载必要的内核模块的直接链接 title=加载必要的内核模块的直接链接>​</a></h3>
<p>在每台机器上执行</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-text codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">sudo modprobe overlay</span><br></span><span class=token-line style=color:#393A34><span class="token plain">sudo modprobe br_netfilter</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=复制代码到剪贴板 title=复制 class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=设置系统参数>设置系统参数<a href=#设置系统参数 class=hash-link aria-label=设置系统参数的直接链接 title=设置系统参数的直接链接>​</a></h3>
<p>在每台机器上添加 Kubernetes 推荐的 sysctl 参数</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-text codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">cat &lt;&lt;EOF | sudo tee /etc/sysctl.d/k8s.conf</span><br></span><span class=token-line style=color:#393A34><span class="token plain">net.bridge.bridge-nf-call-ip6tables = 1</span><br></span><span class=token-line style=color:#393A34><span class="token plain">net.bridge.bridge-nf-call-iptables = 1</span><br></span><span class=token-line style=color:#393A34><span class="token plain">net.ipv4.ip_forward = 1</span><br></span><span class=token-line style=color:#393A34><span class="token plain">EOF</span><br></span><span class=token-line style=color:#393A34><span class="token plain">sudo sysctl --system</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=复制代码到剪贴板 title=复制 class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=安装-dockerkubeadmkubelet-和-kubectl>安装 Docker、kubeadm、kubelet 和 kubectl<a href=#安装-dockerkubeadmkubelet-和-kubectl class=hash-link aria-label="安装 Docker、kubeadm、kubelet 和 kubectl的直接链接" title="安装 Docker、kubeadm、kubelet 和 kubectl的直接链接">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=安装-docker>安装 Docker<a href=#安装-docker class=hash-link aria-label="安装 Docker的直接链接" title="安装 Docker的直接链接">​</a></h3>
<p>如果已经安装了 Docker，确认一下 Docker 是否正在运行</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-text codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">sudo systemctl status docker</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=复制代码到剪贴板 title=复制 class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>没有安装，先安装一下</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-text codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">apt install docker.io</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=复制代码到剪贴板 title=复制 class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=添加-kubernetes-仓库>添加 Kubernetes 仓库<a href=#添加-kubernetes-仓库 class=hash-link aria-label="添加 Kubernetes 仓库的直接链接" title="添加 Kubernetes 仓库的直接链接">​</a></h3>
<p>在每台机器上执行</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-text codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">sudo apt-get update</span><br></span><span class=token-line style=color:#393A34><span class="token plain">sudo apt-get install -y apt-transport-https ca-certificates curl</span><br></span><span class=token-line style=color:#393A34><span class="token plain">curl -s https://packages.cloud.google.com/apt/doc/apt-key.gpg | sudo apt-key add -</span><br></span><span class=token-line style=color:#393A34><span class="token plain">echo "deb https://apt.kubernetes.io/ kubernetes-xenial main" | sudo tee /etc/apt/sources.list.d/kubernetes.list</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=复制代码到剪贴板 title=复制 class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=安装-kubeadm-kubelet-和-kubectl>安装 kubeadm, kubelet 和 kubectl<a href=#安装-kubeadm-kubelet-和-kubectl class=hash-link aria-label="安装 kubeadm, kubelet 和 kubectl的直接链接" title="安装 kubeadm, kubelet 和 kubectl的直接链接">​</a></h3>
<p><strong>kubelet</strong>运行在所有集群节点上的代理，负责启动和管理容器应用。</p>
<p><strong>kubeadm</strong>工具，用于快速设置和管理 Kubernetes 集群的基础架构。</p>
<p><strong>kubectl</strong>命令行工具，用于与 Kubernetes 集群交互和管理资源。</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-text codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">sudo apt-get update</span><br></span><span class=token-line style=color:#393A34><span class="token plain">sudo apt-get install -y kubelet-1.23.6 kubeadm-1.23.6 kubectl-1.23.6</span><br></span><span class=token-line style=color:#393A34><span class="token plain">sudo apt-mark hold kubelet-1.23.6 kubeadm-1.23.6 kubectl-1.23.6</span><br></span><span class=token-line style=color:#393A34><span class="token plain">​</span><br></span><span class=token-line style=color:#393A34><span class="token plain"># 如果你已经安装，可以先删除再安装指定版本</span><br></span><span class=token-line style=color:#393A34><span class="token plain">sudo apt-get remove -y kubelet kubeadm kubectl</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=复制代码到剪贴板 title=复制 class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>hold 是设置保留状态，不会自动更新</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=配置-docker>配置 docker<a href=#配置-docker class=hash-link aria-label="配置 docker的直接链接" title="配置 docker的直接链接">​</a></h2>
<div class="codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-text codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">nano /etc/docker/daemon.json</span><br></span><span class=token-line style=color:#393A34><span class="token plain">{</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  "experimental": true,</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  "features": {</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    "buildkit": true</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  },</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  "exec-opts": ["native.cgroupdriver=systemd"],</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  "log-driver": "json-file",</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  "log-opts": {</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    "max-size": "100m"</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  },</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  "storage-driver": "overlay2"</span><br></span><span class=token-line style=color:#393A34><span class="token plain">}</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=复制代码到剪贴板 title=复制 class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=重启>重启<a href=#重启 class=hash-link aria-label=重启的直接链接 title=重启的直接链接>​</a></h3>
<div class="codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-text codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">sudo systemctl restart docker</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=复制代码到剪贴板 title=复制 class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=配置-kubelet>配置 kubelet<a href=#配置-kubelet class=hash-link aria-label="配置 kubelet的直接链接" title="配置 kubelet的直接链接">​</a></h2>
<div class="codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-text codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">nano /etc/systemd/system/kubelet.service.d/10-kubeadm.conf</span><br></span><span class=token-line style=color:#393A34><span class="token plain"># Note This dropin only works with kubeadm and kubelet v1.11+</span><br></span><span class=token-line style=color:#393A34><span class="token plain">[Service]</span><br></span><span class=token-line style=color:#393A34><span class="token plain">Environment="KUBELET_KUBECONFIG_ARGS=--bootstrap-kubeconfig=/etc/kubernetes/bootstrap-kubelet.conf --kubeconfig=/etc/kubernetes/kubelet.conf"</span><br></span><span class=token-line style=color:#393A34><span class="token plain">Environment="KUBELET_CONFIG_ARGS=--config=/var/lib/kubelet/config.yaml"</span><br></span><span class=token-line style=color:#393A34><span class="token plain"># This is a file that "kubeadm init" and "kubeadm join" generates at runtime, populating the KUBELET_KUBEADM_ARGS variable dynamically</span><br></span><span class=token-line style=color:#393A34><span class="token plain">EnvironmentFile=-/var/lib/kubelet/kubeadm-flags.env</span><br></span><span class=token-line style=color:#393A34><span class="token plain"># This is a file that the user can use for overrides of the kubelet args as a last resort. Preferably, the user should use</span><br></span><span class=token-line style=color:#393A34><span class="token plain"># the .NodeRegistration.KubeletExtraArgs object in the configuration files instead. KUBELET_EXTRA_ARGS should be sourced from this file.</span><br></span><span class=token-line style=color:#393A34><span class="token plain">EnvironmentFile=-/etc/default/kubelet</span><br></span><span class=token-line style=color:#393A34><span class="token plain">ExecStart=</span><br></span><span class=token-line style=color:#393A34><span class="token plain">ExecStart=/usr/bin/kubelet $KUBELET_KUBECONFIG_ARGS $KUBELET_CONFIG_ARGS $KUBELET_KUBEADM_ARGS $KUBELET_EXTRA_ARGS</span><br></span><span class=token-line style=color:#393A34><span class="token plain">Environment="KUBELET_CGROUP_ARGS=--cgroup-driver=systemd"</span><br></span><span class=token-line style=color:#393A34><span class="token plain">nano /var/lib/kubelet/config.yaml</span><br></span><span class=token-line style=color:#393A34><span class="token plain">sudo chown rootroot /var/lib/kubelet/config.yaml</span><br></span><span class=token-line style=color:#393A34><span class="token plain">sudo chmod 644 /var/lib/kubelet/config.yaml</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=复制代码到剪贴板 title=复制 class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=重启-1>重启<a href=#重启-1 class=hash-link aria-label=重启的直接链接 title=重启的直接链接>​</a></h3>
<div class="codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-text codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">sudo systemctl daemon-reload</span><br></span><span class=token-line style=color:#393A34><span class="token plain">sudo systemctl restart kubelet</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=复制代码到剪贴板 title=复制 class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=初始化-kubernetes-主节点>初始化 Kubernetes 主节点<a href=#初始化-kubernetes-主节点 class=hash-link aria-label="初始化 Kubernetes 主节点的直接链接" title="初始化 Kubernetes 主节点的直接链接">​</a></h2>
<p><strong>查看要下载的内容</strong></p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-text codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">kubeadm config images list</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=复制代码到剪贴板 title=复制 class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p><strong>使用阿里云 Kubernetes 镜像的镜像加速服务</strong></p>
<p>**<code>10.244.0.0/16</code>**这个是 Flannel 默认的 Pod 网络地址范围。如果你使用 Flannel 作为网络插件，通常使用这个 CIDR。</p>
<p>**<code>192.168.0.0/16</code>**这是 Calico 的默认地址范围。如果你使用 Calico，通常会指定这个范围，不过你也可以自定义。</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-text codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">kubeadm init --pod-network-cidr=192.168.0.0/16 --image-repository registry.cn-hangzhou.aliyuncs.com/google_containers --kubernetes-version=v1.23.0</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=复制代码到剪贴板 title=复制 class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>不使用阿里云，直接在 k8s-master 上执行，初始化，这里的 <code>-E</code> 选项告诉 <code>sudo</code> 保留用户的环境变量，这样 <code>kubeadm</code> 就可以使用前面设置的代理环境变量。</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-text codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">sudo -E kubeadm init --pod-network-cidr=10.244.0.0/16</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=复制代码到剪贴板 title=复制 class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>记录下输出中的 <code>kubeadm join</code> 命令，这是后面工作节点需要使用的命令。</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-text codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">Your Kubernetes control-plane has initialized successfully!</span><br></span><span class=token-line style=color:#393A34><span class="token plain">​</span><br></span><span class=token-line style=color:#393A34><span class="token plain">To start using your cluster, you need to run the following as a regular user</span><br></span><span class=token-line style=color:#393A34><span class="token plain">​</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  mkdir -p $HOME/.kube</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  sudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  sudo chown $(id -u)$(id -g) $HOME/.kube/config</span><br></span><span class=token-line style=color:#393A34><span class="token plain">​</span><br></span><span class=token-line style=color:#393A34><span class="token plain">Alternatively, if you are the root user, you can run</span><br></span><span class=token-line style=color:#393A34><span class="token plain">​</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  export KUBECONFIG=/etc/kubernetes/admin.conf</span><br></span><span class=token-line style=color:#393A34><span class="token plain">​</span><br></span><span class=token-line style=color:#393A34><span class="token plain">You should now deploy a pod network to the cluster.</span><br></span><span class=token-line style=color:#393A34><span class="token plain">Run "kubectl apply -f [podnetwork].yaml" with one of the options listed at</span><br></span><span class=token-line style=color:#393A34><span class="token plain">  https//kubernetes.io/docs/concepts/cluster-administration/addons/</span><br></span><span class=token-line style=color:#393A34><span class="token plain">​</span><br></span><span class=token-line style=color:#393A34><span class="token plain">Then you can join any number of worker nodes by running the following on each as root</span><br></span><span class=token-line style=color:#393A34><span class="token plain">​</span><br></span><span class=token-line style=color:#393A34><span class="token plain">kubeadm init phase certs apiserver --apiserver-cert-extra-sans=172.22.220.64,kubernetes.default,kubernetes.default.svc,kubernetes.default.svc.cluster,kubernetes.default.svc.cluster.local</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=复制代码到剪贴板 title=复制 class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=配置-kubectl>配置 kubectl<a href=#配置-kubectl class=hash-link aria-label="配置 kubectl的直接链接" title="配置 kubectl的直接链接">​</a></h2>
<p>在 k8s-master 上，配置用户的 kubeconfig 文件以使用 kubectl</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-text codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">mkdir -p $HOME/.kube</span><br></span><span class=token-line style=color:#393A34><span class="token plain">sudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config</span><br></span><span class=token-line style=color:#393A34><span class="token plain">sudo chown $(id -u)$(id -g) $HOME/.kube/config</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=复制代码到剪贴板 title=复制 class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=如果证书有问题重新生成证书>如果证书有问题，重新生成证书<a href=#如果证书有问题重新生成证书 class=hash-link aria-label=如果证书有问题，重新生成证书的直接链接 title=如果证书有问题，重新生成证书的直接链接>​</a></h2>
<p>手动删除现有的 apiserver 证书文件</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-text codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">rm /etc/kubernetes/pki/apiserver.*</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=复制代码到剪贴板 title=复制 class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>再次运行证书生成命令</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-text codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">kubeadm init phase certs apiserver --apiserver-cert-extra-sans=172.22.220.64,kubernetes.default,kubernetes.default.svc,kubernetes.default.svc.cluster,kubernetes.default.svc.cluster.local</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=复制代码到剪贴板 title=复制 class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>再次重启 apiserver 容器</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-text codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">docker ps | grep kube-apiserver | grep -v pause</span><br></span><span class=token-line style=color:#393A34><span class="token plain">docker kill &lt;container-id></span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=复制代码到剪贴板 title=复制 class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>再次检查新生成的证书</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-text codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">openssl x509 -in /etc/kubernetes/pki/apiserver.crt -text -noout</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=复制代码到剪贴板 title=复制 class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>如果新证书的内容(尤其是序列号)与旧证书不同,就说明证书已经更新成功。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=安装-pod-网络插件>安装 Pod 网络插件<a href=#安装-pod-网络插件 class=hash-link aria-label="安装 Pod 网络插件的直接链接" title="安装 Pod 网络插件的直接链接">​</a></h2>
<p>可以选择一个网络插件，例如 Calico，并在 k8s-master 上执行</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-text codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">kubectl apply -f https//docs.projectcalico.org/manifests/calico.yaml</span><br></span><span class=token-line style=color:#393A34><span class="token plain">kubectl get nodes</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=复制代码到剪贴板 title=复制 class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=加入工作节点>加入工作节点<a href=#加入工作节点 class=hash-link aria-label=加入工作节点的直接链接 title=加入工作节点的直接链接>​</a></h2>
<p>在 k8s-worker1 和 k8s-worker2 上，使用之前记录的 <code>kubeadm join</code> 命令来加入集群</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-text codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">kubeadm join 172.22.220.646443 --token 6bqr0n.5dlu623stgokbvdd \</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        --discovery-token-ca-cert-hash sha256851c48c250ee78aa569a77c935f14ee6edcebc6b004655e52ac775bcc89cf013</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=复制代码到剪贴板 title=复制 class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=验证集群状态>验证集群状态<a href=#验证集群状态 class=hash-link aria-label=验证集群状态的直接链接 title=验证集群状态的直接链接>​</a></h2>
<p>在 k8s-master 上，检查节点和 Pod 的状态</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-text codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">kubectl get nodes</span><br></span><span class=token-line style=color:#393A34><span class="token plain">kubectl get pods --all-namespaces</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=复制代码到剪贴板 title=复制 class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=监控节点变化>监控节点变化<a href=#监控节点变化 class=hash-link aria-label=监控节点变化的直接链接 title=监控节点变化的直接链接>​</a></h2>
<div class="codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-text codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">kubectl get nodes -w</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=复制代码到剪贴板 title=复制 class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=安装并配置-helm>安装并配置 Helm<a href=#安装并配置-helm class=hash-link aria-label="安装并配置 Helm的直接链接" title="安装并配置 Helm的直接链接">​</a></h2>
<p>在你的本地机器或管理机上安装 Helm。这通常涉及到下载 Helm 的二进制文件并将其配置到适当的路径。你还需要初始化 Helm 的服务端组件 Tiller（注意从 Helm v3 开始，已经移除了 Tiller）。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=对于-helm-3直接初始化即可>对于 Helm 3，直接初始化即可<a href=#对于-helm-3直接初始化即可 class=hash-link aria-label="对于 Helm 3，直接初始化即可的直接��链接" title="对于 Helm 3，直接初始化即可的直接链接">​</a></h3>
<div class="codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-text codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">helm repo add stable https//charts.helm.sh/stable</span><br></span><span class=token-line style=color:#393A34><span class="token plain">helm repo update</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=复制代码到剪贴板 title=复制 class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>验证 Helm 是否正确安装并配置，可以尝试安装一个简单的 Helm chart 来测试</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-text codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">helm install stable/mysql --generate-name</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=复制代码到剪贴板 title=复制 class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>如果这个命令成功执行，并且能够看到 Pod 正在运行状态，则说明 Helm 已准备好用于部署应用。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=卸载-k8s-所有组件>卸载 K8S 所有组件<a href=#卸载-k8s-所有组件 class=hash-link aria-label="卸载 K8S 所有组件的直接链接" title="卸载 K8S 所有组件的直接链接">​</a></h2>
<div class="codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-text codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">kubeadm reset -f</span><br></span><span class=token-line style=color:#393A34><span class="token plain">systemctl stop kubelet</span><br></span><span class=token-line style=color:#393A34><span class="token plain">systemctl stop docker</span><br></span><span class=token-line style=color:#393A34><span class="token plain">rm -rf /var/lib/cni/</span><br></span><span class=token-line style=color:#393A34><span class="token plain">rm -rf /var/lib/kubelet/*</span><br></span><span class=token-line style=color:#393A34><span class="token plain">rm -rf /etc/cni/</span><br></span><span class=token-line style=color:#393A34><span class="token plain">rm -rf /etc/kubernetes/</span><br></span><span class=token-line style=color:#393A34><span class="token plain">rm -rf /var/lib/docker/</span><br></span><span class=token-line style=color:#393A34><span class="token plain">apt-get remove docker docker-engine docker.io containerd runc</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=复制代码到剪贴板 title=复制 class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div></div><footer class="row docusaurus-mt-lg"><div class=col><b>标签：</b><ul class="tags_jXut padding--none margin-left--sm"><li class=tag_QGVx><a title=开发工具和环境配置相关文章 class="tag_zVej tagRegular_sFm0" href=/docs-hub/blog/tags/dev-tools>开发工具与环境</a></ul></div></footer></article><article class=margin-bottom--xl><header><h2 class=title_f1Hy><a href=/docs-hub/blog/linux-配置系统代理临时代理>Linux 配置系统代理临时代理</a></h2><div class="container_mt6G margin-vert--md"><time datetime=2024-09-11T00:00:00.000Z>2024年9月11日</time> · <!-- -->阅读需 2 分钟</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--12 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a class=avatar__photo-link href=/docs-hub/blog/authors/sumingcheng><img class="avatar__photo authorImage_XqGP" src=https://github.com/user-attachments/assets/9a06bd55-094a-4efc-91c3-d1b92236822f alt=素明诚></a><div class="avatar__intro authorDetails_lV9A"><div class=avatar__name><a href=/docs-hub/blog/authors/sumingcheng><span class=authorName_yefp>素明诚</span></a></div><small class=authorTitle_nd0D title="Full stack development">Full stack development</small><div class=authorSocials_rSDt><a href=https://x.com/sumingcheng target=_blank rel="noopener noreferrer" class=authorSocialLink_owbf title=X><svg width=1em height=1em fill=none viewBox="0 0 1200 1227" class="authorSocialLink_owbf xSvg_y3PF" style=--dark:#000;--light:#fff><path d="M714.163 519.284 1160.89 0h-105.86L667.137 450.887 357.328 0H0l468.492 681.821L0 1226.37h105.866l409.625-476.152 327.181 476.152H1200L714.137 519.284h.026ZM569.165 687.828l-47.468-67.894-377.686-540.24h162.604l304.797 435.991 47.468 67.894 396.2 566.721H892.476L569.165 687.854v-.026Z"/></svg></a><a href=https://github.com/sumingcheng target=_blank rel="noopener noreferrer" class=authorSocialLink_owbf title=GitHub><svg viewBox="0 0 256 250" width=1em height=1em class="authorSocialLink_owbf githubSvg_Uu4N" style=--dark:#000;--light:#fff preserveAspectRatio=xMidYMid><path d="M128.001 0C57.317 0 0 57.307 0 128.001c0 56.554 36.676 104.535 87.535 121.46 6.397 1.185 8.746-2.777 8.746-6.158 0-3.052-.12-13.135-.174-23.83-35.61 7.742-43.124-15.103-43.124-15.103-5.823-14.795-14.213-18.73-14.213-18.73-11.613-7.944.876-7.78.876-7.78 12.853.902 19.621 13.19 19.621 13.19 11.417 19.568 29.945 13.911 37.249 10.64 1.149-8.272 4.466-13.92 8.127-17.116-28.431-3.236-58.318-14.212-58.318-63.258 0-13.975 5-25.394 13.188-34.358-1.329-3.224-5.71-16.242 1.24-33.874 0 0 10.749-3.44 35.21 13.121 10.21-2.836 21.16-4.258 32.038-4.307 10.878.049 21.837 1.47 32.066 4.307 24.431-16.56 35.165-13.12 35.165-13.12 6.967 17.63 2.584 30.65 1.255 33.873 8.207 8.964 13.173 20.383 13.173 34.358 0 49.163-29.944 59.988-58.447 63.157 4.591 3.972 8.682 11.762 8.682 23.704 0 17.126-.148 30.91-.148 35.126 0 3.407 2.304 7.398 8.792 6.14C219.37 232.5 256 184.537 256 128.002 256 57.307 198.691 0 128.001 0Zm-80.06 182.34c-.282.636-1.283.827-2.194.39-.929-.417-1.45-1.284-1.15-1.922.276-.655 1.279-.838 2.205-.399.93.418 1.46 1.293 1.139 1.931Zm6.296 5.618c-.61.566-1.804.303-2.614-.591-.837-.892-.994-2.086-.375-2.66.63-.566 1.787-.301 2.626.591.838.903 1 2.088.363 2.66Zm4.32 7.188c-.785.545-2.067.034-2.86-1.104-.784-1.138-.784-2.503.017-3.05.795-.547 2.058-.055 2.861 1.075.782 1.157.782 2.522-.019 3.08Zm7.304 8.325c-.701.774-2.196.566-3.29-.49-1.119-1.032-1.43-2.496-.726-3.27.71-.776 2.213-.558 3.315.49 1.11 1.03 1.45 2.505.701 3.27Zm9.442 2.81c-.31 1.003-1.75 1.459-3.199 1.033-1.448-.439-2.395-1.613-2.103-2.626.301-1.01 1.747-1.484 3.207-1.028 1.446.436 2.396 1.602 2.095 2.622Zm10.744 1.193c.036 1.055-1.193 1.93-2.715 1.95-1.53.034-2.769-.82-2.786-1.86 0-1.065 1.202-1.932 2.733-1.958 1.522-.03 2.768.818 2.768 1.868Zm10.555-.405c.182 1.03-.875 2.088-2.387 2.37-1.485.271-2.861-.365-3.05-1.386-.184-1.056.893-2.114 2.376-2.387 1.514-.263 2.868.356 3.061 1.403Z"/></svg></a></div></div></div></div></div></header><div class=markdown><h2 class="anchor anchorWithStickyNavbar_LWe7" id=查看代理>查看代理<a href=#查看代理 class=hash-link aria-label=查看代理的直接链接 title=查看代理的直接链接>​</a></h2>
<div class="codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-text codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">echo $http_proxy</span><br></span><span class=token-line style=color:#393A34><span class="token plain">echo $https_proxy</span><br></span><span class=token-line style=color:#393A34><span class="token plain">echo $ftp_proxy</span><br></span><span class=token-line style=color:#393A34><span class="token plain">echo $no_proxy</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=复制代码到剪贴板 title=复制 class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=临时配置代理>临时配置代理<a href=#临时配置代理 class=hash-link aria-label=临时配置代理的直接链接 title=临时配置代理的直接链接>​</a></h2>
<p>在当前终端会话中设置代理，这种设置只会在当前终端窗口有效，关闭窗口后设置会失效</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-text codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">export HTTP_PROXY="http://172.22.220.64:7890"</span><br></span><span class=token-line style=color:#393A34><span class="token plain">export HTTPS_PROXY="http://172.22.220.64:7890"</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=复制代码到剪贴板 title=复制 class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>这样设置后，仅当前终端会话中的命令会使用这些代理设置。如果你想在当前会话中取消代理，可以使用 <code>unset</code> 命令</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-text codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">unset HTTP_PROXY</span><br></span><span class=token-line style=color:#393A34><span class="token plain">unset HTTPS_PROXY</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=复制代码到剪贴板 title=复制 class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=持久配置代理>持久配置代理<a href=#持久配置代理 class=hash-link aria-label=持久配置代理的直接链接 title=持久配置代理的直接链接>​</a></h2>
<p>要让代理设置在所有会话和重启后依然有效，你可以将这些环境变量添加到你的用户配置文件中，例如 <code>.bashrc</code> 或 <code>.bash_profile</code> 文件中</p>
<p>打开你的用户主目录下的 <code>.bashrc</code> 或 <code>.bash_profile</code> 文件</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-text codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">nano ~/.bashrc</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=复制代码到剪贴板 title=复制 class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>在文件的末尾添加以下内容</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-text codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">export HTTP_PROXY="http://172.22.220.64:7890"</span><br></span><span class=token-line style=color:#393A34><span class="token plain">export HTTPS_PROXY="http://172.22.220.64:7890"</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=复制代码到剪贴板 title=复制 class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>保存并关闭文件。使更改生效</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-text codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">source ~/.bashrc</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=复制代码到剪贴板 title=复制 class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>这样，每次用户登录时，系统都会自动加载这些设置，从而为所有终端会话启用代理。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=配置不使用代理的地址>配置不使用代理的地址<a href=#配置不使用代理的地址 class=hash-link aria-label=配置不使用代理的地址的直接链接 title=配置不使用代理的地址的直接链接>​</a></h2>
<p>在设置了全局代理的情况下，可能需要某些地址不通过代理访问，比如本地地址或特定的内部网站。可以使用 <code>no_proxy</code> 环境变量来实现</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-text codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">export NO_PROXY="localhost,127.0.0.1,.localdomain.com"</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=复制代码到剪贴板 title=复制 class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>添加到 <code>.bashrc</code> 或 <code>.bash_profile</code> 中，同时加入上述的代理设置中</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-text codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">export HTTP_PROXY="http://172.22.220.64:7890"</span><br></span><span class=token-line style=color:#393A34><span class="token plain">export HTTPS_PROXY="http://172.22.220.64:7890"</span><br></span><span class=token-line style=color:#393A34><span class="token plain">export NO_PROXY="localhost,127.0.0.1,.localdomain.com"</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=复制代码到剪贴板 title=复制 class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=配置系统级别的环境变量>配置系统级别的环境变量<a href=#配置系统级别的环境变量 class=hash-link aria-label=配置系统级别的环境变量的直接链接 title=配置系统级别的环境变量的直接链接>​</a></h2>
<p>在 Linux 系统中，你可以通过修改 <code>/etc/environment</code> 文件来设置系统级别的代理环境变量，这样不需要对每个用户的 <code>.bashrc</code> 进行单独配置。</p>
<p><strong>编辑 <code>/etc/environment</code> 文件</strong></p>
<p>使用你喜欢的文本编辑器以超级用户权限打开 <code>/etc/environment</code> 文件。</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-text codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">sudo nano /etc/environment</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=复制代码到剪贴板 title=复制 class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p><strong>添加代理设置</strong></p>
<p>在 <code>/etc/environment</code> 文件中添加你的代理配置。这个文件中的每个条目都应该是简单的 <code>KEY="value"</code> 格式。添加 HTTP 和 HTTPS 代理配置如下</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-text codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">HTTP_PROXY="http://172.22.220.64:7890"</span><br></span><span class=token-line style=color:#393A34><span class="token plain">HTTPS_PROXY="http://172.22.220.64:7890"</span><br></span><span class=token-line style=color:#393A34><span class="token plain">NO_PROXY="localhost,127.0.0.1,.localdomain.com"</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=复制代码到剪贴板 title=复制 class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p><strong>保存并关闭文件</strong></p>
<p>保存更改并关闭编辑器。如果你使用的是 <code>nano</code>，可以按 <code>Ctrl+X</code> 然后按 <code>Y</code> 确认保存，最后按 <code>Enter</code> 保存文件。</p>
<p><strong>使更改生效</strong></p>
<p><strong>更改 <code>/etc/environment</code> 后，需要注销再登录或重启系统，以使设置对所有用户生效。</strong></div><footer class="row docusaurus-mt-lg"><div class=col><b>标签：</b><ul class="tags_jXut padding--none margin-left--sm"><li class=tag_QGVx><a title=开发工具和环境配置相关文章 class="tag_zVej tagRegular_sFm0" href=/docs-hub/blog/tags/dev-tools>开发工具与环境</a></ul></div></footer></article><article class=margin-bottom--xl><header><h2 class=title_f1Hy><a href=/docs-hub/blog/ubuntu-上安装-docker-和-docker-compose>Ubuntu 上安装 Docker 和 Docker Compose</a></h2><div class="container_mt6G margin-vert--md"><time datetime=2024-09-11T00:00:00.000Z>2024年9月11日</time> · <!-- -->阅读需 2 分钟</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--12 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a class=avatar__photo-link href=/docs-hub/blog/authors/sumingcheng><img class="avatar__photo authorImage_XqGP" src=https://github.com/user-attachments/assets/9a06bd55-094a-4efc-91c3-d1b92236822f alt=素明诚></a><div class="avatar__intro authorDetails_lV9A"><div class=avatar__name><a href=/docs-hub/blog/authors/sumingcheng><span class=authorName_yefp>素明诚</span></a></div><small class=authorTitle_nd0D title="Full stack development">Full stack development</small><div class=authorSocials_rSDt><a href=https://x.com/sumingcheng target=_blank rel="noopener noreferrer" class=authorSocialLink_owbf title=X><svg width=1em height=1em fill=none viewBox="0 0 1200 1227" class="authorSocialLink_owbf xSvg_y3PF" style=--dark:#000;--light:#fff><path d="M714.163 519.284 1160.89 0h-105.86L667.137 450.887 357.328 0H0l468.492 681.821L0 1226.37h105.866l409.625-476.152 327.181 476.152H1200L714.137 519.284h.026ZM569.165 687.828l-47.468-67.894-377.686-540.24h162.604l304.797 435.991 47.468 67.894 396.2 566.721H892.476L569.165 687.854v-.026Z"/></svg></a><a href=https://github.com/sumingcheng target=_blank rel="noopener noreferrer" class=authorSocialLink_owbf title=GitHub><svg viewBox="0 0 256 250" width=1em height=1em class="authorSocialLink_owbf githubSvg_Uu4N" style=--dark:#000;--light:#fff preserveAspectRatio=xMidYMid><path d="M128.001 0C57.317 0 0 57.307 0 128.001c0 56.554 36.676 104.535 87.535 121.46 6.397 1.185 8.746-2.777 8.746-6.158 0-3.052-.12-13.135-.174-23.83-35.61 7.742-43.124-15.103-43.124-15.103-5.823-14.795-14.213-18.73-14.213-18.73-11.613-7.944.876-7.78.876-7.78 12.853.902 19.621 13.19 19.621 13.19 11.417 19.568 29.945 13.911 37.249 10.64 1.149-8.272 4.466-13.92 8.127-17.116-28.431-3.236-58.318-14.212-58.318-63.258 0-13.975 5-25.394 13.188-34.358-1.329-3.224-5.71-16.242 1.24-33.874 0 0 10.749-3.44 35.21 13.121 10.21-2.836 21.16-4.258 32.038-4.307 10.878.049 21.837 1.47 32.066 4.307 24.431-16.56 35.165-13.12 35.165-13.12 6.967 17.63 2.584 30.65 1.255 33.873 8.207 8.964 13.173 20.383 13.173 34.358 0 49.163-29.944 59.988-58.447 63.157 4.591 3.972 8.682 11.762 8.682 23.704 0 17.126-.148 30.91-.148 35.126 0 3.407 2.304 7.398 8.792 6.14C219.37 232.5 256 184.537 256 128.002 256 57.307 198.691 0 128.001 0Zm-80.06 182.34c-.282.636-1.283.827-2.194.39-.929-.417-1.45-1.284-1.15-1.922.276-.655 1.279-.838 2.205-.399.93.418 1.46 1.293 1.139 1.931Zm6.296 5.618c-.61.566-1.804.303-2.614-.591-.837-.892-.994-2.086-.375-2.66.63-.566 1.787-.301 2.626.591.838.903 1 2.088.363 2.66Zm4.32 7.188c-.785.545-2.067.034-2.86-1.104-.784-1.138-.784-2.503.017-3.05.795-.547 2.058-.055 2.861 1.075.782 1.157.782 2.522-.019 3.08Zm7.304 8.325c-.701.774-2.196.566-3.29-.49-1.119-1.032-1.43-2.496-.726-3.27.71-.776 2.213-.558 3.315.49 1.11 1.03 1.45 2.505.701 3.27Zm9.442 2.81c-.31 1.003-1.75 1.459-3.199 1.033-1.448-.439-2.395-1.613-2.103-2.626.301-1.01 1.747-1.484 3.207-1.028 1.446.436 2.396 1.602 2.095 2.622Zm10.744 1.193c.036 1.055-1.193 1.93-2.715 1.95-1.53.034-2.769-.82-2.786-1.86 0-1.065 1.202-1.932 2.733-1.958 1.522-.03 2.768.818 2.768 1.868Zm10.555-.405c.182 1.03-.875 2.088-2.387 2.37-1.485.271-2.861-.365-3.05-1.386-.184-1.056.893-2.114 2.376-2.387 1.514-.263 2.868.356 3.061 1.403Z"/></svg></a></div></div></div></div></div></header><div class=markdown><h2 class="anchor anchorWithStickyNavbar_LWe7" id=安装-docker>安装 Docker<a href=#安装-docker class=hash-link aria-label="安装 Docker的直接链接" title="安装 Docker的直接链接">​</a></h2>
<p><strong>apt 直接装</strong></p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-text codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">sudo apt install docker.io</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=复制代码到剪贴板 title=复制 class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p><strong>更新您的系统</strong> 更新 Ubuntu 的包索引，确保所有系统包都是最新的。</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-text codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">sudo apt update</span><br></span><span class=token-line style=color:#393A34><span class="token plain">sudo apt upgrade -y</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=复制代码到剪贴板 title=复制 class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p><strong>安装必要的包</strong> 安装一些必需的包，这些包允许 <code>apt</code> 通过 HTTPS 使用仓库</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-text codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">sudo apt install apt-transport-https ca-certificates curl software-properties-common</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=复制代码到剪贴板 title=复制 class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p><strong>添加 Docker 的官方 GPG 密钥</strong> 确保下载的软件包是从 Docker 的官方源获取的。</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-text codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add -</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=复制代码到剪贴板 title=复制 class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p><strong>设置 Docker 仓库</strong> 向 <code>apt</code> 源列表添加 Docker 仓库。</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-text codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">sudo add-apt-repository "deb [arch=amd64] https://download.docker.com/linux/ubuntu $(lsb_release -cs) stable"</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=复制代码到剪贴板 title=复制 class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p><strong>安装 Docker CE (Community Edition)</strong> 更新 <code>apt</code> 包索引，然后安装 Docker CE。</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-text codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">sudo apt update</span><br></span><span class=token-line style=color:#393A34><span class="token plain">sudo apt install docker-ce</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=复制代码到剪贴板 title=复制 class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p><strong>验证 Docker 安装</strong> 检查 Docker 是否正确安装，并运行 hello-world 容器作为测试。</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-text codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">sudo systemctl status docker</span><br></span><span class=token-line style=color:#393A34><span class="token plain">sudo docker run hello-world</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=复制代码到剪贴板 title=复制 class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=安装-docker-compose>安装 Docker Compose<a href=#安装-docker-compose class=hash-link aria-label="安装 Docker Compose的直接链接" title="安装 Docker Compose的直接链接">​</a></h2>
<p><strong>下载 Docker Compose</strong> 访问 Docker Compose 的 GitHub 发布页面 查找最新版本的 Docker Compose。使用 <code>curl</code> 下载适用于 Linux 的二进制文件。</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-text codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">sudo curl -L "https://github.com/docker/compose/releases/download/v2.11.2/docker-compose-$(uname -s)-$(uname -m)" -o /usr/local/bin/docker-compose</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=复制代码到剪贴板 title=复制 class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>请根据需要替换 <code>v2.11.2</code> 为最新版本号。</p>
<p><strong>添加执行权限</strong> 为下载的二进制文件添加执行权限。</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-text codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">sudo chmod +x /usr/local/bin/docker-compose</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=复制代码到剪贴板 title=复制 class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p><strong>验证安装</strong> 检查 Docker Compose 是否已成功安装并可以运行。</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-text codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">docker-compose --version</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=复制代码到剪贴板 title=复制 class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=配置-docker-无需-sudo>配置 Docker 无需 sudo<a href=#配置-docker-无需-sudo class=hash-link aria-label="配置 Docker 无需 sudo的直接链接" title="配置 Docker 无需 sudo的直接链接">​</a></h3>
<p>默认情况下，运行 Docker 命令需要 <code>sudo</code>。如果您想让普通用户也能运行 Docker 命令而无需使用 <code>sudo</code>，可以将用户添加到 Docker 组</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_biex><pre tabindex=0 class="prism-code language-text codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">sudo usermod -aG docker ${USER}</span><br></span></code></pre><div class=buttonGroup__atx><button type=button aria-label=复制代码到剪贴板 title=复制 class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>之后，您需要注销并重新登录。</div><footer class="row docusaurus-mt-lg"><div class=col><b>标签：</b><ul class="tags_jXut padding--none margin-left--sm"><li class=tag_QGVx><a title=开发工具和环境配置相关文章 class="tag_zVej tagRegular_sFm0" href=/docs-hub/blog/tags/dev-tools>开发工具与环境</a></ul></div></footer></article><nav class=pagination-nav aria-label=博文列表分页导航><a class="pagination-nav__link pagination-nav__link--prev" href=/docs-hub/blog/tags/dev-tools/page/2><div class=pagination-nav__label>较新的博文</div></a><a class="pagination-nav__link pagination-nav__link--next" href=/docs-hub/blog/tags/dev-tools/page/4><div class=pagination-nav__label>较旧的博文</div></a></nav></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class=footer__title>LinkExchange</div><ul class="footer__items clean-list"><li class=footer__item><a href=https://leviatan.cn target=_blank rel="noopener noreferrer" class=footer__link-item>Leviatan<svg width=13.5 height=13.5 aria-hidden=true viewBox="0 0 24 24" class=iconExternalLink_nPIU><path fill=currentColor d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></svg></a></ul></div><div class="col footer__col"><div class=footer__title>Acknowledgments</div><ul class="footer__items clean-list"><li class=footer__item><a href=https://react.dev target=_blank rel="noopener noreferrer" class=footer__link-item>React<svg width=13.5 height=13.5 aria-hidden=true viewBox="0 0 24 24" class=iconExternalLink_nPIU><path fill=currentColor d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></svg></a><li class=footer__item><a href=https://docusaurus.io target=_blank rel="noopener noreferrer" class=footer__link-item>Docusaurus<svg width=13.5 height=13.5 aria-hidden=true viewBox="0 0 24 24" class=iconExternalLink_nPIU><path fill=currentColor d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></svg></a></ul></div><div class="col footer__col"><div class=footer__title>More</div><ul class="footer__items clean-list"><li class=footer__item><a href=https://sumingcheng.cn target=_blank rel="noopener noreferrer" class=footer__link-item>Blog<svg width=13.5 height=13.5 aria-hidden=true viewBox="0 0 24 24" class=iconExternalLink_nPIU><path fill=currentColor d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></svg></a><li class=footer__item><a href=https://github.com/sumingcheng target=_blank rel="noopener noreferrer" class=footer__link-item>GitHub<svg width=13.5 height=13.5 aria-hidden=true viewBox="0 0 24 24" class=iconExternalLink_nPIU><path fill=currentColor d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></svg></a></ul></div></div><div class="footer__bottom text--center"><div class=footer__copyright>Copyright © 2020-2024 Sumingcheng. All Rights Reserved.</div></div></div></footer></div>