"use strict";(self.webpackChunknote_book=self.webpackChunknote_book||[]).push([[64830],{82217:(e,n,o)=>{o.r(n),o.d(n,{assets:()=>i,contentTitle:()=>c,default:()=>g,frontMatter:()=>s,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"Backend/Go/gRPC/gRPC\u5e94\u7528","title":"\u5728 Windows \u4e0a\u4f7f\u7528 Go \u8bed\u8a00\u5f00\u53d1 gRPC \u5e94\u7528","description":"\u5b89\u88c5\u5fc5\u8981\u7684\u5de5\u5177","source":"@site/docs/Backend/Go/gRPC/2.gRPC\u5e94\u7528.md","sourceDirName":"Backend/Go/gRPC","slug":"/Backend/Go/gRPC/gRPC\u5e94\u7528","permalink":"/docs-hub/docs/Backend/Go/gRPC/gRPC\u5e94\u7528","draft":false,"unlisted":false,"editUrl":"https://github.com/sumingcheng/docs-hub/edit/main/docs/Backend/Go/gRPC/2.gRPC\u5e94\u7528.md","tags":[],"version":"current","lastUpdatedBy":"sumingcheng","lastUpdatedAt":1733823170000,"sidebarPosition":2,"frontMatter":{},"sidebar":"goSidebar","previous":{"title":"\u6df1\u5165\u7406\u89e3 HTTP\u3001gRPC \u4e0e\u6570\u636e\u683c\u5f0f","permalink":"/docs-hub/docs/Backend/Go/gRPC/gRPC-\u57fa\u7840\u77e5\u8bc6"},"next":{"title":"GRPC \u5b9e\u73b0 TodoList","permalink":"/docs-hub/docs/Backend/Go/gRPC/GRPC\u5b9e\u73b0TodoList"}}');var l=o(74848),t=o(28453);const s={},c="\u5728 Windows \u4e0a\u4f7f\u7528 Go \u8bed\u8a00\u5f00\u53d1 gRPC \u5e94\u7528",i={},d=[{value:"\u5b89\u88c5\u5fc5\u8981\u7684\u5de5\u5177",id:"\u5b89\u88c5\u5fc5\u8981\u7684\u5de5\u5177",level:2},{value:"\u521d\u59cb\u5316 Go \u6a21\u5757",id:"\u521d\u59cb\u5316-go-\u6a21\u5757",level:3},{value:"\u4e0b\u8f7d Protocol Buffers",id:"\u4e0b\u8f7d-protocol-buffers",level:3},{value:"\u914d\u7f6e\u7cfb\u7edf\u73af\u5883\u53d8\u91cf Path",id:"\u914d\u7f6e\u7cfb\u7edf\u73af\u5883\u53d8\u91cf-path",level:3},{value:"\u9a8c\u8bc1\u5b89\u88c5",id:"\u9a8c\u8bc1\u5b89\u88c5",level:3},{value:"\u5b89\u88c5 Go \u7684 Protocol Buffers \u63d2\u4ef6",id:"\u5b89\u88c5-go-\u7684-protocol-buffers-\u63d2\u4ef6",level:3},{value:"\u7f16\u5199 .proto \u6587\u4ef6",id:"\u7f16\u5199-proto-\u6587\u4ef6",level:2},{value:"\u751f\u6210 Go \u4ee3\u7801",id:"\u751f\u6210-go-\u4ee3\u7801",level:2},{value:"\u76ee\u5f55\u7ed3\u6784",id:"\u76ee\u5f55\u7ed3\u6784",level:3},{value:"\u7f16\u5199\u670d\u52a1\u7aef\u4ee3\u7801",id:"\u7f16\u5199\u670d\u52a1\u7aef\u4ee3\u7801",level:2},{value:"\u7f16\u5199\u5ba2\u6237\u7aef\u4ee3\u7801",id:"\u7f16\u5199\u5ba2\u6237\u7aef\u4ee3\u7801",level:2},{value:"\u6ce8\u610f\u4e8b\u9879",id:"\u6ce8\u610f\u4e8b\u9879",level:2}];function a(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",img:"img",li:"li",p:"p",pre:"pre",ul:"ul",...(0,t.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.header,{children:(0,l.jsx)(n.h1,{id:"\u5728-windows-\u4e0a\u4f7f\u7528-go-\u8bed\u8a00\u5f00\u53d1-grpc-\u5e94\u7528",children:"\u5728 Windows \u4e0a\u4f7f\u7528 Go \u8bed\u8a00\u5f00\u53d1 gRPC \u5e94\u7528"})}),"\n",(0,l.jsx)(n.h2,{id:"\u5b89\u88c5\u5fc5\u8981\u7684\u5de5\u5177",children:"\u5b89\u88c5\u5fc5\u8981\u7684\u5de5\u5177"}),"\n",(0,l.jsx)(n.h3,{id:"\u521d\u59cb\u5316-go-\u6a21\u5757",children:"\u521d\u59cb\u5316 Go \u6a21\u5757"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-go",children:"go mod init proto\ngo get -u google.golang.org/grpc\n"})}),"\n",(0,l.jsx)(n.h3,{id:"\u4e0b\u8f7d-protocol-buffers",children:"\u4e0b\u8f7d Protocol Buffers"}),"\n",(0,l.jsxs)(n.p,{children:["\u524d\u5f80 ",(0,l.jsx)(n.a,{href:"https://github.com/protocolbuffers/protobuf/releases/tag/v25.2",children:"https://github.com/protocolbuffers/protobuf/releases/tag/v25.2"})," \u4e0b\u8f7d\u9002\u7528\u4e8e\u5f53\u524d\u7cfb\u7edf\u7684 Protocol Buffers \u4e8c\u8fdb\u5236\u6587\u4ef6\u3002"]}),"\n",(0,l.jsx)(n.h3,{id:"\u914d\u7f6e\u7cfb\u7edf\u73af\u5883\u53d8\u91cf-path",children:"\u914d\u7f6e\u7cfb\u7edf\u73af\u5883\u53d8\u91cf Path"}),"\n",(0,l.jsxs)(n.p,{children:["\u5c06 Protocol Buffers \u7684 ",(0,l.jsx)(n.code,{children:"bin"})," \u76ee\u5f55\u6dfb\u52a0\u5230\u7cfb\u7edf\u73af\u5883\u53d8\u91cf ",(0,l.jsx)(n.code,{children:"Path"})," \u4e2d\u3002"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.img,{src:o(29836).A+"",width:"679",height:"662"})}),"\n",(0,l.jsx)(n.h3,{id:"\u9a8c\u8bc1\u5b89\u88c5",children:"\u9a8c\u8bc1\u5b89\u88c5"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-go",children:"protoc --version\n"})}),"\n",(0,l.jsxs)(n.p,{children:["\u5e94\u8f93\u51fa ",(0,l.jsx)(n.code,{children:"libprotoc 25.2"}),"\u3002"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.img,{src:o(71165).A+"",width:"747",height:"133"})}),"\n",(0,l.jsx)(n.h3,{id:"\u5b89\u88c5-go-\u7684-protocol-buffers-\u63d2\u4ef6",children:"\u5b89\u88c5 Go \u7684 Protocol Buffers \u63d2\u4ef6"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-go",children:"go install google.golang.org/protobuf/cmd/protoc-gen-go@latest\ngo install google.golang.org/grpc/cmd/protoc-gen-go-grpc@latest\n"})}),"\n",(0,l.jsx)(n.h2,{id:"\u7f16\u5199-proto-\u6587\u4ef6",children:"\u7f16\u5199 .proto \u6587\u4ef6"}),"\n",(0,l.jsxs)(n.p,{children:["\u5728\u9879\u76ee\u76ee\u5f55\u4e0b\u521b\u5efa ",(0,l.jsx)(n.code,{children:"hello.proto"}),"\uff1a"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-protobuf",children:'syntax = "proto3";\npackage proto;\noption go_package = "./;proto";\n\nmessage HelloRequest {\n  string greeting = 1;\n}\n\nmessage HelloResponse {\n  string reply = 1;\n}\n\nservice Greeter {\n  rpc SayHello (HelloRequest) returns (HelloResponse);\n}\n'})}),"\n",(0,l.jsx)(n.h2,{id:"\u751f\u6210-go-\u4ee3\u7801",children:"\u751f\u6210 Go \u4ee3\u7801"}),"\n",(0,l.jsxs)(n.p,{children:["\u5728 ",(0,l.jsx)(n.code,{children:"proto"})," \u76ee\u5f55\u4e0b\u6267\u884c\uff1a"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-go",children:"protoc --go_out=. --go-grpc_out=. hello.proto\n"})}),"\n",(0,l.jsxs)(n.p,{children:["\u751f\u6210 ",(0,l.jsx)(n.code,{children:"hello.pb.go"})," \u548c ",(0,l.jsx)(n.code,{children:"hello_grpc.pb.go"})," \u6587\u4ef6\u3002"]}),"\n",(0,l.jsx)(n.h3,{id:"\u76ee\u5f55\u7ed3\u6784",children:"\u76ee\u5f55\u7ed3\u6784"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-plaintext",children:"go-Learning/\n\u2502\n\u2514\u2500\u2500\u2500RPC/\n    \u2502   go.mod\n    \u2502\n    \u251c\u2500\u2500\u2500client/\n    \u2502       main.go\n    \u2502\n    \u251c\u2500\u2500\u2500server/\n    \u2502       main.go\n    \u2502\n    \u2514\u2500\u2500\u2500proto/\n            hello.proto\n            hello.pb.go\n            hello_grpc.pb.go\n"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.img,{src:o(14300).A+"",width:"404",height:"351"})}),"\n",(0,l.jsx)(n.h2,{id:"\u7f16\u5199\u670d\u52a1\u7aef\u4ee3\u7801",children:"\u7f16\u5199\u670d\u52a1\u7aef\u4ee3\u7801"}),"\n",(0,l.jsxs)(n.p,{children:["\u5728 ",(0,l.jsx)(n.code,{children:"server/main.go"})," \u4e2d\uff1a"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-go",children:'package main\n\nimport (\n\t"context"\n\t"log"\n\t"net"\n\n\t"google.golang.org/grpc"\n\tpb "hello/proto"\n)\n\ntype server struct {\n\tpb.UnimplementedGreeterServer\n}\n\nfunc (s *server) SayHello(ctx context.Context, req *pb.HelloRequest) (*pb.HelloResponse, error) {\n\treply := "Hello " + req.Greeting\n\treturn &pb.HelloResponse{Reply: reply}, nil\n}\n\nfunc main() {\n\tlistener, err := net.Listen("tcp", ":50051")\n\tif err != nil {\n\t\tlog.Fatalf("\u76d1\u542c\u7aef\u53e3\u5931\u8d25 %v", err)\n\t}\n\n\tgrpcServer := grpc.NewServer()\n\tpb.RegisterGreeterServer(grpcServer, &server{})\n\n\tlog.Println("\u670d\u52a1\u7aef\u6b63\u5728\u76d1\u542c\u7aef\u53e3 50051...")\n\tif err := grpcServer.Serve(listener); err != nil {\n\t\tlog.Fatalf("\u542f\u52a8\u670d\u52a1\u7aef\u5931\u8d25 %v", err)\n\t}\n}\n'})}),"\n",(0,l.jsx)(n.h2,{id:"\u7f16\u5199\u5ba2\u6237\u7aef\u4ee3\u7801",children:"\u7f16\u5199\u5ba2\u6237\u7aef\u4ee3\u7801"}),"\n",(0,l.jsxs)(n.p,{children:["\u5728 ",(0,l.jsx)(n.code,{children:"client/main.go"})," \u4e2d\uff1a"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-go",children:'package main\n\nimport (\n\t"context"\n\t"log"\n\t"time"\n\n\t"google.golang.org/grpc"\n\tpb "hello/proto"\n)\n\nfunc main() {\n\tconn, err := grpc.Dial("localhost:50051", grpc.WithInsecure(), grpc.WithBlock())\n\tif err != nil {\n\t\tlog.Fatalf("\u8fde\u63a5\u670d\u52a1\u7aef\u5931\u8d25 %v", err)\n\t}\n\tdefer conn.Close()\n\n\tclient := pb.NewGreeterClient(conn)\n\n\tctx, cancel := context.WithTimeout(context.Background(), time.Second)\n\tdefer cancel()\n\n\tresponse, err := client.SayHello(ctx, &pb.HelloRequest{Greeting: "sumingcheng"})\n\tif err != nil {\n\t\tlog.Fatalf("\u8c03\u7528 SayHello \u65b9\u6cd5\u5931\u8d25 %v", err)\n\t}\n\n\tlog.Printf("\u670d\u52a1\u7aef\u56de\u590d %s", response.GetReply())\n}\n'})}),"\n",(0,l.jsx)(n.h2,{id:"\u6ce8\u610f\u4e8b\u9879",children:"\u6ce8\u610f\u4e8b\u9879"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:["\u786e\u4fdd ",(0,l.jsx)(n.code,{children:"protoc"})," \u548c Go \u63d2\u4ef6\u5df2\u6b63\u786e\u5b89\u88c5\uff0c\u5e76\u5728\u73af\u5883\u53d8\u91cf\u4e2d\u914d\u7f6e\u3002"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"\u5728\u751f\u6210 Go \u4ee3\u7801\u65f6\uff0c\u786e\u4fdd\u5728\u6b63\u786e\u7684\u76ee\u5f55\u4e0b\u6267\u884c\u547d\u4ee4\u3002"}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"\u670d\u52a1\u7aef\u548c\u5ba2\u6237\u7aef\u4f7f\u7528\u7684\u7aef\u53e3\u53f7\u548c\u5730\u5740\u9700\u4fdd\u6301\u4e00\u81f4\u3002"}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:["\u5728\u4ee3\u7801\u4e2d\u66ff\u6362\u6d4b\u8bd5\u5185\u5bb9\u4e3a ",(0,l.jsx)(n.code,{children:"sumingcheng"}),"\u3002"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"\u5982\u679c\u9047\u5230\u4efb\u4f55\u95ee\u9898\uff0c\u53ef\u4ee5\u53c2\u8003\u5b98\u65b9\u6587\u6863\u6216\u793e\u533a\u8d44\u6e90\u8fdb\u884c\u6392\u67e5\u3002"}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"\ud83d\udca1 \u4f7f\u7528\u6613\u4e8e\u7406\u89e3\u7684\u53d8\u91cf\u540d\u548c\u6e05\u6670\u7684\u4ee3\u7801\u7ed3\u6784\uff0c\u53ef\u4ee5\u63d0\u9ad8\u4ee3\u7801\u7684\u53ef\u8bfb\u6027\u548c\u7ef4\u62a4\u6027\u3002"})]})}function g(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(a,{...e})}):a(e)}},71165:(e,n,o)=>{o.d(n,{A:()=>r});const r=o.p+"assets/images/4dbcf9c369e3d20b05291df6e6752669-d588bfbaff012de9f14097482fb01a00.png"},29836:(e,n,o)=>{o.d(n,{A:()=>r});const r=o.p+"assets/images/6c1d4df00258b69da6f4743bf0603623-6701b9b831de34f5ffae702e9c8ce760.png"},14300:(e,n,o)=>{o.d(n,{A:()=>r});const r=o.p+"assets/images/a6c4b857892a6f2bc6dceb2040aec6be-11aee6eed108e26298abd6561081078c.png"},28453:(e,n,o)=>{o.d(n,{R:()=>s,x:()=>c});var r=o(96540);const l={},t=r.createContext(l);function s(e){const n=r.useContext(t);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:s(e.components),r.createElement(t.Provider,{value:n},e.children)}}}]);