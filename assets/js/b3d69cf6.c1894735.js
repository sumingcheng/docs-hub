"use strict";(self.webpackChunknote_book=self.webpackChunknote_book||[]).push([["12626"],{83501:function(e,n,t){t.r(n),t.d(n,{assets:function(){return a},contentTitle:function(){return d},default:function(){return u},frontMatter:function(){return r},metadata:function(){return i},toc:function(){return o}});var i=t(92176),s=t(85893),c=t(50065);let r={slug:"\u53D1\u5E03-docker-\u955C\u50CF\u5230-github-packages",title:"\u53D1\u5E03 Docker \u955C\u50CF\u5230 GitHub Packages",authors:["sumingcheng"],tags:["dev-tools"],date:new Date("2024-07-23T00:00:00.000Z")},d="\u53D1\u5E03 Docker \u955C\u50CF\u5230 GitHub Packages",a={authorsImageUrls:[void 0]},o=[{value:"1.\u51C6\u5907\u4F60\u7684\u9879\u76EE",id:"1\u51C6\u5907\u4F60\u7684\u9879\u76EE",level:2},{value:"2.\u914D\u7F6E GitHub Actions",id:"2\u914D\u7F6E-github-actions",level:2},{value:"\u521B\u5EFA\u5DE5\u4F5C\u6D41\u6587\u4EF6",id:"\u521B\u5EFA\u5DE5\u4F5C\u6D41\u6587\u4EF6",level:3},{value:"\u5B9A\u4E49\u89E6\u53D1\u6761\u4EF6",id:"\u5B9A\u4E49\u89E6\u53D1\u6761\u4EF6",level:3},{value:"\u914D\u7F6E\u73AF\u5883\u53D8\u91CF\uFF0C\u8BBE\u7F6E GitHub Secrets",id:"\u914D\u7F6E\u73AF\u5883\u53D8\u91CF\u8BBE\u7F6E-github-secrets",level:3},{value:"\u521B\u5EFA\u4EE4\u724C",id:"\u521B\u5EFA\u4EE4\u724C",level:3},{value:"\u6784\u5EFA\u6210\u529F\u540E\u4F60\u53EF\u4EE5\u770B\u5230\u4F60\u7684\u955C\u50CF",id:"\u6784\u5EFA\u6210\u529F\u540E\u4F60\u53EF\u4EE5\u770B\u5230\u4F60\u7684\u955C\u50CF",level:3},{value:"4.\u94FE\u63A5\u5230\u4ED3\u5E93\uFF08\u53EF\u9009\uFF09",id:"4\u94FE\u63A5\u5230\u4ED3\u5E93\u53EF\u9009",level:3}];function l(e){let n={a:"a",br:"br",code:"code",h2:"h2",h3:"h3",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,c.a)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h2,{id:"1\u51C6\u5907\u4F60\u7684\u9879\u76EE",children:"1.\u51C6\u5907\u4F60\u7684\u9879\u76EE"}),"\n",(0,s.jsxs)(n.p,{children:["\u786E\u4FDD\u4F60\u7684\u9879\u76EE\u5305\u542B\u6240\u6709\u5FC5\u9700\u7684\u6587\u4EF6\uFF0C\u4F8B\u5982",(0,s.jsx)(n.code,{children:"Dockerfile"}),"\uFF08\u5BF9\u4E8E Docker \u955C\u50CF\uFF09\u3001\u5E76\u4E14\u4F60\u5DF2\u7ECF\u5728\u672C\u5730\u6D4B\u8BD5\u955C\u50CF\u6784\u5EFA\u6210\u529F\u3002"]}),"\n",(0,s.jsxs)(n.p,{children:["\u786E\u5B9A\u4F60\u7684\u9879\u76EE\u7ED3\u6784\uFF0C\u4F60\u7684",(0,s.jsx)(n.code,{children:"Dockerfile"}),"\u652F\u6301\u7248\u672C\u63A7\u5236\u3002"]}),"\n",(0,s.jsx)(n.h2,{id:"2\u914D\u7F6E-github-actions",children:"2.\u914D\u7F6E GitHub Actions"}),"\n",(0,s.jsx)(n.h3,{id:"\u521B\u5EFA\u5DE5\u4F5C\u6D41\u6587\u4EF6",children:"\u521B\u5EFA\u5DE5\u4F5C\u6D41\u6587\u4EF6"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsxs)(n.strong,{children:["\u5728\u4F60\u7684 GitHub \u4ED3\u5E93\u4E2D\u7684 ",(0,s.jsx)(n.code,{children:".github/workflows"})," \u76EE\u5F55\u4E0B\u521B\u5EFA\u4E00\u4E2A YAML \u5DE5\u4F5C\u6D41\u6587\u4EF6\u3002"]})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"name: Publish Docker image\n\u200B\non:\n  push:\n    branches:\n      - main\n    tags:\n      - 'v*'\n\u200B\njobs:\n  build-and-push:\n    runs-on: ubuntu-22.04\n    steps:\n      - name: Check out the repo\n        uses: actions/checkout@v2\n\u200B\n      - name: Set up Docker Buildx\n        uses: docker/setup-buildx-action@v1\n\u200B\n      - name: Log in to GitHub Container Registry\n        uses: docker/login-action@v1\n        with:\n          registry: ghcr.io\n          username: ${{ github.actor }}\n          password: ${{ secrets.PAT_TOKEN }}\n\u200B\n      - name: Build and push\n        uses: docker/build-push-action@v2\n        with:\n          context: .\n          file: ./Dockerfile\n          push: true\n          tags: ghcr.io/${{ github.repository_owner }}/gin-blog-template:${{ github.ref_name }}\n          build-args: VERSION=${{ github.ref_name }}\n\u200B\n"})}),"\n",(0,s.jsx)(n.h3,{id:"\u5B9A\u4E49\u89E6\u53D1\u6761\u4EF6",children:"\u5B9A\u4E49\u89E6\u53D1\u6761\u4EF6"}),"\n",(0,s.jsxs)(n.p,{children:["\u914D\u7F6E\u5DE5\u4F5C\u6D41\u89E6\u53D1\u6761\u4EF6\uFF0C\u6BD4\u5982\u5728\u63A8\u9001\u5230\u7279\u5B9A\u5206\u652F\u6216\u521B\u5EFA\u6807\u7B7E\u65F6\u89E6\u53D1\u3002\u6211\u914D\u7F6E\u7684\u662F\u63D0\u4EA4",(0,s.jsx)(n.code,{children:"tag"}),"\u5230\u4E3B\u5206\u652F\u540E\u89E6\u53D1\u6784\u5EFA\u955C\u50CF\u7684\u6D41\u7A0B"]}),"\n",(0,s.jsx)(n.h3,{id:"\u914D\u7F6E\u73AF\u5883\u53D8\u91CF\u8BBE\u7F6E-github-secrets",children:"\u914D\u7F6E\u73AF\u5883\u53D8\u91CF\uFF0C\u8BBE\u7F6E GitHub Secrets"}),"\n",(0,s.jsxs)(n.p,{children:["\u8FD9\u91CC\u9700\u8981\u4F60\u4ED3\u5E93\u7684\u4E00\u4E9B\u6743\u9650\uFF0C\u9700\u8981\u4F60\u751F\u6210",(0,s.jsx)(n.code,{children:"PAT_TOKEN"}),"\u786E\u4FDD\u4F60\u6709\u4EE5\u4E0B\u6743\u9650"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"write:packages"})," \uFF08\u5141\u8BB8\u5199\u5165\u5305\uFF09"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"delete:packages"})," \uFF08\u53EF\u9009\uFF0C\u5141\u8BB8\u5220\u9664\u5305\uFF09"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"repo"})," \uFF08\u5141\u8BB8\u8BBF\u95EE\u79C1\u6709\u4ED3\u5E93\uFF0C\u5982\u679C\u60A8\u7684\u4ED3\u5E93\u662F\u79C1\u6709\u7684\uFF09"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"\u521B\u5EFA\u4EE4\u724C",children:"\u521B\u5EFA\u4EE4\u724C"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.img,{alt:"3cb98ce51325c66ec3f995bf6d96319d",src:t(14014).Z+"",width:"1440",height:"316"}),"### \u6DFB\u52A0\u5230\u4ED3\u5E93\u7684\u73AF\u5883\u53D8\u91CF",(0,s.jsx)(n.br,{}),"\n",(0,s.jsx)(n.img,{alt:"238f091e27596b2f8551428ee5efed9e",src:t(60994).Z+"",width:"1440",height:"879"}),"### \u63D0\u4EA4\u8981\u6784\u5EFA\u7684 tag \u5E76\u63A8\u9001"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"\u521B\u5EFA\u6CE8\u91CA\u6807\u7B7E"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:'git tag -a v1.0 -m "Release version 1.0"\n'})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"\u67E5\u770B\u6240\u6709\u6807\u7B7E"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"git tag\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"\u63A8\u9001\u6807\u7B7E\u5230\u8FDC\u7A0B\u4ED3\u5E93"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"git push origin v1.0\n"})}),"\n",(0,s.jsx)(n.h3,{id:"\u6784\u5EFA\u6210\u529F\u540E\u4F60\u53EF\u4EE5\u770B\u5230\u4F60\u7684\u955C\u50CF",children:"\u6784\u5EFA\u6210\u529F\u540E\u4F60\u53EF\u4EE5\u770B\u5230\u4F60\u7684\u955C\u50CF"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.a,{href:"https://github.com/sumingcheng/gin-blog-template/pkgs/container/gin-blog-template",children:"https://github.com/sumingcheng/gin-blog-template/pkgs/container/gin-blog-template"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.img,{alt:"febd41c887cb836369ca768d26d3d3f3",src:t(9869).Z+"",width:"990",height:"658"}),"### 3.\u8BBE\u7F6E\u5305\u7684\u53EF\u89C1\u6027\uFF08\u53EF\u9009\uFF09"]}),"\n",(0,s.jsx)(n.p,{children:"\u4E00\u65E6\u5305\u88AB\u63A8\u9001\u5230 GitHub Packages\uFF0C\u4F60\u53EF\u80FD\u9700\u8981\u8BBE\u7F6E\u5176\u53EF\u89C1\u6027\uFF08\u516C\u5F00\u6216\u79C1\u6709\uFF09\u3002\u8FD9\u53EF\u4EE5\u5728 GitHub \u754C\u9762\u4E2D\u5B8C\u6210\uFF0C\u901A\u8FC7\u4FEE\u6539\u5305\u7684\u8BBE\u7F6E\u3002"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"a42761d361813deed0775762a8a2bf22",src:t(23009).Z+"",width:"1374",height:"925"})}),"\n",(0,s.jsx)(n.p,{children:"\u4FEE\u6539\u53EF\u89C1\u6027"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"e73a6d6c637e29d6af34554f689e8b07",src:t(64634).Z+"",width:"1340",height:"774"})}),"\n",(0,s.jsx)(n.p,{children:"\u4FEE\u6539\u4E3A\u516C\u5F00\u7684"}),"\n",(0,s.jsx)(n.h3,{id:"4\u94FE\u63A5\u5230\u4ED3\u5E93\u53EF\u9009",children:"4.\u94FE\u63A5\u5230\u4ED3\u5E93\uFF08\u53EF\u9009\uFF09"}),"\n",(0,s.jsx)(n.p,{children:"\u5982\u679C\u9700\u8981\uFF0C\u4F60\u53EF\u4EE5\u5C06\u5305\u94FE\u63A5\u5230\u4E00\u4E2A\u7279\u5B9A\u7684 GitHub \u4ED3\u5E93\uFF0C\u4EE5\u4FBF\u66F4\u597D\u5730\u96C6\u6210\u548C\u5C55\u793A\u3002\u76F4\u63A5\u94FE\u63A5\u5230\u4F60\u60F3\u5C55\u793A\u7684\u4ED3\u5E93\uFF0C\u521B\u5EFA\u5373\u53EF\u3002"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.img,{alt:"3b7fdbc667d8671a178d7d0600779192",src:t(75525).Z+"",width:"796",height:"343"}),"### 5.\u9A8C\u8BC1\u548C\u6D4B\u8BD5"]}),"\n",(0,s.jsx)(n.p,{children:"\u9A8C\u8BC1\u5305\u662F\u5426\u5DF2\u6B63\u786E\u53D1\u5E03\u5230 GitHub Packages\uFF0C\u5E76\u6D4B\u8BD5\u662F\u5426\u53EF\u4EE5\u6B63\u5E38\u4E0B\u8F7D\u548C\u4F7F\u7528\u3002"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"52170a3fec321082944d9904d532b1cf",src:t(5099).Z+"",width:"1440",height:"903"})})]})}function u(e={}){let{wrapper:n}={...(0,c.a)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(l,{...e})}):l(e)}},60994:function(e,n,t){t.d(n,{Z:function(){return i}});let i=t.p+"assets/images/238f091e27596b2f8551428ee5efed9e-a579ce75e42dc2e5aa35ac5b696a6bed.jpg"},75525:function(e,n,t){t.d(n,{Z:function(){return i}});let i=t.p+"assets/images/3b7fdbc667d8671a178d7d0600779192-0848ba34c0d9afd0a74c33c22ff7fc49.jpg"},14014:function(e,n,t){t.d(n,{Z:function(){return i}});let i=t.p+"assets/images/3cb98ce51325c66ec3f995bf6d96319d-42c0f829eef90a25f9e812577f151232.jpg"},5099:function(e,n,t){t.d(n,{Z:function(){return i}});let i=t.p+"assets/images/52170a3fec321082944d9904d532b1cf-d731886b8b384c28d3d0e0e212ac28bd.jpg"},23009:function(e,n,t){t.d(n,{Z:function(){return i}});let i=t.p+"assets/images/a42761d361813deed0775762a8a2bf22-65ec4ff64a5463a1fc0ccf41fb27f0ab.jpg"},64634:function(e,n,t){t.d(n,{Z:function(){return i}});let i=t.p+"assets/images/e73a6d6c637e29d6af34554f689e8b07-69d344eeab82bb6ca187f8534cb0fa27.jpg"},9869:function(e,n,t){t.d(n,{Z:function(){return i}});let i=t.p+"assets/images/febd41c887cb836369ca768d26d3d3f3-e8fd0c50d7ab50c4dd9a64361b4dcbf7.jpg"},50065:function(e,n,t){t.d(n,{Z:function(){return d},a:function(){return r}});var i=t(67294);let s={},c=i.createContext(s);function r(e){let n=i.useContext(c);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),i.createElement(c.Provider,{value:n},e.children)}},92176:function(e){e.exports=JSON.parse('{"permalink":"/docs-hub/blog/\u53D1\u5E03-docker-\u955C\u50CF\u5230-github-packages","editUrl":"https://github.com/sumingcheng/docs-hub/blog/\u5F00\u53D1\u5DE5\u5177\u4E0E\u73AF\u5883/2024-07-23-\u53D1\u5E03_Docker_\u955C\u50CF\u5230_GitHub_Packages.md","source":"@site/blog/\u5F00\u53D1\u5DE5\u5177\u4E0E\u73AF\u5883/2024-07-23-\u53D1\u5E03_Docker_\u955C\u50CF\u5230_GitHub_Packages.md","title":"\u53D1\u5E03 Docker \u955C\u50CF\u5230 GitHub Packages","description":"1.\u51C6\u5907\u4F60\u7684\u9879\u76EE","date":"2024-07-23T00:00:00.000Z","tags":[{"inline":false,"label":"\u5F00\u53D1\u5DE5\u5177\u4E0E\u73AF\u5883","permalink":"/docs-hub/blog/tags/dev-tools","description":"\u5F00\u53D1\u5DE5\u5177\u548C\u73AF\u5883\u914D\u7F6E\u76F8\u5173\u6587\u7AE0"}],"readingTime":1.8333333333333333,"hasTruncateMarker":false,"authors":[{"name":"\u7D20\u660E\u8BDA","title":"Full stack development","url":"https://github.com/sumingcheng","page":{"permalink":"/docs-hub/blog/authors/sumingcheng"},"socials":{"x":"https://x.com/sumingcheng","github":"https://github.com/sumingcheng"},"imageURL":"https://github.com/user-attachments/assets/9a06bd55-094a-4efc-91c3-d1b92236822f","key":"sumingcheng"}],"frontMatter":{"slug":"\u53D1\u5E03-docker-\u955C\u50CF\u5230-github-packages","title":"\u53D1\u5E03 Docker \u955C\u50CF\u5230 GitHub Packages","authors":["sumingcheng"],"tags":["dev-tools"],"date":"2024-07-23T00:00:00.000Z"},"unlisted":false,"prevItem":{"title":"Git tag \u521B\u5EFA\u63D0\u4EA4\u5220\u9664","permalink":"/docs-hub/blog/git-tag-\u521B\u5EFA\u63D0\u4EA4\u5220\u9664"},"nextItem":{"title":"Go strconv \u5305\u7684\u4E3B\u8981\u529F\u80FD","permalink":"/docs-hub/blog/go-strconv-\u5305\u7684\u4E3B\u8981\u529F\u80FD"}}')}}]);