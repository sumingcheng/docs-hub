"use strict";(self.webpackChunknote_book=self.webpackChunknote_book||[]).push([["86227"],{57830:function(e,n,o){o.r(n),o.d(n,{default:()=>a,frontMatter:()=>d,metadata:()=>s,assets:()=>r,toc:()=>i,contentTitle:()=>l});var s=JSON.parse('{"id":"Frontend/DOM/\u9F20\u6807\u884C\u4E3A-pageXY\u5C01\u88C5-\u62D6\u62FD\u51FD\u6570\u5C01\u88C5","title":"\u9F20\u6807\u884C\u4E3A-pageXY\u5C01\u88C5-\u62D6\u62FD\u51FD\u6570\u5C01\u88C5","description":"\u597D\u7684,\u6211\u5DF2\u7ECF\u9605\u8BFB\u4E86\u4F60\u63D0\u4F9B\u7684\u6587\u6863\u5185\u5BB9,\u63A5\u4E0B\u6765\u6211\u5C06\u6309\u7167\u4F60\u7684\u8981\u6C42\u5BF9\u6587\u6863\u8FDB\u884C\u4FEE\u6539\u548C\u6DA6\u8272\u3002","source":"@site/docs/Frontend/DOM/80.\u9F20\u6807\u884C\u4E3A-pageXY\u5C01\u88C5-\u62D6\u62FD\u51FD\u6570\u5C01\u88C5.md","sourceDirName":"Frontend/DOM","slug":"/Frontend/DOM/\u9F20\u6807\u884C\u4E3A-pageXY\u5C01\u88C5-\u62D6\u62FD\u51FD\u6570\u5C01\u88C5","permalink":"/docs-hub/Frontend/DOM/\u9F20\u6807\u884C\u4E3A-pageXY\u5C01\u88C5-\u62D6\u62FD\u51FD\u6570\u5C01\u88C5","draft":false,"unlisted":false,"editUrl":"https://github.com/sumingcheng/docs-hub/edit/main/docs/Frontend/DOM/80.\u9F20\u6807\u884C\u4E3A-pageXY\u5C01\u88C5-\u62D6\u62FD\u51FD\u6570\u5C01\u88C5.md","tags":[],"version":"current","lastUpdatedBy":"sumingcheng","lastUpdatedAt":1734249440000,"sidebarPosition":80,"frontMatter":{},"sidebar":"domSidebar","previous":{"title":"\u5192\u6CE1\u6355\u83B7\u6D41-\u4E8B\u4EF6\u4E0E\u4E8B\u4EF6\u6E90\u5BF9\u8C61-\u4E8B\u4EF6\u59D4\u6258","permalink":"/docs-hub/Frontend/DOM/\u5192\u6CE1\u6355\u83B7\u6D41-\u4E8B\u4EF6\u4E0E\u4E8B\u4EF6\u6E90\u5BF9\u8C61-\u4E8B\u4EF6\u59D4\u6258"},"next":{"title":"\u9F20\u6807\u4E8B\u4EF6\u4E0E\u5143\u7D20\u62D6\u62FD","permalink":"/docs-hub/Frontend/DOM/\u9F20\u6807\u4E8B\u4EF6\u6DF1\u5165-\u70B9\u51FB\u4E0E\u62D6\u62FD\u5206\u79BB-\u53CC\u51FB\u4E8B\u4EF6"}}'),t=o("85893"),c=o("50065");let d={},l="\u9F20\u6807\u884C\u4E3A\u4E0E\u62D6\u62FD\u51FD\u6570\u5C01\u88C5",r={},i=[{value:"\u9F20\u6807\u5750\u6807\u7CFB",id:"\u9F20\u6807\u5750\u6807\u7CFB",level:2},{value:"\u5C01\u88C5 pageX/Y",id:"\u5C01\u88C5-pagexy",level:2},{value:"\u5B9E\u73B0\u62D6\u62FD\u529F\u80FD",id:"\u5B9E\u73B0\u62D6\u62FD\u529F\u80FD",level:2},{value:"\u5C01\u88C5\u62D6\u62FD\u51FD\u6570",id:"\u5C01\u88C5\u62D6\u62FD\u51FD\u6570",level:2}];function p(e){let n={code:"code",h1:"h1",h2:"h2",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",...(0,c.a)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.p,{children:"\u597D\u7684,\u6211\u5DF2\u7ECF\u9605\u8BFB\u4E86\u4F60\u63D0\u4F9B\u7684\u6587\u6863\u5185\u5BB9,\u63A5\u4E0B\u6765\u6211\u5C06\u6309\u7167\u4F60\u7684\u8981\u6C42\u5BF9\u6587\u6863\u8FDB\u884C\u4FEE\u6539\u548C\u6DA6\u8272\u3002"}),"\n",(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"\u9F20\u6807\u884C\u4E3A\u4E0E\u62D6\u62FD\u51FD\u6570\u5C01\u88C5",children:"\u9F20\u6807\u884C\u4E3A\u4E0E\u62D6\u62FD\u51FD\u6570\u5C01\u88C5"})}),"\n",(0,t.jsxs)(n.p,{children:["\u5728\u524D\u7AEF\u5F00\u53D1\u4E2D,\u6211\u4EEC\u7ECF\u5E38\u9700\u8981\u5904\u7406\u9F20\u6807\u884C\u4E3A,\u4F8B\u5982\u83B7\u53D6\u9F20\u6807\u4F4D\u7F6E\u3001\u5B9E\u73B0\u5143\u7D20\u62D6\u62FD\u7B49\u3002\u672C\u6587\u5C06\u4ECB\u7ECD\u51E0\u79CD\u5E38\u89C1\u7684\u9F20\u6807\u5750\u6807\u7CFB,\u5E76\u5C01\u88C5\u4E00\u4E9B\u5B9E\u7528\u7684\u51FD\u6570,\u5982\u83B7\u53D6\u9F20\u6807\u5728\u6587\u6863\u4E2D\u7684\u4F4D\u7F6E",(0,t.jsx)(n.code,{children:"pageX/Y"}),"\u4EE5\u53CA\u901A\u7528\u7684\u5143\u7D20\u62D6\u62FD\u51FD\u6570\u3002"]}),"\n",(0,t.jsx)(n.h2,{id:"\u9F20\u6807\u5750\u6807\u7CFB",children:"\u9F20\u6807\u5750\u6807\u7CFB"}),"\n",(0,t.jsxs)(n.p,{children:["\u5728\u5904\u7406\u9F20\u6807\u4E8B\u4EF6\u65F6,\u6211\u4EEC\u53EF\u4EE5\u901A\u8FC7\u4E8B\u4EF6\u5BF9\u8C61",(0,t.jsx)(n.code,{children:"e"}),"\u83B7\u53D6\u9F20\u6807\u7684\u4F4D\u7F6E\u4FE1\u606F\u3002\u5E38\u89C1\u7684\u9F20\u6807\u5750\u6807\u7CFB\u6709\u4EE5\u4E0B\u51E0\u79CD:"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"e.clientX/Y"}),":\u9F20\u6807\u4F4D\u7F6E\u76F8\u5BF9\u4E8E\u5F53\u524D\u53EF\u89C6\u533A\u57DF\u7684\u5750\u6807,\u4E0D\u5305\u62EC\u6EDA\u52A8\u6761\u7684\u8DDD\u79BB\u3002"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"e.pageX/Y"}),":\u9F20\u6807\u4F4D\u7F6E\u76F8\u5BF9\u4E8E\u5F53\u524D\u6587\u6863\u7684\u5750\u6807,\u5305\u542B\u6EDA\u52A8\u6761\u7684\u8DDD\u79BB\u3002",(0,t.jsx)(n.code,{children:"IE9"}),"\u4EE5\u4E0B\u4E0D\u652F\u6301\u3002"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"e.screenX/Y"}),":\u9F20\u6807\u4F4D\u7F6E\u76F8\u5BF9\u4E8E\u5F53\u524D\u5C4F\u5E55\u7684\u5750\u6807\u3002"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"e.x/y"}),":\u4E0E",(0,t.jsx)(n.code,{children:"clientX/Y"}),"\u76F8\u540C,\u4F46\u706B\u72D0\u6D4F\u89C8\u5668\u4E0D\u652F\u6301",(0,t.jsx)(n.code,{children:"e.y"}),"\u3002"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"e.layerX/Y"}),":\u4E0E",(0,t.jsx)(n.code,{children:"pageX/Y"}),"\u76F8\u540C,\u4F46",(0,t.jsx)(n.code,{children:"IE11"}),"\u4EE5\u4E0B\u4E0E",(0,t.jsx)(n.code,{children:"clientX/Y"}),"\u76F8\u540C\u3002"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"e.offsetX/Y"}),":\u9F20\u6807\u4F4D\u7F6E\u76F8\u5BF9\u4E8E\u5F53\u524D\u5757\u5143\u7D20\u7684\u5750\u6807,\u5305\u542B\u8FB9\u6846\u3002\u4F46",(0,t.jsx)(n.code,{children:"Safari"}),"\u4E0D\u5305\u542B\u8FB9\u6846\u3002"]}),"\n",(0,t.jsx)(n.h2,{id:"\u5C01\u88C5-pagexy",children:"\u5C01\u88C5 pageX/Y"}),"\n",(0,t.jsxs)(n.p,{children:["\u7531\u4E8E",(0,t.jsx)(n.code,{children:"pageX/Y"}),"\u5728\u4F4E\u7248\u672C IE \u4E2D\u4E0D\u652F\u6301,\u6211\u4EEC\u53EF\u4EE5\u5C01\u88C5\u4E00\u4E2A\u517C\u5BB9\u6027\u7684\u51FD\u6570\u6765\u83B7\u53D6:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-javascript",children:"function pagePos(e) {\n  var scrollLeft = getScrollOffset().left;\n  var scrollTop = getScrollOffset().top;\n  var clientLeft = document.documentElement.clientLeft || 0;\n  var clientTop = document.documentElement.clientTop || 0;\n\n  return {\n    X: e.clientX + scrollLeft - clientLeft,\n    Y: e.clientY + scrollTop - clientTop,\n  };\n}\n\nfunction getScrollOffset() {\n  if (window.pageXOffset) {\n    return {\n      left: window.pageXOffset,\n      top: window.pageYOffset,\n    };\n  } else {\n    return {\n      left: document.body.scrollLeft + document.documentElement.scrollLeft,\n      top: document.body.scrollTop + document.documentElement.scrollTop,\n    };\n  }\n}\n"})}),"\n",(0,t.jsxs)(n.p,{children:["\u4E0A\u9762\u7684",(0,t.jsx)(n.code,{children:"pagePos"}),"\u51FD\u6570\u63A5\u6536\u4E00\u4E2A\u4E8B\u4EF6\u5BF9\u8C61",(0,t.jsx)(n.code,{children:"e"}),",\u8FD4\u56DE\u4E00\u4E2A\u5305\u542B",(0,t.jsx)(n.code,{children:"X"}),"\u548C",(0,t.jsx)(n.code,{children:"Y"}),"\u5C5E\u6027\u7684\u5BF9\u8C61,\u8868\u793A\u9F20\u6807\u5728\u6587\u6863\u4E2D\u7684\u4F4D\u7F6E\u3002\u5B83\u7684\u5B9E\u73B0\u539F\u7406\u662F\u7528",(0,t.jsx)(n.code,{children:"clientX/Y"}),"\u52A0\u4E0A\u6EDA\u52A8\u8DDD\u79BB,\u518D\u51CF\u53BB",(0,t.jsx)(n.code,{children:"clientLeft/Top"}),"\u3002"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"getScrollOffset"}),"\u51FD\u6570\u7528\u4E8E\u83B7\u53D6\u6587\u6863\u7684\u6EDA\u52A8\u8DDD\u79BB,\u5B83\u4F18\u5148\u4F7F\u7528",(0,t.jsx)(n.code,{children:"window.pageXOffset/pageYOffset"}),",\u5982\u679C\u4E0D\u652F\u6301\u5219\u4F7F\u7528",(0,t.jsx)(n.code,{children:"scrollLeft/Top"}),"\u3002"]}),"\n",(0,t.jsx)(n.h2,{id:"\u5B9E\u73B0\u62D6\u62FD\u529F\u80FD",children:"\u5B9E\u73B0\u62D6\u62FD\u529F\u80FD"}),"\n",(0,t.jsxs)(n.p,{children:["\u6709\u4E86",(0,t.jsx)(n.code,{children:"pageX/Y"}),",\u6211\u4EEC\u5C31\u53EF\u4EE5\u8F7B\u677E\u5B9E\u73B0\u5143\u7D20\u7684\u62D6\u62FD\u529F\u80FD\u4E86\u3002\u57FA\u672C\u601D\u8DEF\u5982\u4E0B:"]}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\u5728",(0,t.jsx)(n.code,{children:"mousedown"}),"\u4E8B\u4EF6\u4E2D,\u8BB0\u5F55\u5143\u7D20\u5F53\u524D\u4F4D\u7F6E\u4E0E\u9F20\u6807\u4F4D\u7F6E\u7684\u504F\u79FB\u91CF\u3002"]}),"\n",(0,t.jsxs)(n.li,{children:["\u5728",(0,t.jsx)(n.code,{children:"mousemove"}),"\u4E8B\u4EF6\u4E2D,\u6839\u636E\u9F20\u6807\u65B0\u4F4D\u7F6E\u548C\u504F\u79FB\u91CF\u8BA1\u7B97\u5143\u7D20\u7684\u65B0\u4F4D\u7F6E\u3002"]}),"\n",(0,t.jsxs)(n.li,{children:["\u5728",(0,t.jsx)(n.code,{children:"mouseup"}),"\u4E8B\u4EF6\u4E2D,\u79FB\u9664",(0,t.jsx)(n.code,{children:"mousemove"}),"\u548C",(0,t.jsx)(n.code,{children:"mouseup"}),"\u4E8B\u4EF6\u76D1\u542C\u3002"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"\u793A\u4F8B\u4EE3\u7801"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-html",children:"<div class=\"box\"></div>\n<script>\n  var box = document.querySelector('.box');\n  var offsetX, offsetY;\n\n  box.addEventListener('mousedown', function (e) {\n    var boxLeft = parseInt(getComputedStyle(box).left);\n    var boxTop = parseInt(getComputedStyle(box).top);\n    offsetX = pagePos(e).X - boxLeft;\n    offsetY = pagePos(e).Y - boxTop;\n\n    document.addEventListener('mousemove', mouseMove);\n    document.addEventListener('mouseup', mouseUp);\n  });\n\n  function mouseMove(e) {\n    var pageX = pagePos(e).X;\n    var pageY = pagePos(e).Y;\n    box.style.left = pageX - offsetX + 'px';\n    box.style.top = pageY - offsetY + 'px';\n  }\n\n  function mouseUp() {\n    document.removeEventListener('mousemove', mouseMove);\n    document.removeEventListener('mouseup', mouseUp);\n  }\n<\/script>\n"})}),"\n",(0,t.jsxs)(n.p,{children:["\u5728",(0,t.jsx)(n.code,{children:"mousedown"}),"\u4E8B\u4EF6\u5904\u7406\u51FD\u6570\u4E2D,\u6211\u4EEC\u5148\u7528",(0,t.jsx)(n.code,{children:"getComputedStyle"}),"\u83B7\u53D6\u5143\u7D20\u5F53\u524D\u7684",(0,t.jsx)(n.code,{children:"left"}),"\u548C",(0,t.jsx)(n.code,{children:"top"}),"\u503C,\u7136\u540E\u8BA1\u7B97\u51FA\u9F20\u6807\u4F4D\u7F6E\u4E0E\u5143\u7D20\u5DE6\u4E0A\u89D2\u7684\u504F\u79FB\u91CF",(0,t.jsx)(n.code,{children:"offsetX/Y"}),"\u3002"]}),"\n",(0,t.jsxs)(n.p,{children:["\u63A5\u7740\u76D1\u542C",(0,t.jsx)(n.code,{children:"document"}),"\u7684",(0,t.jsx)(n.code,{children:"mousemove"}),"\u548C",(0,t.jsx)(n.code,{children:"mouseup"}),"\u4E8B\u4EF6\u3002\u5728",(0,t.jsx)(n.code,{children:"mousemove"}),"\u56DE\u8C03\u4E2D,\u6839\u636E\u6700\u65B0\u7684\u9F20\u6807\u4F4D\u7F6E",(0,t.jsx)(n.code,{children:"pageX/Y"}),"\u51CF\u53BB\u504F\u79FB\u91CF,\u5F97\u5230\u5143\u7D20\u7684\u65B0\u4F4D\u7F6E\u3002"]}),"\n",(0,t.jsxs)(n.p,{children:["\u5728",(0,t.jsx)(n.code,{children:"mouseup"}),"\u56DE\u8C03\u4E2D,\u8BB0\u5F97\u8981\u79FB\u9664",(0,t.jsx)(n.code,{children:"mousemove"}),"\u548C",(0,t.jsx)(n.code,{children:"mouseup"}),"\u4E8B\u4EF6\u76D1\u542C,\u907F\u514D\u62D6\u62FD\u8FC7\u7A0B\u7ED3\u675F\u540E\u8FD8\u89E6\u53D1\u4E0D\u5FC5\u8981\u7684\u4E8B\u4EF6\u3002"]}),"\n",(0,t.jsx)(n.h2,{id:"\u5C01\u88C5\u62D6\u62FD\u51FD\u6570",children:"\u5C01\u88C5\u62D6\u62FD\u51FD\u6570"}),"\n",(0,t.jsx)(n.p,{children:"\u4E3A\u4E86\u63D0\u9AD8\u4EE3\u7801\u590D\u7528\u6027,\u6211\u4EEC\u53EF\u4EE5\u628A\u62D6\u62FD\u529F\u80FD\u5C01\u88C5\u6210\u4E00\u4E2A\u901A\u7528\u7684\u51FD\u6570:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-javascript",children:"function elemDrag(elem) {\n  var offsetX, offsetY;\n\n  elem.addEventListener('mousedown', function (e) {\n    var elemLeft = parseInt(getComputedStyle(elem).left);\n    var elemTop = parseInt(getComputedStyle(elem).top);\n    offsetX = pagePos(e).X - elemLeft;\n    offsetY = pagePos(e).Y - elemTop;\n\n    document.addEventListener('mousemove', mouseMove);\n    document.addEventListener('mouseup', mouseUp);\n\n    e.stopPropagation();\n    e.preventDefault();\n  });\n\n  function mouseMove(e) {\n    var pageX = pagePos(e).X;\n    var pageY = pagePos(e).Y;\n    elem.style.left = pageX - offsetX + 'px';\n    elem.style.top = pageY - offsetY + 'px';\n  }\n\n  function mouseUp() {\n    document.removeEventListener('mousemove', mouseMove);\n    document.removeEventListener('mouseup', mouseUp);\n  }\n}\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"elemDrag"}),"\u51FD\u6570\u63A5\u6536\u4E00\u4E2A DOM \u5143\u7D20\u4F5C\u4E3A\u53C2\u6570,\u4E3A\u8BE5\u5143\u7D20\u6DFB\u52A0\u62D6\u62FD\u529F\u80FD\u3002\u5B83\u7684\u5B9E\u73B0\u4E0E\u524D\u9762\u7684\u793A\u4F8B\u4EE3\u7801\u7C7B\u4F3C,\u53EA\u662F\u4F7F\u7528\u4E86\u66F4\u8BED\u4E49\u5316\u7684\u53D8\u91CF\u540D\u3002"]}),"\n",(0,t.jsxs)(n.p,{children:["\u6B64\u5916,\u5728",(0,t.jsx)(n.code,{children:"mousedown"}),"\u4E8B\u4EF6\u6700\u540E,\u6211\u4EEC\u8C03\u7528\u4E86",(0,t.jsx)(n.code,{children:"stopPropagation"}),"\u548C",(0,t.jsx)(n.code,{children:"preventDefault"}),"\u65B9\u6CD5,\u963B\u6B62\u4E8B\u4EF6\u5192\u6CE1\u548C\u9ED8\u8BA4\u884C\u4E3A,\u907F\u514D\u62D6\u62FD\u8FC7\u7A0B\u4E2D\u89E6\u53D1\u5176\u4ED6\u4E0D\u76F8\u5173\u7684\u4E8B\u4EF6\u3002"]}),"\n",(0,t.jsxs)(n.p,{children:["\u4F7F\u7528\u5C01\u88C5\u597D\u7684",(0,t.jsx)(n.code,{children:"elemDrag"}),"\u51FD\u6570,\u6211\u4EEC\u53EF\u4EE5\u65B9\u4FBF\u5730\u4E3A\u4EFB\u610F\u5143\u7D20\u6DFB\u52A0\u62D6\u62FD\u529F\u80FD:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-javascript",children:"var box1 = document.getElementById('box1');\nvar box2 = document.getElementById('box2');\nelemDrag(box1);\nelemDrag(box2);\n"})})]})}function a(e={}){let{wrapper:n}={...(0,c.a)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(p,{...e})}):p(e)}},50065:function(e,n,o){o.d(n,{Z:function(){return l},a:function(){return d}});var s=o(67294);let t={},c=s.createContext(t);function d(e){let n=s.useContext(c);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:d(e.components),s.createElement(c.Provider,{value:n},e.children)}}}]);