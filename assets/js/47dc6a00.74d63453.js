"use strict";(self.webpackChunknote_book=self.webpackChunknote_book||[]).push([["59888"],{47067:function(e,n,t){t.r(n),t.d(n,{assets:function(){return r},contentTitle:function(){return d},default:function(){return p},frontMatter:function(){return l},metadata:function(){return i},toc:function(){return a}});var i=t(27491),c=t(85893),o=t(50065);let l={slug:"\u4EC0\u4E48\u662F-keep-alive",title:"\u4EC0\u4E48\u662F keep-alive",authors:["sumingcheng"],tags:["frontend"],date:new Date("2023-02-26T00:00:00.000Z")},d="\u4EC0\u4E48\u662F keep-alive",r={authorsImageUrls:[void 0]},a=[{value:"\u52A8\u6001/\u5F02\u6B65\u7EC4\u4EF6",id:"\u52A8\u6001\u5F02\u6B65\u7EC4\u4EF6",level:2},{value:"\u5F02\u6B65\u7EC4\u4EF6",id:"\u5F02\u6B65\u7EC4\u4EF6",level:2},{value:"\u52A8\u6001\u7EC4\u4EF6",id:"\u52A8\u6001\u7EC4\u4EF6",level:2},{value:"keep-alive\u4F7F\u7528",id:"keep-alive\u4F7F\u7528",level:2},{value:"keep-alive\u7684\u539F\u7406",id:"keep-alive\u7684\u539F\u7406",level:2},{value:"keep-alive\u5C5E\u6027",id:"keep-alive\u5C5E\u6027",level:2},{value:"exclude",id:"exclude",level:2},{value:"include",id:"include",level:2},{value:"max",id:"max",level:2},{value:"\u6B63\u5219\u5339\u914D",id:"\u6B63\u5219\u5339\u914D",level:2},{value:"bug",id:"bug",level:2},{value:"keep-alive\u5B9E\u73B0",id:"keep-alive\u5B9E\u73B0",level:2}];function s(e){let n={code:"code",h2:"h2",li:"li",ol:"ol",p:"p",pre:"pre",...(0,o.a)(),...e.components};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.code,{children:"keep-alive"})," \u662F Vue.js \u4E2D\u7684\u4E00\u4E2A\u5185\u7F6E\u7EC4\u4EF6\uFF0C\u7528\u4E8E\u7F13\u5B58\u7EC4\u4EF6\u5B9E\u4F8B\u3002\u5F53\u7EC4\u4EF6\u88AB\u5305\u88F9\u5728 ",(0,c.jsx)(n.code,{children:"keep-alive"})," \u7EC4\u4EF6\u4E2D\u65F6\uFF0C\u8BE5\u7EC4\u4EF6\u4E0D\u4F1A\u88AB\u9500\u6BC1\uFF0C\u800C\u662F\u88AB\u7F13\u5B58\u8D77\u6765\uFF0C\u76F4\u5230\u7F13\u5B58\u88AB\u6E05\u9664\u6216\u7EC4\u4EF6\u88AB\u6FC0\u6D3B\u91CD\u65B0\u6E32\u67D3\u3002\u8FD9\u6837\u53EF\u4EE5\u63D0\u9AD8\u7EC4\u4EF6\u7684\u6E32\u67D3\u6548\u7387\uFF0C\u51CF\u5C11\u4E0D\u5FC5\u8981\u7684\u6027\u80FD\u5F00\u9500\u3002"]}),"\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.code,{children:"keep-alive"})," \u7EC4\u4EF6\u63D0\u4F9B\u4E86 ",(0,c.jsx)(n.code,{children:"include"})," \u548C ",(0,c.jsx)(n.code,{children:"exclude"})," \u4E24\u4E2A\u5C5E\u6027\uFF0C\u7528\u4E8E\u6307\u5B9A\u9700\u8981\u7F13\u5B58\u7684\u7EC4\u4EF6\u548C\u9700\u8981\u6392\u9664\u7684\u7EC4\u4EF6\u3002\u540C\u65F6\u8FD8\u63D0\u4F9B\u4E86\u4E00\u4E9B\u751F\u547D\u5468\u671F\u94A9\u5B50\u51FD\u6570\uFF0C\u7528\u4E8E\u5728\u7F13\u5B58\u7EC4\u4EF6\u7684\u8FC7\u7A0B\u4E2D\u8FDB\u884C\u4E00\u4E9B\u989D\u5916\u7684\u64CD\u4F5C\uFF0C\u4F8B\u5982\u6FC0\u6D3B\u7F13\u5B58\u7EC4\u4EF6\u65F6\u81EA\u52A8\u66F4\u65B0\u6570\u636E\u3002"]}),"\n",(0,c.jsxs)(n.p,{children:["\u9700\u8981\u6CE8\u610F\u7684\u662F\uFF0C",(0,c.jsx)(n.code,{children:"keep-alive"})," \u7EC4\u4EF6\u53EA\u80FD\u7F13\u5B58\u6709\u72B6\u6001\u7684\u7EC4\u4EF6\uFF0C\u5373\u5E26\u6709 ",(0,c.jsx)(n.code,{children:"data"})," \u5C5E\u6027\u7684\u7EC4\u4EF6\u3002\u540C\u65F6\uFF0C\u88AB\u7F13\u5B58\u7684\u7EC4\u4EF6\u53EF\u80FD\u4F1A\u56E0\u4E3A\u7F13\u5B58\u800C\u5E26\u6765\u4E00\u4E9B\u526F\u4F5C\u7528\uFF0C\u4F8B\u5982\u7F13\u5B58\u7684\u7EC4\u4EF6\u4F1A\u4FDD\u7559\u4E4B\u524D\u7684\u72B6\u6001\uFF0C\u5982\u679C\u6CA1\u6709\u53CA\u65F6\u66F4\u65B0\u53EF\u80FD\u4F1A\u5BFC\u81F4\u4E00\u4E9B\u95EE\u9898\uFF0C\u56E0\u6B64\u9700\u8981\u6839\u636E\u5177\u4F53\u7684\u573A\u666F\u8FDB\u884C\u4F7F\u7528\u548C\u7BA1\u7406\u3002"]}),"\n",(0,c.jsx)(n.h2,{id:"\u52A8\u6001\u5F02\u6B65\u7EC4\u4EF6",children:"\u52A8\u6001/\u5F02\u6B65\u7EC4\u4EF6"}),"\n",(0,c.jsx)(n.h2,{id:"\u5F02\u6B65\u7EC4\u4EF6",children:"\u5F02\u6B65\u7EC4\u4EF6"}),"\n",(0,c.jsxs)(n.ol,{children:["\n",(0,c.jsx)(n.li,{children:"\u5F02\u6B65\u7EC4\u4EF6\u4F1A\u88AB\u5206\u5272\u6210\u4EE3\u7801\u5757\u6587\u4EF6"}),"\n",(0,c.jsxs)(n.li,{children:["\u6309\u9700\u4ECE\u670D\u52A1\u5668\u4E0A\u4E0B\u8F7D\u7EC4\u4EF6",(0,c.jsx)(n.code,{children:"xx.js"})]}),"\n"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:"  // Vue2\n  AsyncComp:() => import('./xxx');\n\n  // Vue3\n  import { defineAsyncCompontent } from 'vue';\n  const { defineAsyncCompontent } = 'Vue';\n\n"})}),"\n",(0,c.jsx)(n.h2,{id:"\u52A8\u6001\u7EC4\u4EF6",children:"\u52A8\u6001\u7EC4\u4EF6"}),"\n",(0,c.jsx)(n.p,{children:"\u5728\u4EA4\u4E92\u4E2D\uFF0C\u7EC4\u4EF6\u7684\u6E32\u67D3\u662F\u4E0D\u786E\u5B9A\u7684\uFF0C\u6839\u636E\u4EA4\u4E92\u7684\u64CD\u4F5C\u6765\u51B3\u5B9A\u6E32\u67D3\u54EA\u4E2A\u7EC4\u4EF6"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:"<component :is=\"\"></component>\n<template>\n  <div class=\"login-tab\">\n    <div class=\"login-nav\">\n      <div\n        v-for=\"tab of tabData\"\n        :key=\"tab\"\n        :class=\"['nav-item', { active: currentTab === tab }]\"\n        @click=\"changeTab(tab)\"\n      >{{ tab }}</div>\n    </div>\n    <div class=\"login-component\">\n      <keep-alive>\n        <component :is=\"currentTabComponent\"></component>\n      </keep-alive>\n    </div>\n  </div>\n</template>\n\u200B\n<script>\nimport AccountLogin from './AccountLogin';\n\u200B\nexport default {\n  name: 'MainLogin',\n  components: {\n    AccountLogin,\n    QrcodeLogin: () => import('./QrcodeLogin'),\n    MobileLogin: () => import('./MobileLogin')\n  },\n  data () {\n    return {\n      currentTab: 'Account',\n      tabData: ['Account', 'Qrcode', 'Mobile']\n    }\n  },\n  methods: {\n    changeTab (tab) {\n      this.currentTab = tab;\n    }\n  },\n  computed: {\n    // \u62FC\u51FA\u6765\u7EC4\u4EF6\u540D\n    currentTabComponent () {\n      return this.currentTab.toLowerCase() + '-login';\n    }\n  }\n}\n<\/script>\n\n"})}),"\n",(0,c.jsx)(n.h2,{id:"keep-alive\u4F7F\u7528",children:"keep-alive\u4F7F\u7528"}),"\n",(0,c.jsxs)(n.p,{children:["\u88AB",(0,c.jsx)(n.code,{children:"keep-alive"}),"\u5305\u88F9\u7684\u7EC4\u4EF6\uFF0C\u7EC4\u4EF6\u5207\u6362\u65F6\u4F1A\u7F13\u5B58\u7EC4\u4EF6\uFF0C\u4FDD\u6301\u7EC4\u4EF6\u7684\u72B6\u6001\uFF0C\u907F\u514D\u53CD\u590D\u6E32\u67D3\u5BFC\u81F4\u6027\u80FD\u95EE\u9898"]}),"\n",(0,c.jsxs)(n.ol,{children:["\n",(0,c.jsx)(n.li,{children:"vDOM\uFF1AVirtual DOM"}),"\n",(0,c.jsx)(n.li,{children:"vNode\uFF1AVirtual Node"}),"\n",(0,c.jsx)(n.li,{children:"rDOM\uFF1AReal DOM"}),"\n",(0,c.jsx)(n.li,{children:"rNode\uFF1AReal Node"}),"\n"]}),"\n",(0,c.jsx)(n.h2,{id:"keep-alive\u7684\u539F\u7406",children:"keep-alive\u7684\u539F\u7406"}),"\n",(0,c.jsxs)(n.ol,{children:["\n",(0,c.jsx)(n.li,{children:"\u7528\u6237\u64CD\u4F5C\u89C6\u56FE\uFF0C\u89C6\u56FE\u53D8\u5316\uFF0C\u5F71\u54CD\u7EC4\u4EF6\u663E\u793A\u53D8\u5316"}),"\n",(0,c.jsxs)(n.li,{children:["\u88AB",(0,c.jsx)(n.code,{children:"keep-alive"}),"\u5305\u88F9\u7684\u7EC4\u4EF6\u4F1A\u7F13\u5B58\u7EC4\u4EF6\u7684",(0,c.jsx)(n.code,{children:"vNode"})]}),"\n",(0,c.jsxs)(n.li,{children:["\u6709\u73B0\u6210\u7684",(0,c.jsx)(n.code,{children:"vNode"}),"\u5C31\u7528\u73B0\u6210\u7684",(0,c.jsx)(n.code,{children:"vNode"}),"\u6765\u66F4\u65B0",(0,c.jsx)(n.code,{children:"DOM"})]}),"\n",(0,c.jsxs)(n.li,{children:["\u8FD9\u79CD\u66F4\u65B0\u4E0D\u7ECF\u8FC7",(0,c.jsx)(n.code,{children:"unmounted"}),"\uFF0C\u518D\u6B21\u8FDB\u5165\u4E5F\u4E0D\u4F1A\u8D70",(0,c.jsx)(n.code,{children:"mounted"})]}),"\n",(0,c.jsxs)(n.li,{children:["\u4F7F\u7528",(0,c.jsx)(n.code,{children:"activated"}),"\u4EE3\u66FF",(0,c.jsx)(n.code,{children:"mounted"}),"\uFF0C\u4F7F\u7528",(0,c.jsx)(n.code,{children:"deactivated"}),"\u4EE3\u66FF",(0,c.jsx)(n.code,{children:"unmounted"})]}),"\n"]}),"\n",(0,c.jsx)(n.h2,{id:"keep-alive\u5C5E\u6027",children:"keep-alive\u5C5E\u6027"}),"\n",(0,c.jsxs)(n.p,{children:["\u6B63\u5E38\u5339\u914D\u7EC4\u4EF6\u7684",(0,c.jsx)(n.code,{children:"name"}),"\u5C5E\u6027\u6216\u5982\u679C\u6CA1\u6709\u5C31\u5339\u914D\u5C40\u90E8\u6CE8\u518C\u7EC4\u4EF6\u540D\u79F0"]}),"\n",(0,c.jsx)(n.h2,{id:"exclude",children:"exclude"}),"\n",(0,c.jsx)(n.p,{children:"\u6392\u9664\u67D0\u4E2A\u7EC4\u4EF6"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:'<keep-alive exclude="List,Intro">\n  <component :is="currentComponent"></component>\n</keep-alive>\n'})}),"\n",(0,c.jsx)(n.h2,{id:"include",children:"include"}),"\n",(0,c.jsx)(n.p,{children:"\u5141\u8BB8\u67D0\u4E2A\u7EC4\u4EF6"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:'<keep-alive include="List,Intro">\n  <component :is="currentComponent"></component>\n</keep-alive>\n'})}),"\n",(0,c.jsx)(n.h2,{id:"max",children:"max"}),"\n",(0,c.jsx)(n.p,{children:"\u6700\u591A\u7F13\u5B58\u51E0\u4E2A\u7EC4\u4EF6"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:'<keep-alive :max="5">\n  \x3c!-- \u9700\u8981\u7F13\u5B58\u7684\u7EC4\u4EF6 --\x3e\n</keep-alive>\n'})}),"\n",(0,c.jsx)(n.h2,{id:"\u6B63\u5219\u5339\u914D",children:"\u6B63\u5219\u5339\u914D"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:'<keep-alive :include="/n|c/">\n    <component :is="currentComponent"></component>\n</keep-alive>\n'})}),"\n",(0,c.jsx)(n.h2,{id:"bug",children:"bug"}),"\n",(0,c.jsxs)(n.p,{children:["\u5F02\u6B65\u7EC4\u4EF6\u4E0D\u80FD\u4F7F\u7528",(0,c.jsx)(n.code,{children:"include"}),"\uFF0C\u7F13\u5B58\u4E86\u4F46\u662F\u6CA1\u529E\u6CD5\u6B63\u786E\u663E\u793A\u3002\u5F02\u6B65\u7EC4\u4EF6\u8BF7\u4F7F\u7528",(0,c.jsx)(n.code,{children:"exclude"})]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:'<keep-alive include="List">\n  <component :is="currentComponent"></component>\n</keep-alive>\n'})}),"\n",(0,c.jsx)(n.h2,{id:"keep-alive\u5B9E\u73B0",children:"keep-alive\u5B9E\u73B0"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:"import comp1 from './components/Comp1';\nimport comp2 from './components/Comp2';\nimport comp3 from './components/Comp3';\n\u200B\nconst oButtons = document.getElementById('buttons');\nconst oWrapper = document.getElementById('wrapper');\n\u200B\nconst App = {\n  components: {\n    comp1,\n    comp2,\n    comp3\n  },\n  compCache: {},\n  init() {\n    this.bindEvent();\n  },\n  mounted(callback) {\n    callback && callback();\n  },\n  activated(callback) {\n    callback && callback();\n  },\n  bindEvent() {\n    oButtons.addEventListener('click', this.handleBtnClick.bind(this), false);\n  },\n  handleBtnClick(e) {\n    const tar = e.target,\n        tagName = tar.tagName.toLowerCase();\n\u200B\n    if (tagName === 'span') {\n      const key = tar.dataset.key;\n\u200B\n      let vNode = null;\n\u200B\n      if (this.compCache[key]) {\n        vNode = this.compCache[key];\n      } else {\n        vNode = this.setVNode(this.components[key]);\n\u200B\n        if (this.checkKeepAlive(oWrapper)) {\n          this.compCache[key] = vNode;\n        }\n      }\n\u200B\n      const rNode = this.setRNode(vNode);\n      oWrapper.innerHTML = '';\n      oWrapper.appendChild(rNode);\n\u200B\n      if (this.checkKeepAlive(oWrapper)) {\n        this.activated(() => {\n          console.log(key, 'activated');\n        });\n      } else {\n        this.mounted(() => {\n          console.log(key, 'mounted');\n        });\n      }\n    }\n  },\n  setVNode(comp) {\n    const { template, name } = comp;\n\u200B\n    const regTag = template.match(/\\<(.+?)\\>/)[1],\n        regContent = template.match(/\\>(.+?)\\</)[1];\n\u200B\n    return {\n      tag: regTag,\n      children: regContent,\n      mark: name\n    };\n  },\n\u200B\n  setRNode(vNode) {\n    const tag = vNode.tag;\n    const content = vNode.children;\n\u200B\n    const node = document.createElement(tag);\n    node.innerText = content;\n\u200B\n    return node;\n  },\n\u200B\n  checkKeepAlive(wrapper) {\n    const outerWrapper = wrapper.parentNode.tagName.toLowerCase();\n    return outerWrapper === 'keep-alive';\n  }\n};\n\u200B\nApp.init();\n\n"})})]})}function p(e={}){let{wrapper:n}={...(0,o.a)(),...e.components};return n?(0,c.jsx)(n,{...e,children:(0,c.jsx)(s,{...e})}):s(e)}},50065:function(e,n,t){t.d(n,{Z:function(){return d},a:function(){return l}});var i=t(67294);let c={},o=i.createContext(c);function l(e){let n=i.useContext(o);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(c):e.components||c:l(e.components),i.createElement(o.Provider,{value:n},e.children)}},27491:function(e){e.exports=JSON.parse('{"permalink":"/docs-hub/blog/\u4EC0\u4E48\u662F-keep-alive","editUrl":"https://github.com/sumingcheng/docs-hub/blog/\u524D\u7AEF/2023-02-26-\u4EC0\u4E48\u662F_keep-alive.md","source":"@site/blog/\u524D\u7AEF/2023-02-26-\u4EC0\u4E48\u662F_keep-alive.md","title":"\u4EC0\u4E48\u662F keep-alive","description":"keep-alive \u662F Vue.js \u4E2D\u7684\u4E00\u4E2A\u5185\u7F6E\u7EC4\u4EF6\uFF0C\u7528\u4E8E\u7F13\u5B58\u7EC4\u4EF6\u5B9E\u4F8B\u3002\u5F53\u7EC4\u4EF6\u88AB\u5305\u88F9\u5728 keep-alive \u7EC4\u4EF6\u4E2D\u65F6\uFF0C\u8BE5\u7EC4\u4EF6\u4E0D\u4F1A\u88AB\u9500\u6BC1\uFF0C\u800C\u662F\u88AB\u7F13\u5B58\u8D77\u6765\uFF0C\u76F4\u5230\u7F13\u5B58\u88AB\u6E05\u9664\u6216\u7EC4\u4EF6\u88AB\u6FC0\u6D3B\u91CD\u65B0\u6E32\u67D3\u3002\u8FD9\u6837\u53EF\u4EE5\u63D0\u9AD8\u7EC4\u4EF6\u7684\u6E32\u67D3\u6548\u7387\uFF0C\u51CF\u5C11\u4E0D\u5FC5\u8981\u7684\u6027\u80FD\u5F00\u9500\u3002","date":"2023-02-26T00:00:00.000Z","tags":[{"inline":false,"label":"\u524D\u7AEF","permalink":"/docs-hub/blog/tags/frontend","description":"\u524D\u7AEF\u5F00\u53D1\u6280\u672F\u6587\u7AE0"}],"readingTime":3.1166666666666667,"hasTruncateMarker":false,"authors":[{"name":"\u7D20\u660E\u8BDA","title":"Full stack development","url":"https://github.com/sumingcheng","page":{"permalink":"/docs-hub/blog/authors/sumingcheng"},"socials":{"x":"https://x.com/sumingcheng","github":"https://github.com/sumingcheng"},"imageURL":"https://github.com/user-attachments/assets/9a06bd55-094a-4efc-91c3-d1b92236822f","key":"sumingcheng"}],"frontMatter":{"slug":"\u4EC0\u4E48\u662F-keep-alive","title":"\u4EC0\u4E48\u662F keep-alive","authors":["sumingcheng"],"tags":["frontend"],"date":"2023-02-26T00:00:00.000Z"},"unlisted":false,"prevItem":{"title":"vue scoped  \u7684\u539F\u7406","permalink":"/docs-hub/blog/vue-scoped--\u7684\u539F\u7406"},"nextItem":{"title":"Nodejs \u548C\u6D4F\u89C8\u5668\u7684\u4E8B\u4EF6\u5FAA\u73AF\u6709\u54EA\u4E9B\u4E0D\u540C","permalink":"/docs-hub/blog/nodejs-\u548C\u6D4F\u89C8\u5668\u7684\u4E8B\u4EF6\u5FAA\u73AF\u6709\u54EA\u4E9B\u4E0D\u540C"}}')}}]);