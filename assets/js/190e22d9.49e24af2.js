"use strict";(self.webpackChunknote_book=self.webpackChunknote_book||[]).push([["3744"],{99689:function(e,n,a){a.r(n),a.d(n,{default:()=>f,frontMatter:()=>o,metadata:()=>r,assets:()=>c,toc:()=>d,contentTitle:()=>l});var r=JSON.parse('{"id":"Backend/MQ/Go-Kafka\u5B89\u88C5\u4F7F\u7528\u6307\u5357","title":"Go \u8BED\u8A00\u4E2D\u4F7F\u7528 Kafka \u7684\u5B89\u88C5\u548C\u4F7F\u7528\u6307\u5357","description":"\u73AF\u5883\u51C6\u5907","source":"@site/docs/Backend/MQ/10.Go-Kafka\u5B89\u88C5\u4F7F\u7528\u6307\u5357.md","sourceDirName":"Backend/MQ","slug":"/Backend/MQ/Go-Kafka\u5B89\u88C5\u4F7F\u7528\u6307\u5357","permalink":"/docs-hub/Backend/MQ/Go-Kafka\u5B89\u88C5\u4F7F\u7528\u6307\u5357","draft":false,"unlisted":false,"editUrl":"https://github.com/sumingcheng/docs-hub/edit/main/docs/Backend/MQ/10.Go-Kafka\u5B89\u88C5\u4F7F\u7528\u6307\u5357.md","tags":[],"version":"current","lastUpdatedBy":"sumingcheng","lastUpdatedAt":1734262986000,"sidebarPosition":10,"frontMatter":{},"sidebar":"mqSidebar"}'),s=a("85893"),i=a("50065");let o={},l="Go \u8BED\u8A00\u4E2D\u4F7F\u7528 Kafka \u7684\u5B89\u88C5\u548C\u4F7F\u7528\u6307\u5357",c={},d=[{value:"\u73AF\u5883\u51C6\u5907",id:"\u73AF\u5883\u51C6\u5907",level:2},{value:"\u7CFB\u7EDF\u8981\u6C42",id:"\u7CFB\u7EDF\u8981\u6C42",level:3},{value:"\u5B89\u88C5\u524D\u7684\u6CE8\u610F\u4E8B\u9879",id:"\u5B89\u88C5\u524D\u7684\u6CE8\u610F\u4E8B\u9879",level:3},{value:"\u5B89\u88C5 Kafka",id:"\u5B89\u88C5-kafka",level:2},{value:"\u4E0B\u8F7D Kafka",id:"\u4E0B\u8F7D-kafka",level:3},{value:"\u89E3\u538B Kafka",id:"\u89E3\u538B-kafka",level:3},{value:"\u542F\u52A8 Kafka \u670D\u52A1",id:"\u542F\u52A8-kafka-\u670D\u52A1",level:3},{value:"\u4F7F\u7528 Go \u8BED\u8A00\u8FDE\u63A5 Kafka",id:"\u4F7F\u7528-go-\u8BED\u8A00\u8FDE\u63A5-kafka",level:2},{value:"\u5B89\u88C5 Kafka \u7684 Go \u5BA2\u6237\u7AEF",id:"\u5B89\u88C5-kafka-\u7684-go-\u5BA2\u6237\u7AEF",level:3},{value:"\u7F16\u5199\u751F\u4EA7\u8005\u4EE3\u7801",id:"\u7F16\u5199\u751F\u4EA7\u8005\u4EE3\u7801",level:3},{value:"\u7F16\u5199\u6D88\u8D39\u8005\u4EE3\u7801",id:"\u7F16\u5199\u6D88\u8D39\u8005\u4EE3\u7801",level:3},{value:"\u8FD0\u884C\u4EE3\u7801",id:"\u8FD0\u884C\u4EE3\u7801",level:3},{value:"\u6D4B\u8BD5 Kafka",id:"\u6D4B\u8BD5-kafka",level:2}];function t(e){let n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,i.a)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"go-\u8BED\u8A00\u4E2D\u4F7F\u7528-kafka-\u7684\u5B89\u88C5\u548C\u4F7F\u7528\u6307\u5357",children:"Go \u8BED\u8A00\u4E2D\u4F7F\u7528 Kafka \u7684\u5B89\u88C5\u548C\u4F7F\u7528\u6307\u5357"})}),"\n",(0,s.jsx)(n.h2,{id:"\u73AF\u5883\u51C6\u5907",children:"\u73AF\u5883\u51C6\u5907"}),"\n",(0,s.jsx)(n.h3,{id:"\u7CFB\u7EDF\u8981\u6C42",children:"\u7CFB\u7EDF\u8981\u6C42"}),"\n",(0,s.jsx)(n.p,{children:"\u5728 Go \u8BED\u8A00\u4E2D\u4F7F\u7528 Kafka \u9700\u8981\u4EE5\u4E0B\u73AF\u5883\uFF1A"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u4E00\u53F0\u8FD0\u884C Linux\u3001macOS \u6216 Windows \u64CD\u4F5C\u7CFB\u7EDF\u7684\u8BA1\u7B97\u673A\u3002"}),"\n",(0,s.jsxs)(n.li,{children:["\u5B89\u88C5 Go \u8BED\u8A00\u73AF\u5883\uFF0C\u7248\u672C\u4E3A 1.16 \u6216\u66F4\u9AD8\u3002\u53EF\u4EE5\u901A\u8FC7 ",(0,s.jsx)(n.code,{children:"go version"})," \u547D\u4EE4\u9A8C\u8BC1\u3002"]}),"\n",(0,s.jsx)(n.li,{children:"\u5B89\u88C5 Kafka\uFF0C\u7248\u672C\u4E3A 2.8 \u6216\u66F4\u9AD8\u3002"}),"\n",(0,s.jsxs)(n.li,{children:["\u5B89\u88C5 Java \u8FD0\u884C\u73AF\u5883\uFF0C\u7248\u672C\u4E3A Java 8 \u6216\u66F4\u9AD8\u3002Kafka \u4F9D\u8D56\u4E8E Java\uFF0C\u53EF\u4EE5\u901A\u8FC7 ",(0,s.jsx)(n.code,{children:"java -version"})," \u547D\u4EE4\u9A8C\u8BC1\u3002"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"\u5982\u679C\u672A\u5B89\u88C5 Java\uFF0C\u8BF7\u5148\u5B89\u88C5 Java 8 \u6216\u66F4\u9AD8\u7248\u672C\u3002"}),"\n",(0,s.jsx)(n.h3,{id:"\u5B89\u88C5\u524D\u7684\u6CE8\u610F\u4E8B\u9879",children:"\u5B89\u88C5\u524D\u7684\u6CE8\u610F\u4E8B\u9879"}),"\n",(0,s.jsx)(n.p,{children:"\u786E\u4FDD\u5DF2\u6B63\u786E\u5B89\u88C5 Go \u8BED\u8A00\u548C Java \u8FD0\u884C\u73AF\u5883\uFF0C\u4EE5\u907F\u514D\u540E\u7EED\u5B89\u88C5\u548C\u914D\u7F6E\u8FC7\u7A0B\u4E2D\u51FA\u73B0\u95EE\u9898\u3002"}),"\n",(0,s.jsx)(n.h2,{id:"\u5B89\u88C5-kafka",children:"\u5B89\u88C5 Kafka"}),"\n",(0,s.jsx)(n.h3,{id:"\u4E0B\u8F7D-kafka",children:"\u4E0B\u8F7D Kafka"}),"\n",(0,s.jsxs)(n.p,{children:["\u8BBF\u95EE Kafka \u7684 ",(0,s.jsx)(n.a,{href:"https://kafka.apache.org/downloads",children:"\u5B98\u65B9\u7F51\u7AD9"}),"\uFF0C\u4E0B\u8F7D\u9002\u7528\u4E8E\u64CD\u4F5C\u7CFB\u7EDF\u7684 Kafka \u4E8C\u8FDB\u5236\u6587\u4EF6\u3002"]}),"\n",(0,s.jsx)(n.h3,{id:"\u89E3\u538B-kafka",children:"\u89E3\u538B Kafka"}),"\n",(0,s.jsx)(n.p,{children:"\u4E0B\u8F7D\u5B8C\u6210\u540E\uFF0C\u89E3\u538B\u7F29\u6587\u4EF6\u3002\u6587\u4EF6\u540D\u53EF\u80FD\u56E0\u7248\u672C\u4E0D\u540C\u800C\u6709\u6240\u53D8\u5316\uFF1A"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"tar -zxvf kafka_2.13-2.8.0.tgz\n"})}),"\n",(0,s.jsx)(n.h3,{id:"\u542F\u52A8-kafka-\u670D\u52A1",children:"\u542F\u52A8 Kafka \u670D\u52A1"}),"\n",(0,s.jsx)(n.p,{children:"\u8FDB\u5165 Kafka \u76EE\u5F55\u540E\uFF0C\u9996\u5148\u542F\u52A8 ZooKeeper \u670D\u52A1\uFF1A"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"cd kafka_2.13-2.8.0\nbin/zookeeper-server-start.sh config/zookeeper.properties\n"})}),"\n",(0,s.jsx)(n.p,{children:"\u786E\u4FDD ZooKeeper \u670D\u52A1\u5DF2\u6210\u529F\u542F\u52A8\u540E\uFF0C\u5F00\u542F Kafka \u670D\u52A1\u3002\u5EFA\u8BAE\u5728\u4E0D\u540C\u7684\u7EC8\u7AEF\u7A97\u53E3\u4E2D\u5206\u522B\u8FD0\u884C ZooKeeper \u548C Kafka \u670D\u52A1\uFF1A"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"bin/kafka-server-start.sh config/server.properties\n"})}),"\n",(0,s.jsx)(n.h2,{id:"\u4F7F\u7528-go-\u8BED\u8A00\u8FDE\u63A5-kafka",children:"\u4F7F\u7528 Go \u8BED\u8A00\u8FDE\u63A5 Kafka"}),"\n",(0,s.jsx)(n.h3,{id:"\u5B89\u88C5-kafka-\u7684-go-\u5BA2\u6237\u7AEF",children:"\u5B89\u88C5 Kafka \u7684 Go \u5BA2\u6237\u7AEF"}),"\n",(0,s.jsx)(n.p,{children:"\u9009\u62E9 Sarama \u4F5C\u4E3A Kafka \u7684 Go \u5BA2\u6237\u7AEF\uFF0C\u4F7F\u7528\u4EE5\u4E0B\u547D\u4EE4\u8FDB\u884C\u5B89\u88C5\uFF1A"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"go get github.com/Shopify/sarama\n"})}),"\n",(0,s.jsx)(n.h3,{id:"\u7F16\u5199\u751F\u4EA7\u8005\u4EE3\u7801",children:"\u7F16\u5199\u751F\u4EA7\u8005\u4EE3\u7801"}),"\n",(0,s.jsxs)(n.p,{children:["\u521B\u5EFA ",(0,s.jsx)(n.code,{children:"producer.go"})," \u6587\u4EF6\uFF0C\u7F16\u5199\u4EE5\u4E0B\u4EE3\u7801\uFF1A"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-go",children:'package main\n\nimport (\n    "fmt"\n    "github.com/Shopify/sarama"\n)\n\nfunc main() {\n    config := sarama.NewConfig()\n    config.Producer.Return.Successes = true\n\n    producer, err := sarama.NewSyncProducer([]string{"localhost:9092"}, config)\n    if err != nil {\n        fmt.Printf("\u521B\u5EFA\u751F\u4EA7\u8005\u5931\u8D25: %v\\n", err)\n        return\n    }\n    defer producer.Close()\n\n    message := &sarama.ProducerMessage{\n        Topic: "sumingcheng",\n        Value: sarama.StringEncoder("Hello Kafka from Go!"),\n    }\n\n    partition, offset, err := producer.SendMessage(message)\n    if err != nil {\n        fmt.Printf("\u53D1\u9001\u6D88\u606F\u5931\u8D25: %v\\n", err)\n        return\n    }\n\n    fmt.Printf("\u6D88\u606F\u5DF2\u5B58\u50A8\u5230\u5206\u533A %d\uFF0C\u504F\u79FB\u91CF %d\\n", partition, offset)\n}\n'})}),"\n",(0,s.jsxs)(n.p,{children:["\u5728\u5B9E\u9645\u5E94\u7528\u4E2D\uFF0C\u5E94\u66FF\u6362 ",(0,s.jsx)(n.code,{children:"fmt.Printf"})," \u4E3A\u9002\u5F53\u7684\u65E5\u5FD7\u8BB0\u5F55\u673A\u5236\uFF0C\u4EE5\u589E\u5F3A\u7A0B\u5E8F\u7684\u5065\u58EE\u6027\u3002"]}),"\n",(0,s.jsx)(n.h3,{id:"\u7F16\u5199\u6D88\u8D39\u8005\u4EE3\u7801",children:"\u7F16\u5199\u6D88\u8D39\u8005\u4EE3\u7801"}),"\n",(0,s.jsxs)(n.p,{children:["\u521B\u5EFA ",(0,s.jsx)(n.code,{children:"consumer.go"})," \u6587\u4EF6\uFF0C\u7F16\u5199\u4EE5\u4E0B\u4EE3\u7801\uFF1A"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-go",children:'package main\n\nimport (\n    "fmt"\n    "github.com/Shopify/sarama"\n)\n\nfunc main() {\n    consumer, err := sarama.NewConsumer([]string{"localhost:9092"}, nil)\n    if err != nil {\n        fmt.Printf("\u521B\u5EFA\u6D88\u8D39\u8005\u5931\u8D25: %v\\n", err)\n        return\n    }\n    defer consumer.Close()\n\n    partitionConsumer, err := consumer.ConsumePartition("sumingcheng", 0, sarama.OffsetNewest)\n    if err != nil {\n        fmt.Printf("\u8BA2\u9605\u5206\u533A\u5931\u8D25: %v\\n", err)\n        return\n    }\n    defer partitionConsumer.Close()\n\n    for message := range partitionConsumer.Messages() {\n        fmt.Printf("\u6536\u5230\u6D88\u606F\uFF1A%s\\n", string(message.Value))\n    }\n}\n'})}),"\n",(0,s.jsx)(n.p,{children:"\u6B64\u793A\u4F8B\u8BA2\u9605\u4E86\u4E3B\u9898\u7684\u5206\u533A 0\u3002\u5728\u5B9E\u9645\u5E94\u7528\u4E2D\uFF0C\u53EF\u4EE5\u6839\u636E\u9700\u6C42\u8BA2\u9605\u4E0D\u540C\u5206\u533A\u6216\u4F7F\u7528\u6D88\u8D39\u8005\u7EC4\u4EE5\u5B9E\u73B0\u8D1F\u8F7D\u5747\u8861\u3002"}),"\n",(0,s.jsx)(n.h3,{id:"\u8FD0\u884C\u4EE3\u7801",children:"\u8FD0\u884C\u4EE3\u7801"}),"\n",(0,s.jsx)(n.p,{children:"\u5728\u7EC8\u7AEF\u4E2D\u8FD0\u884C\u751F\u4EA7\u8005\uFF1A"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"go run producer.go\n"})}),"\n",(0,s.jsx)(n.p,{children:"\u5728\u53E6\u4E00\u4E2A\u7EC8\u7AEF\u4E2D\u8FD0\u884C\u6D88\u8D39\u8005\uFF1A"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"go run consumer.go\n"})}),"\n",(0,s.jsx)(n.h2,{id:"\u6D4B\u8BD5-kafka",children:"\u6D4B\u8BD5 Kafka"}),"\n",(0,s.jsx)(n.p,{children:"\u53D1\u9001\u6D88\u606F\u540E\uFF0C\u6D88\u8D39\u8005\u7EC8\u7AEF\u5E94\u663E\u793A\uFF1A"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"\u6536\u5230\u6D88\u606F\uFF1AHello Kafka from Go!\n"})})]})}function f(e={}){let{wrapper:n}={...(0,i.a)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(t,{...e})}):t(e)}},50065:function(e,n,a){a.d(n,{Z:function(){return l},a:function(){return o}});var r=a(67294);let s={},i=r.createContext(s);function o(e){let n=r.useContext(i);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),r.createElement(i.Provider,{value:n},e.children)}}}]);