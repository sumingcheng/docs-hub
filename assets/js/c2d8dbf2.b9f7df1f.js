"use strict";(self.webpackChunknote_book=self.webpackChunknote_book||[]).push([[89754],{25677:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>c,default:()=>m,frontMatter:()=>l,metadata:()=>o,toc:()=>r});const o=JSON.parse('{"id":"Frontend/DOM/\u9f20\u6807\u4e8b\u4ef6\u6df1\u5165-\u70b9\u51fb\u4e0e\u62d6\u62fd\u5206\u79bb-\u53cc\u51fb\u4e8b\u4ef6","title":"\u9f20\u6807\u4e8b\u4ef6\u4e0e\u5143\u7d20\u62d6\u62fd","description":"\u89e6\u53d1\u987a\u5e8f","source":"@site/docs/Frontend/DOM/90.\u9f20\u6807\u4e8b\u4ef6\u6df1\u5165-\u70b9\u51fb\u4e0e\u62d6\u62fd\u5206\u79bb-\u53cc\u51fb\u4e8b\u4ef6.md","sourceDirName":"Frontend/DOM","slug":"/Frontend/DOM/\u9f20\u6807\u4e8b\u4ef6\u6df1\u5165-\u70b9\u51fb\u4e0e\u62d6\u62fd\u5206\u79bb-\u53cc\u51fb\u4e8b\u4ef6","permalink":"/docs-hub/Frontend/DOM/\u9f20\u6807\u4e8b\u4ef6\u6df1\u5165-\u70b9\u51fb\u4e0e\u62d6\u62fd\u5206\u79bb-\u53cc\u51fb\u4e8b\u4ef6","draft":false,"unlisted":false,"editUrl":"https://github.com/sumingcheng/docs-hub/edit/main/docs/Frontend/DOM/90.\u9f20\u6807\u4e8b\u4ef6\u6df1\u5165-\u70b9\u51fb\u4e0e\u62d6\u62fd\u5206\u79bb-\u53cc\u51fb\u4e8b\u4ef6.md","tags":[],"version":"current","lastUpdatedBy":"sumingcheng","lastUpdatedAt":1733910367000,"sidebarPosition":90,"frontMatter":{},"sidebar":"domSidebar","previous":{"title":"\u9f20\u6807\u884c\u4e3a-pageXY\u5c01\u88c5-\u62d6\u62fd\u51fd\u6570\u5c01\u88c5","permalink":"/docs-hub/Frontend/DOM/\u9f20\u6807\u884c\u4e3a-pageXY\u5c01\u88c5-\u62d6\u62fd\u51fd\u6570\u5c01\u88c5"},"next":{"title":"\u6df1\u5165\u7406\u89e3 element.innerHTML","permalink":"/docs-hub/Frontend/DOM/innerHTML"}}');var s=t(74848),i=t(28453);const l={},c="\u9f20\u6807\u4e8b\u4ef6\u4e0e\u5143\u7d20\u62d6\u62fd",d={},r=[{value:"\u89e6\u53d1\u987a\u5e8f",id:"\u89e6\u53d1\u987a\u5e8f",level:2},{value:"\u5c01\u88c5\u63d2\u4ef6\uff0c\u5b9e\u73b0\u5143\u7d20\u62d6\u62fd",id:"\u5c01\u88c5\u63d2\u4ef6\u5b9e\u73b0\u5143\u7d20\u62d6\u62fd",level:2},{value:"\u5904\u7406\u8fb9\u754c\u95ee\u9898",id:"\u5904\u7406\u8fb9\u754c\u95ee\u9898",level:2},{value:"\u9f20\u6807\u5de6\u4e2d\u53f3",id:"\u9f20\u6807\u5de6\u4e2d\u53f3",level:2},{value:"\u9f20\u6807\u53f3\u952e\u83dc\u5355",id:"\u9f20\u6807\u53f3\u952e\u83dc\u5355",level:2}];function a(e){const n={code:"code",h1:"h1",h2:"h2",header:"header",img:"img",p:"p",pre:"pre",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"\u9f20\u6807\u4e8b\u4ef6\u4e0e\u5143\u7d20\u62d6\u62fd",children:"\u9f20\u6807\u4e8b\u4ef6\u4e0e\u5143\u7d20\u62d6\u62fd"})}),"\n",(0,s.jsx)(n.h2,{id:"\u89e6\u53d1\u987a\u5e8f",children:"\u89e6\u53d1\u987a\u5e8f"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"onmousedown"})," \u548c ",(0,s.jsx)(n.code,{children:"onmouseup"})," \u4e8b\u4ef6\u7684\u7ec4\u5408\u4f1a\u89e6\u53d1 ",(0,s.jsx)(n.code,{children:"click"})," \u4e8b\u4ef6\u3002"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"const button = document.getElementsByTagName('button')[0];\n\nbutton.onclick = function () {\n  console.log('click');\n};\n\nbutton.onmousedown = function () {\n  console.log('onmousedown');\n};\n\nbutton.onmouseup = function () {\n  console.log('onmouseup');\n};\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:t(36528).A+"",width:"722",height:"380"})}),"\n",(0,s.jsx)(n.h2,{id:"\u5c01\u88c5\u63d2\u4ef6\u5b9e\u73b0\u5143\u7d20\u62d6\u62fd",children:"\u5c01\u88c5\u63d2\u4ef6\uff0c\u5b9e\u73b0\u5143\u7d20\u62d6\u62fd"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"const link = document.getElementsByTagName('a')[0];\nlink.dragNclick(function () {\n  window.open('http://www.baidu.com');\n});\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"// \u5143\u7d20\u62d6\u62fd\u51fd\u6570\u5c01\u88c5\uff08\u65e0\u8fb9\u754c\uff09\nElement.prototype.dragNclick = function (onClick) {\n  let startTime = 0;\n  let endTime = 0;\n  let initialPos = [];\n  const element = this;\n\n  element.addEventListener('mousedown', function (e) {\n    startTime = new Date().getTime();\n    initialPos = [parseInt(getStyles(element, 'left')), parseInt(getStyles(element, 'top'))];\n    const offsetX = pagePos(e).X - parseInt(getStyles(element, 'left'));\n    const offsetY = pagePos(e).Y - parseInt(getStyles(element, 'top'));\n\n    function onMouseMove(eMove) {\n      element.style.left = `${pagePos(eMove).X - offsetX}px`;\n      element.style.top = `${pagePos(eMove).Y - offsetY}px`;\n    }\n\n    function onMouseUp(eUp) {\n      endTime = new Date().getTime();\n      if (endTime - startTime < 100) {\n        element.style.left = `${initialPos[0]}px`;\n        element.style.top = `${initialPos[1]}px`;\n        onClick();\n      }\n      document.removeEventListener('mousemove', onMouseMove);\n      document.removeEventListener('mouseup', onMouseUp);\n    }\n\n    document.addEventListener('mousemove', onMouseMove);\n    document.addEventListener('mouseup', onMouseUp);\n    e.stopPropagation();\n    e.preventDefault();\n  });\n};\n"})}),"\n",(0,s.jsx)(n.h2,{id:"\u5904\u7406\u8fb9\u754c\u95ee\u9898",children:"\u5904\u7406\u8fb9\u754c\u95ee\u9898"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"Element.prototype.dragNclick = function (onClick) {\n  const element = this;\n  let startTime = 0;\n  let endTime = 0;\n  let initialPos = [];\n  const viewportWidth = getViewPortSize().width;\n  const viewportHeight = getViewPortSize().height;\n  const elementWidth = parseInt(getStyles(element, 'width'));\n  const elementHeight = parseInt(getStyles(element, 'height'));\n\n  element.addEventListener('mousedown', function (e) {\n    startTime = new Date().getTime();\n    initialPos = [parseInt(getStyles(element, 'left')), parseInt(getStyles(element, 'top'))];\n    const offsetX = pagePos(e).X - parseInt(getStyles(element, 'left'));\n    const offsetY = pagePos(e).Y - parseInt(getStyles(element, 'top'));\n\n    function onMouseMove(eMove) {\n      let newLeft = pagePos(eMove).X - offsetX;\n      let newTop = pagePos(eMove).Y - offsetY;\n\n      if (newLeft <= 0) {\n        newLeft = 0;\n      } else if (newLeft >= viewportWidth - elementWidth) {\n        newLeft = viewportWidth - elementWidth - 1;\n      }\n\n      if (newTop <= 0) {\n        newTop = 0;\n      } else if (newTop >= viewportHeight - elementHeight) {\n        newTop = viewportHeight - elementHeight - 1;\n      }\n\n      element.style.left = `${newLeft}px`;\n      element.style.top = `${newTop}px`;\n    }\n\n    function onMouseUp(eUp) {\n      endTime = new Date().getTime();\n      if (endTime - startTime < 100) {\n        element.style.left = `${initialPos[0]}px`;\n        element.style.top = `${initialPos[1]}px`;\n        onClick();\n      }\n      document.removeEventListener('mousemove', onMouseMove);\n      document.removeEventListener('mouseup', onMouseUp);\n    }\n\n    document.addEventListener('mousemove', onMouseMove);\n    document.addEventListener('mouseup', onMouseUp);\n    e.stopPropagation();\n    e.preventDefault();\n  });\n};\n"})}),"\n",(0,s.jsx)(n.h2,{id:"\u9f20\u6807\u5de6\u4e2d\u53f3",children:"\u9f20\u6807\u5de6\u4e2d\u53f3"}),"\n",(0,s.jsxs)(n.p,{children:["\u9f20\u6807\u7684\u4e09\u4e2a\u6309\u952e\u5206\u522b\u5bf9\u5e94 ",(0,s.jsx)(n.code,{children:"0"}),"\u3001",(0,s.jsx)(n.code,{children:"1"})," \u548c ",(0,s.jsx)(n.code,{children:"2"}),"\u3002\u5f00\u53d1\u53f3\u952e\u76f8\u5173\u529f\u80fd\u65f6\uff0c\u9700\u786e\u4fdd\u6d4f\u89c8\u5668\u7248\u672c\u5728 ",(0,s.jsx)(n.code,{children:"IE10"})," \u4ee5\u4e0a\u3002"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"document.onmousedown = function (e) {\n  console.log(e.button);\n};\n"})}),"\n",(0,s.jsx)(n.h2,{id:"\u9f20\u6807\u53f3\u952e\u83dc\u5355",children:"\u9f20\u6807\u53f3\u952e\u83dc\u5355"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"document.addEventListener('contextmenu', function (e) {\n  e.preventDefault();\n  console.log('\u53f3\u952e\u83dc\u5355\u88ab\u89e6\u53d1');\n  // \u5728\u6b64\u5904\u6dfb\u52a0\u81ea\u5b9a\u4e49\u53f3\u952e\u83dc\u5355\u903b\u8f91\n});\n"})})]})}function m(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(a,{...e})}):a(e)}},36528:(e,n,t)=>{t.d(n,{A:()=>o});const o=t.p+"assets/images/802f4f6b619c862d42812222418f042c-318c77082930c0a6e626be325e5dbd96.png"},28453:(e,n,t)=>{t.d(n,{R:()=>l,x:()=>c});var o=t(96540);const s={},i=o.createContext(s);function l(e){const n=o.useContext(i);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:l(e.components),o.createElement(i.Provider,{value:n},e.children)}}}]);