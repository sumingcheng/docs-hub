"use strict";(self.webpackChunknote_book=self.webpackChunknote_book||[]).push([["84382"],{43920:function(e,n,s){s.r(n),s.d(n,{default:()=>a,frontMatter:()=>c,metadata:()=>r,assets:()=>t,toc:()=>l,contentTitle:()=>d});var r=JSON.parse('{"id":"Frontend/JavaScript/Promise/\u7406\u89E3Promises-A-\u89C4\u8303","title":"\u5B9E\u73B0\u7B80\u5355\u7684 Promise","description":"Promises/A+","source":"@site/docs/Frontend/JavaScript/Promise/10.\u7406\u89E3Promises-A-\u89C4\u8303.md","sourceDirName":"Frontend/JavaScript/Promise","slug":"/Frontend/JavaScript/Promise/\u7406\u89E3Promises-A-\u89C4\u8303","permalink":"/docs-hub/Frontend/JavaScript/Promise/\u7406\u89E3Promises-A-\u89C4\u8303","draft":false,"unlisted":false,"editUrl":"https://github.com/sumingcheng/docs-hub/edit/main/docs/Frontend/JavaScript/Promise/10.\u7406\u89E3Promises-A-\u89C4\u8303.md","tags":[],"version":"current","lastUpdatedBy":"sumingcheng","lastUpdatedAt":1734260240000,"sidebarPosition":10,"frontMatter":{},"sidebar":"javascriptSidebar","previous":{"title":"Promise","permalink":"/docs-hub/category/promise"},"next":{"title":"Promise \u5B9E\u73B0\u4E0E\u94FE\u5F0F\u8C03\u7528","permalink":"/docs-hub/Frontend/JavaScript/Promise/\u5904\u7406Promise\u4E2D\u7684\u5F02\u6B65\u548C\u94FE\u5F0F\u8C03\u7528"}}'),o=s("85893"),i=s("50065");let c={},d="\u5B9E\u73B0\u7B80\u5355\u7684 Promise",t={},l=[{value:"\u5B89\u88C5 nodemon",id:"\u5B89\u88C5-nodemon",level:2},{value:"\u5B9E\u73B0\u7B80\u5355\u7684 Promise",id:"\u5B9E\u73B0\u7B80\u5355\u7684-promise-1",level:2},{value:"\u4EE3\u7801\u89E3\u6790",id:"\u4EE3\u7801\u89E3\u6790",level:3},{value:"\u4F7F\u7528\u793A\u4F8B",id:"\u4F7F\u7528\u793A\u4F8B",level:3},{value:"\u6CE8\u610F\u4E8B\u9879",id:"\u6CE8\u610F\u4E8B\u9879",level:3}];function h(e){let n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.a)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"\u5B9E\u73B0\u7B80\u5355\u7684-promise",children:"\u5B9E\u73B0\u7B80\u5355\u7684 Promise"})}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.a,{href:"https://promisesaplus.com/",children:"Promises/A+"})}),"\n",(0,o.jsx)(n.h2,{id:"\u5B89\u88C5-nodemon",children:"\u5B89\u88C5 nodemon"}),"\n",(0,o.jsxs)(n.p,{children:["\u4E3A\u4E86\u4FBF\u4E8E\u5728\u5F00\u53D1\u8FC7\u7A0B\u4E2D\u81EA\u52A8\u91CD\u542F Node.js \u5E94\u7528\u7A0B\u5E8F\uFF0C\u5EFA\u8BAE\u5B89\u88C5 ",(0,o.jsx)(n.code,{children:"nodemon"}),"\u3002"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"npm install -g nodemon\n"})}),"\n",(0,o.jsx)(n.h2,{id:"\u5B9E\u73B0\u7B80\u5355\u7684-promise-1",children:"\u5B9E\u73B0\u7B80\u5355\u7684 Promise"}),"\n",(0,o.jsxs)(n.p,{children:["\u4E0B\u9762\u662F\u4E00\u4E2A\u7B80\u5316\u7248\u7684 ",(0,o.jsx)(n.code,{children:"Promise"})," \u5B9E\u73B0\uFF0C\u65E8\u5728\u5E2E\u52A9\u7406\u89E3 ",(0,o.jsx)(n.code,{children:"Promise"})," \u7684\u57FA\u672C\u5DE5\u4F5C\u539F\u7406\u3002"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-javascript",children:"const PENDING = 'PENDING';\nconst FULFILLED = 'FULFILLED';\nconst REJECTED = 'REJECTED';\n\nclass MyPromise {\n  constructor(executor) {\n    this.status = PENDING;\n    this.value = undefined;\n    this.reason = undefined;\n\n    const resolve = (value) => {\n      if (this.status === PENDING) {\n        this.status = FULFILLED;\n        this.value = value;\n      }\n    };\n\n    const reject = (reason) => {\n      if (this.status === PENDING) {\n        this.status = REJECTED;\n        this.reason = reason;\n      }\n    };\n\n    try {\n      executor(resolve, reject);\n    } catch (error) {\n      reject(error);\n    }\n  }\n\n  then(onFulfilled, onRejected) {\n    if (this.status === FULFILLED) {\n      onFulfilled(this.value);\n    }\n    if (this.status === REJECTED) {\n      onRejected(this.reason);\n    }\n  }\n}\n\nconst promise = new MyPromise((resolve, reject) => {\n  throw new Error('Exception: Error');\n  // resolve('\u6210\u529F');\n});\n\npromise.then(\n  (value) => {\n    console.log(value);\n  },\n  (reason) => {\n    console.log(reason);\n  }\n);\n"})}),"\n",(0,o.jsx)(n.h3,{id:"\u4EE3\u7801\u89E3\u6790",children:"\u4EE3\u7801\u89E3\u6790"}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.code,{children:"MyPromise"})," \u7C7B\u6A21\u62DF\u4E86\u539F\u751F ",(0,o.jsx)(n.code,{children:"Promise"})," \u7684\u57FA\u672C\u884C\u4E3A\uFF0C\u5305\u62EC\u72B6\u6001\u7BA1\u7406\u548C ",(0,o.jsx)(n.code,{children:"then"})," \u65B9\u6CD5\u7684\u5B9E\u73B0\u3002"]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"\u72B6\u6001\u7BA1\u7406"}),": ",(0,o.jsx)(n.code,{children:"MyPromise"})," \u6709\u4E09\u4E2A\u72B6\u6001\uFF0C",(0,o.jsx)(n.code,{children:"PENDING"}),"\uFF08\u5F85\u5B9A\uFF09\u3001",(0,o.jsx)(n.code,{children:"FULFILLED"}),"\uFF08\u5DF2\u5151\u73B0\uFF09\u548C ",(0,o.jsx)(n.code,{children:"REJECTED"}),"\uFF08\u5DF2\u62D2\u7EDD\uFF09\u3002\u72B6\u6001\u4E00\u65E6\u4ECE ",(0,o.jsx)(n.code,{children:"PENDING"})," \u53D8\u4E3A ",(0,o.jsx)(n.code,{children:"FULFILLED"})," \u6216 ",(0,o.jsx)(n.code,{children:"REJECTED"}),"\uFF0C\u4FBF\u4E0D\u53EF\u9006\u8F6C\u3002"]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"\u6784\u9020\u51FD\u6570"}),": \u63A5\u53D7\u4E00\u4E2A\u6267\u884C\u5668\u51FD\u6570 ",(0,o.jsx)(n.code,{children:"executor"}),"\uFF0C\u8BE5\u51FD\u6570\u5728\u5B9E\u4F8B\u5316\u65F6\u7ACB\u5373\u6267\u884C\uFF0C\u5E76\u4F20\u5165 ",(0,o.jsx)(n.code,{children:"resolve"})," \u548C ",(0,o.jsx)(n.code,{children:"reject"})," \u4E24\u4E2A\u51FD\u6570\uFF0C\u7528\u4E8E\u6539\u53D8 ",(0,o.jsx)(n.code,{children:"Promise"})," \u7684\u72B6\u6001\u3002"]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsxs)(n.strong,{children:[(0,o.jsx)(n.code,{children:"then"})," \u65B9\u6CD5"]}),": \u6839\u636E\u5F53\u524D ",(0,o.jsx)(n.code,{children:"Promise"})," \u7684\u72B6\u6001\uFF0C\u8C03\u7528\u76F8\u5E94\u7684\u56DE\u8C03\u51FD\u6570 ",(0,o.jsx)(n.code,{children:"onFulfilled"})," \u6216 ",(0,o.jsx)(n.code,{children:"onRejected"}),"\u3002"]}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"\u4F7F\u7528\u793A\u4F8B",children:"\u4F7F\u7528\u793A\u4F8B"}),"\n",(0,o.jsxs)(n.p,{children:["\u5728\u4E0A\u9762\u7684\u793A\u4F8B\u4E2D\uFF0C",(0,o.jsx)(n.code,{children:"MyPromise"})," \u88AB\u5B9E\u4F8B\u5316\u65F6\u6267\u884C\u5668\u51FD\u6570\u629B\u51FA\u4E86\u4E00\u4E2A\u9519\u8BEF\uFF0C\u8FD9\u5C06\u89E6\u53D1 ",(0,o.jsx)(n.code,{children:"reject"})," \u65B9\u6CD5\uFF0C\u6700\u7EC8\u5728 ",(0,o.jsx)(n.code,{children:"then"})," \u65B9\u6CD5\u4E2D\u8C03\u7528 ",(0,o.jsx)(n.code,{children:"onRejected"})," \u56DE\u8C03\uFF0C\u8F93\u51FA\u9519\u8BEF\u4FE1\u606F\u3002"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-javascript",children:"const promise = new MyPromise((resolve, reject) => {\n  throw new Error('Exception: Error');\n  // resolve('\u6210\u529F');\n});\n\npromise.then(\n  (value) => {\n    console.log(value);\n  },\n  (reason) => {\n    console.log(reason);\n  }\n);\n// \u8F93\u51FA: Error: Exception: Error\n"})}),"\n",(0,o.jsx)(n.h3,{id:"\u6CE8\u610F\u4E8B\u9879",children:"\u6CE8\u610F\u4E8B\u9879"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"\u540C\u6B65\u6267\u884C"}),": \u5728\u8FD9\u4E2A\u7B80\u5316\u7684\u5B9E\u73B0\u4E2D\uFF0C",(0,o.jsx)(n.code,{children:"executor"})," \u51FD\u6570\u548C\u56DE\u8C03\u51FD\u6570\u90FD\u662F\u540C\u6B65\u6267\u884C\u7684\u3002\u539F\u751F ",(0,o.jsx)(n.code,{children:"Promise"})," \u652F\u6301\u5F02\u6B65\u64CD\u4F5C\uFF0C\u8FD9\u9700\u8981\u66F4\u590D\u6742\u7684\u5904\u7406\uFF0C\u5982\u4F7F\u7528\u5FAE\u4EFB\u52A1\u961F\u5217\u3002"]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsxs)(n.strong,{children:["\u591A\u6B21\u8C03\u7528 ",(0,o.jsx)(n.code,{children:"then"})]}),": \u5F53\u524D\u5B9E\u73B0\u53EA\u652F\u6301\u5355\u6B21\u8C03\u7528 ",(0,o.jsx)(n.code,{children:"then"})," \u65B9\u6CD5\uFF0C\u539F\u751F ",(0,o.jsx)(n.code,{children:"Promise"})," \u652F\u6301\u94FE\u5F0F\u8C03\u7528\u548C\u591A\u6B21 ",(0,o.jsx)(n.code,{children:"then"}),"\u3002"]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"\u72B6\u6001\u4E0D\u53EF\u9006\u8F6C"}),": \u4E00\u65E6 ",(0,o.jsx)(n.code,{children:"Promise"})," \u7684\u72B6\u6001\u4ECE ",(0,o.jsx)(n.code,{children:"PENDING"})," \u8F6C\u53D8\u4E3A ",(0,o.jsx)(n.code,{children:"FULFILLED"})," \u6216 ",(0,o.jsx)(n.code,{children:"REJECTED"}),"\uFF0C\u5C31\u4E0D\u80FD\u518D\u6B21\u6539\u53D8\u72B6\u6001\u3002"]}),"\n"]}),"\n"]})]})}function a(e={}){let{wrapper:n}={...(0,i.a)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(h,{...e})}):h(e)}},50065:function(e,n,s){s.d(n,{Z:function(){return d},a:function(){return c}});var r=s(67294);let o={},i=r.createContext(o);function c(e){let n=r.useContext(i);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:c(e.components),r.createElement(i.Provider,{value:n},e.children)}}}]);