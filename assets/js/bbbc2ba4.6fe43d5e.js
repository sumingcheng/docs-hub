"use strict";(self.webpackChunknote_book=self.webpackChunknote_book||[]).push([["79424"],{10819:function(e,n,r){r.r(n),r.d(n,{assets:function(){return c},contentTitle:function(){return i},default:function(){return u},frontMatter:function(){return s},metadata:function(){return o},toc:function(){return m}});var o=r(36214),t=r(85893),a=r(50065);let s={slug:"\u76D1\u63A7\u5355\u673Adocker\u5BB9\u5668\u4F7F\u7528cadvisorprometheus\u548Cgrafana",title:"\u76D1\u63A7\u5355\u673ADocker\u5BB9\u5668\u4F7F\u7528cAdvisorPrometheus\u548CGrafana",authors:["sumingcheng"],tags:["dev-tools"],date:new Date("2024-06-21T00:00:00.000Z")},i="\u76D1\u63A7\u5355\u673ADocker\u5BB9\u5668\uFF0C\u4F7F\u7528cAdvisor\u3001Prometheus\u548CGrafana",c={authorsImageUrls:[void 0]},m=[{value:"docker-compose.yml",id:"docker-composeyml",level:2},{value:"prometheus.yml",id:"prometheusyml",level:2},{value:"grafana \u914D\u7F6E",id:"grafana-\u914D\u7F6E",level:2},{value:"\u9762\u677F\u4F7F\u7528",id:"\u9762\u677F\u4F7F\u7528",level:2}];function l(e){let n={a:"a",code:"code",h2:"h2",img:"img",p:"p",pre:"pre",...(0,a.a)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h2,{id:"docker-composeyml",children:"docker-compose.yml"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'services:\n  prometheus:\n    image: prom/prometheus:v2.53.0\n    container_name: prometheus\n    volumes:\n      - ./prometheus.yml:/etc/prometheus/prometheus.yml\n      - prometheus_data:/prometheus\n    ports:\n      - "59090:9090"\n    networks:\n      - monitor-net\n    restart: unless-stopped\n    command:\n      - \'--config.file=/etc/prometheus/prometheus.yml\'\n      - \'--storage.tsdb.path=/prometheus\'\n      - \'--web.enable-lifecycle\'\n    depends_on:\n      - cadvisor\n    logging:\n      driver: json-file\n      options:\n        max-size: "200m"\n        max-file: "10"\n  grafana:\n    image: grafana/grafana:10.4.4\n    container_name: grafana\n    volumes:\n      - grafana_data:/var/lib/grafana\n      - ./grafana.ini:/etc/grafana/grafana.ini #  Grafana \u914D\u7F6E\u6587\u4EF6\n    environment:\n      GF_SECURITY_ADMIN_PASSWORD: admin123456 # \u7BA1\u7406\u5458\u5BC6\u7801\n      GF_USERS_ALLOW_SIGN_UP: "false" # \u7981\u6B62\u7528\u6237\u81EA\u884C\u6CE8\u518C\n    ports:\n      - "53000:3000"\n    networks:\n      - monitor-net\n    restart: unless-stopped\n    depends_on:\n      - prometheus\n    logging:\n      driver: json-file\n      options:\n        max-size: "200m"\n        max-file: "10"\n  cadvisor:\n    image: gcr.io/cadvisor/cadvisor\n    container_name: cadvisor\n    volumes:\n      - /:/rootfs:ro\n      - /var/run:/var/run:rw\n      - /sys:/sys:ro\n      - /var/lib/docker/:/var/lib/docker:ro\n    ports:\n      - "58080:8080"\n    networks:\n      - monitor-net\n    restart: unless-stopped\n    logging:\n      driver: json-file\n      options:\n        max-size: "100m"\n        max-file: "5"\nvolumes:\n  prometheus_data:\n    driver: local\n  grafana_data:\n    driver: local\nnetworks:\n  monitor-net:\n    driver: bridge\n\n'})}),"\n",(0,t.jsx)(n.h2,{id:"prometheusyml",children:"prometheus.yml"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"scrape_configs:\n  - job_name: 'prometheus'\n    static_configs:\n      - targets: ['prometheus:9090'] # \u4F7F\u7528 Docker Compose \u670D\u52A1\u540D\u548C\u5185\u90E8\u7AEF\u53E3\n  - job_name: 'cadvisor'\n    scrape_interval: 5s\n    static_configs:\n      - targets: ['cadvisor:8080'] # \u4F7F\u7528 Docker Compose \u670D\u52A1\u540D\u548C\u5185\u90E8\u7AEF\u53E3\n\n"})}),"\n",(0,t.jsx)(n.h2,{id:"grafana-\u914D\u7F6E",children:"grafana \u914D\u7F6E"}),"\n",(0,t.jsx)(n.p,{children:"\u6DFB\u52A0\u6570\u636E\u6E90\uFF1Aprometheus"}),"\n",(0,t.jsxs)(n.p,{children:["\u8BBE\u7F6E prometheus \u7684 Connection \u4E3A ",(0,t.jsx)(n.a,{href:"http://prometheus:9090",children:"http://prometheus:9090"})," \u4FDD\u5B58"]}),"\n",(0,t.jsx)(n.h2,{id:"\u9762\u677F\u4F7F\u7528",children:"\u9762\u677F\u4F7F\u7528"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"a99b4cb38396d462a5825c43f5c55e8d",src:r(78978).Z+"",width:"1440",height:"641"})})]})}function u(e={}){let{wrapper:n}={...(0,a.a)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(l,{...e})}):l(e)}},78978:function(e,n,r){r.d(n,{Z:function(){return o}});let o=r.p+"assets/images/a99b4cb38396d462a5825c43f5c55e8d-7de67fa3277e137110126aba436c581a.jpg"},50065:function(e,n,r){r.d(n,{Z:function(){return i},a:function(){return s}});var o=r(67294);let t={},a=o.createContext(t);function s(e){let n=o.useContext(a);return o.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:s(e.components),o.createElement(a.Provider,{value:n},e.children)}},36214:function(e){e.exports=JSON.parse('{"permalink":"/docs-hub/blog/\u76D1\u63A7\u5355\u673Adocker\u5BB9\u5668\u4F7F\u7528cadvisorprometheus\u548Cgrafana","editUrl":"https://github.com/sumingcheng/docs-hub/blog/\u5F00\u53D1\u5DE5\u5177\u4E0E\u73AF\u5883/2024-06-21-\u76D1\u63A7\u5355\u673ADocker\u5BB9\u5668\u4F7F\u7528cAdvisorPrometheus\u548CGrafana.md","source":"@site/blog/\u5F00\u53D1\u5DE5\u5177\u4E0E\u73AF\u5883/2024-06-21-\u76D1\u63A7\u5355\u673ADocker\u5BB9\u5668\u4F7F\u7528cAdvisorPrometheus\u548CGrafana.md","title":"\u76D1\u63A7\u5355\u673ADocker\u5BB9\u5668\u4F7F\u7528cAdvisorPrometheus\u548CGrafana","description":"docker-compose.yml","date":"2024-06-21T00:00:00.000Z","tags":[{"inline":false,"label":"\u5F00\u53D1\u5DE5\u5177\u4E0E\u73AF\u5883","permalink":"/docs-hub/blog/tags/dev-tools","description":"\u5F00\u53D1\u5DE5\u5177\u548C\u73AF\u5883\u914D\u7F6E\u76F8\u5173\u6587\u7AE0"}],"readingTime":0.6833333333333333,"hasTruncateMarker":false,"authors":[{"name":"\u7D20\u660E\u8BDA","title":"Full stack development","url":"https://github.com/sumingcheng","page":{"permalink":"/docs-hub/blog/authors/sumingcheng"},"socials":{"x":"https://x.com/sumingcheng","github":"https://github.com/sumingcheng"},"imageURL":"https://github.com/user-attachments/assets/9a06bd55-094a-4efc-91c3-d1b92236822f","key":"sumingcheng"}],"frontMatter":{"slug":"\u76D1\u63A7\u5355\u673Adocker\u5BB9\u5668\u4F7F\u7528cadvisorprometheus\u548Cgrafana","title":"\u76D1\u63A7\u5355\u673ADocker\u5BB9\u5668\u4F7F\u7528cAdvisorPrometheus\u548CGrafana","authors":["sumingcheng"],"tags":["dev-tools"],"date":"2024-06-21T00:00:00.000Z"},"unlisted":false,"prevItem":{"title":"\u5982\u4F55\u7F16\u5199 Go \u8BED\u8A00\u7684\u6027\u80FD\u6D4B\u8BD5","permalink":"/docs-hub/blog/\u5982\u4F55\u7F16\u5199-go-\u8BED\u8A00\u7684\u6027\u80FD\u6D4B\u8BD5"},"nextItem":{"title":"Linux \u547D\u4EE4\u884C\u5B9E\u7528\u7684\u5C0F\u6280\u5DE7","permalink":"/docs-hub/blog/linux-\u547D\u4EE4\u884C\u5B9E\u7528\u7684\u5C0F\u6280\u5DE7"}}')}}]);