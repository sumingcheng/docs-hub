"use strict";(self.webpackChunknote_book=self.webpackChunknote_book||[]).push([["81037"],{15337:function(e,n,l){l.r(n),l.d(n,{default:()=>h,frontMatter:()=>a,metadata:()=>d,assets:()=>o,toc:()=>c,contentTitle:()=>i});var d=JSON.parse('{"id":"Backend/MongoDB/MongoDB\u5B89\u5168\u4E0E\u6743\u9650","title":"MongoDB \u5B89\u5168\u4E0E\u6743\u9650\u7BA1\u7406","description":"\u7528\u6237\u8BA4\u8BC1","source":"@site/docs/Backend/MongoDB/040-MongoDB\u5B89\u5168\u4E0E\u6743\u9650.md","sourceDirName":"Backend/MongoDB","slug":"/Backend/MongoDB/MongoDB\u5B89\u5168\u4E0E\u6743\u9650","permalink":"/docs-hub/Backend/MongoDB/MongoDB\u5B89\u5168\u4E0E\u6743\u9650","draft":false,"unlisted":false,"editUrl":"https://github.com/sumingcheng/docs-hub/edit/main/docs/Backend/MongoDB/040-MongoDB\u5B89\u5168\u4E0E\u6743\u9650.md","tags":[],"version":"current","lastUpdatedBy":"sumingcheng","lastUpdatedAt":1739167030000,"sidebarPosition":40,"frontMatter":{},"sidebar":"mongodbSidebar","previous":{"title":"MongoDB \u805A\u5408\u64CD\u4F5C\u4E0E\u6570\u636E\u5EFA\u6A21","permalink":"/docs-hub/Backend/MongoDB/MongoDB\u805A\u5408\u4E0E\u5EFA\u6A21"}}'),s=l("85893"),r=l("50065");let a={},i="MongoDB \u5B89\u5168\u4E0E\u6743\u9650\u7BA1\u7406",o={},c=[{value:"\u7528\u6237\u8BA4\u8BC1",id:"\u7528\u6237\u8BA4\u8BC1",level:2},{value:"\u521B\u5EFA\u7BA1\u7406\u5458\u7528\u6237",id:"\u521B\u5EFA\u7BA1\u7406\u5458\u7528\u6237",level:3},{value:"\u542F\u7528\u8BA4\u8BC1",id:"\u542F\u7528\u8BA4\u8BC1",level:3},{value:"\u89D2\u8272\u7BA1\u7406",id:"\u89D2\u8272\u7BA1\u7406",level:2},{value:"\u5185\u7F6E\u89D2\u8272",id:"\u5185\u7F6E\u89D2\u8272",level:3},{value:"\u81EA\u5B9A\u4E49\u89D2\u8272",id:"\u81EA\u5B9A\u4E49\u89D2\u8272",level:3},{value:"\u7F51\u7EDC\u5B89\u5168",id:"\u7F51\u7EDC\u5B89\u5168",level:2},{value:"SSL/TLS \u914D\u7F6E",id:"ssltls-\u914D\u7F6E",level:3},{value:"\u9632\u706B\u5899\u8BBE\u7F6E",id:"\u9632\u706B\u5899\u8BBE\u7F6E",level:3},{value:"\u5BA1\u8BA1\u673A\u5236",id:"\u5BA1\u8BA1\u673A\u5236",level:2},{value:"\u5F00\u542F\u5BA1\u8BA1",id:"\u5F00\u542F\u5BA1\u8BA1",level:3},{value:"\u5BA1\u8BA1\u4E8B\u4EF6\u8FC7\u6EE4",id:"\u5BA1\u8BA1\u4E8B\u4EF6\u8FC7\u6EE4",level:3},{value:"\u6570\u636E\u52A0\u5BC6",id:"\u6570\u636E\u52A0\u5BC6",level:2},{value:"\u9759\u6001\u52A0\u5BC6",id:"\u9759\u6001\u52A0\u5BC6",level:3},{value:"\u5B57\u6BB5\u7EA7\u52A0\u5BC6",id:"\u5B57\u6BB5\u7EA7\u52A0\u5BC6",level:3}];function t(e){let n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",...(0,r.a)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"mongodb-\u5B89\u5168\u4E0E\u6743\u9650\u7BA1\u7406",children:"MongoDB \u5B89\u5168\u4E0E\u6743\u9650\u7BA1\u7406"})}),"\n",(0,s.jsx)(n.h2,{id:"\u7528\u6237\u8BA4\u8BC1",children:"\u7528\u6237\u8BA4\u8BC1"}),"\n",(0,s.jsx)(n.h3,{id:"\u521B\u5EFA\u7BA1\u7406\u5458\u7528\u6237",children:"\u521B\u5EFA\u7BA1\u7406\u5458\u7528\u6237"}),"\n",(0,s.jsx)(n.p,{children:"\u5728\u751F\u4EA7\u73AF\u5883\u4E2D\uFF0C\u7B14\u8005\u9996\u5148\u521B\u5EFA\u4E86\u7BA1\u7406\u5458\u7528\u6237\uFF1A"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:'use admin\ndb.createUser({\n  user: "adminUser",\n  pwd: "securePassword123",\n  roles: [\n    { role: "userAdminAnyDatabase", db: "admin" },\n    { role: "readWriteAnyDatabase", db: "admin" }\n  ]\n})\n'})}),"\n",(0,s.jsx)(n.h3,{id:"\u542F\u7528\u8BA4\u8BC1",children:"\u542F\u7528\u8BA4\u8BC1"}),"\n",(0,s.jsx)(n.p,{children:"\u7B14\u8005\u4FEE\u6539\u4E86 MongoDB \u7684\u914D\u7F6E\u6587\u4EF6\u4EE5\u5F00\u542F\u8BA4\u8BC1\u673A\u5236\uFF1A"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:"security:\n  authorization: enabled\n  clusterAuthMode: x509\n"})}),"\n",(0,s.jsx)(n.h2,{id:"\u89D2\u8272\u7BA1\u7406",children:"\u89D2\u8272\u7BA1\u7406"}),"\n",(0,s.jsx)(n.h3,{id:"\u5185\u7F6E\u89D2\u8272",children:"\u5185\u7F6E\u89D2\u8272"}),"\n",(0,s.jsx)(n.p,{children:"MongoDB \u63D0\u4F9B\u4E86\u591A\u79CD\u5185\u7F6E\u89D2\u8272\u4EE5\u6EE1\u8DB3\u4E0D\u540C\u7684\u9700\u6C42\u3002\u7B14\u8005\u521B\u5EFA\u4E86\u6570\u636E\u5E93\u7BA1\u7406\u5458\u548C\u53EA\u8BFB\u7528\u6237\uFF1A"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"// \u6570\u636E\u5E93\u7BA1\u7406\u5458\ndb.createUser({\n  user: 'dbAdmin',\n  pwd: 'dbPass123',\n  roles: [{ role: 'dbAdmin', db: 'businessDB' }],\n});\n\n// \u53EA\u8BFB\u7528\u6237\ndb.createUser({\n  user: 'readOnlyUser',\n  pwd: 'readPass123',\n  roles: [{ role: 'read', db: 'businessDB' }],\n});\n"})}),"\n",(0,s.jsx)(n.h3,{id:"\u81EA\u5B9A\u4E49\u89D2\u8272",children:"\u81EA\u5B9A\u4E49\u89D2\u8272"}),"\n",(0,s.jsx)(n.p,{children:"\u4E3A\u4E86\u6EE1\u8DB3\u7279\u5B9A\u6743\u9650\u9700\u6C42\uFF0C\u7B14\u8005\u521B\u5EFA\u4E86\u81EA\u5B9A\u4E49\u89D2\u8272\uFF1A"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"db.createRole({\n  role: 'orderProcessor',\n  privileges: [\n    {\n      resource: { db: 'businessDB', collection: 'orders' },\n      actions: ['find', 'update'],\n    },\n  ],\n  roles: [],\n});\n"})}),"\n",(0,s.jsx)(n.h2,{id:"\u7F51\u7EDC\u5B89\u5168",children:"\u7F51\u7EDC\u5B89\u5168"}),"\n",(0,s.jsx)(n.h3,{id:"ssltls-\u914D\u7F6E",children:"SSL/TLS \u914D\u7F6E"}),"\n",(0,s.jsx)(n.p,{children:"\u7B14\u8005\u914D\u7F6E\u4E86 SSL/TLS \u4EE5\u52A0\u5BC6\u4F20\u8F93\u6570\u636E\uFF1A"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:"net:\n  ssl:\n    mode: requireSSL\n    PEMKeyFile: /path/to/mongodb.pem\n    CAFile: /path/to/ca.pem\n    allowInvalidCertificates: false\n    allowInvalidHostnames: false\n"})}),"\n",(0,s.jsx)(n.h3,{id:"\u9632\u706B\u5899\u8BBE\u7F6E",children:"\u9632\u706B\u5899\u8BBE\u7F6E"}),"\n",(0,s.jsx)(n.p,{children:"\u4E3A\u4E86\u9650\u5236 MongoDB \u7684\u8BBF\u95EE\uFF0C\u7B14\u8005\u8BBE\u7F6E\u4E86\u9632\u706B\u5899\uFF0C\u4EC5\u5141\u8BB8\u7279\u5B9A IP \u8BBF\u95EE\uFF1A"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:"net:\n  bindIp: 127.0.0.1,192.168.1.100\n  port: 27017\n"})}),"\n",(0,s.jsx)(n.h2,{id:"\u5BA1\u8BA1\u673A\u5236",children:"\u5BA1\u8BA1\u673A\u5236"}),"\n",(0,s.jsx)(n.h3,{id:"\u5F00\u542F\u5BA1\u8BA1",children:"\u5F00\u542F\u5BA1\u8BA1"}),"\n",(0,s.jsx)(n.p,{children:"\u7B14\u8005\u914D\u7F6E\u4E86\u5BA1\u8BA1\u65E5\u5FD7\u4EE5\u8BB0\u5F55\u5173\u952E\u64CD\u4F5C\uFF1A"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:"security:\n  authorization: enabled\n  audit:\n    destination: file\n    format: JSON\n    path: /var/log/mongodb/audit.json\n"})}),"\n",(0,s.jsx)(n.h3,{id:"\u5BA1\u8BA1\u4E8B\u4EF6\u8FC7\u6EE4",children:"\u5BA1\u8BA1\u4E8B\u4EF6\u8FC7\u6EE4"}),"\n",(0,s.jsx)(n.p,{children:"\u8BBE\u7F6E\u9700\u8981\u5BA1\u8BA1\u7684\u64CD\u4F5C\u7C7B\u578B\uFF0C\u7B14\u8005\u9009\u62E9\u4E86\u8BA4\u8BC1\u3001\u521B\u5EFA\u96C6\u5408\u548C\u5220\u9664\u96C6\u5408\u4E8B\u4EF6\uFF1A"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"db.setAuditConfig({\n  auditFilter: {\n    atype: {\n      $in: ['authenticate', 'createCollection', 'dropCollection'],\n    },\n  },\n});\n"})}),"\n",(0,s.jsx)(n.h2,{id:"\u6570\u636E\u52A0\u5BC6",children:"\u6570\u636E\u52A0\u5BC6"}),"\n",(0,s.jsx)(n.h3,{id:"\u9759\u6001\u52A0\u5BC6",children:"\u9759\u6001\u52A0\u5BC6"}),"\n",(0,s.jsx)(n.p,{children:"\u7B14\u8005\u914D\u7F6E\u4E86\u5B58\u50A8\u52A0\u5BC6\u4EE5\u4FDD\u62A4\u9759\u6001\u6570\u636E\uFF1A"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:"security:\n  enableEncryption: true\n  encryptionKeyFile: /path/to/key.file\n"})}),"\n",(0,s.jsx)(n.h3,{id:"\u5B57\u6BB5\u7EA7\u52A0\u5BC6",children:"\u5B57\u6BB5\u7EA7\u52A0\u5BC6"}),"\n",(0,s.jsx)(n.p,{children:"\u5BF9\u4E8E\u654F\u611F\u5B57\u6BB5\uFF0C\u7B14\u8005\u5B9E\u65BD\u4E86\u5B57\u6BB5\u7EA7\u52A0\u5BC6\uFF1A"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"db.createCollection('users', {\n  validator: {\n    $jsonSchema: {\n      properties: {\n        ssn: {\n          encrypt: {\n            keyId: [UUID('key1')],\n            algorithm: 'AEAD_AES_256_CBC_HMAC_SHA_512_Random',\n          },\n        },\n      },\n    },\n  },\n});\n"})})]})}function h(e={}){let{wrapper:n}={...(0,r.a)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(t,{...e})}):t(e)}},50065:function(e,n,l){l.d(n,{Z:function(){return i},a:function(){return a}});var d=l(67294);let s={},r=d.createContext(s);function a(e){let n=d.useContext(r);return d.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),d.createElement(r.Provider,{value:n},e.children)}}}]);