"use strict";(self.webpackChunknote_book=self.webpackChunknote_book||[]).push([[90016],{63439:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>i,contentTitle:()=>c,default:()=>x,frontMatter:()=>l,metadata:()=>d,toc:()=>t});const d=JSON.parse('{"id":"Frontend/Node/commonJS","title":"CommonJS \u6a21\u5757\u89c4\u8303","description":"CommonJS \u662f Node.js \u4f7f\u7528\u7684\u6a21\u5757\u89c4\u8303,\u5b83\u6709\u4ee5\u4e0b\u51e0\u4e2a\u7279\u70b9:","source":"@site/docs/Frontend/Node/40.commonJS.md","sourceDirName":"Frontend/Node","slug":"/Frontend/Node/commonJS","permalink":"/docs-hub/docs/Frontend/Node/commonJS","draft":false,"unlisted":false,"editUrl":"https://github.com/sumingcheng/docs-hub/edit/main/docs/Frontend/Node/40.commonJS.md","tags":[],"version":"current","lastUpdatedBy":"sumingcheng","lastUpdatedAt":1733823170000,"sidebarPosition":40,"frontMatter":{},"sidebar":"nodeSidebar","previous":{"title":"Node \u4e8b\u4ef6\u5faa\u73af\u673a\u5236","permalink":"/docs-hub/docs/Frontend/Node/Node\u4e8b\u4ef6\u73af"},"next":{"title":"Node.js \u521b\u5efa\u5b50\u8fdb\u7a0b\u7684\u51e0\u79cd\u65b9\u5f0f","permalink":"/docs-hub/docs/Frontend/Node/\u521b\u5efa\u5b50\u8fdb\u7a0b"}}');var o=s(74848),r=s(28453);const l={},c="CommonJS \u6a21\u5757\u89c4\u8303",i={},t=[{value:"\u6a21\u5757\u7684\u5206\u7c7b",id:"\u6a21\u5757\u7684\u5206\u7c7b",level:2},{value:"\u6838\u5fc3\u6a21\u5757",id:"\u6838\u5fc3\u6a21\u5757",level:3},{value:"\u6587\u4ef6\u6a21\u5757",id:"\u6587\u4ef6\u6a21\u5757",level:3},{value:"\u5faa\u73af\u4f9d\u8d56",id:"\u5faa\u73af\u4f9d\u8d56",level:3},{value:"\u6a21\u5757\u52a0\u8f7d\u6d41\u7a0b",id:"\u6a21\u5757\u52a0\u8f7d\u6d41\u7a0b",level:2},{value:"module \u5bf9\u8c61",id:"module-\u5bf9\u8c61",level:2},{value:"exports \u548c module.exports \u7684\u533a\u522b",id:"exports-\u548c-moduleexports-\u7684\u533a\u522b",level:2}];function a(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",...(0,r.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"commonjs-\u6a21\u5757\u89c4\u8303",children:"CommonJS \u6a21\u5757\u89c4\u8303"})}),"\n",(0,o.jsx)(n.p,{children:"CommonJS \u662f Node.js \u4f7f\u7528\u7684\u6a21\u5757\u89c4\u8303,\u5b83\u6709\u4ee5\u4e0b\u51e0\u4e2a\u7279\u70b9:"}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsx)(n.li,{children:"\u4e00\u4e2a\u6587\u4ef6\u5c31\u662f\u4e00\u4e2a\u6a21\u5757,\u62e5\u6709\u5355\u72ec\u7684\u4f5c\u7528\u57df\u3002"}),"\n",(0,o.jsx)(n.li,{children:"\u666e\u901a\u5b9a\u4e49\u7684\u53d8\u91cf\u3001\u51fd\u6570\u3001\u5bf9\u8c61\u90fd\u5c5e\u4e8e\u6a21\u5757\u5185\u90e8,\u5916\u90e8\u65e0\u6cd5\u8bbf\u95ee\u3002"}),"\n",(0,o.jsxs)(n.li,{children:["\u901a\u8fc7",(0,o.jsx)(n.code,{children:"require()"}),"\u51fd\u6570\u6765\u52a0\u8f7d\u6a21\u5757\u3002"]}),"\n",(0,o.jsxs)(n.li,{children:["\u901a\u8fc7",(0,o.jsx)(n.code,{children:"exports"}),"\u6216",(0,o.jsx)(n.code,{children:"module.exports"}),"\u6765\u66b4\u9732\u6a21\u5757\u4e2d\u7684\u5185\u5bb9\u3002"]}),"\n",(0,o.jsxs)(n.li,{children:["\u5728 Node.js \u4e2d,",(0,o.jsx)(n.code,{children:"global"}),"\u5bf9\u8c61\u4ee3\u8868\u5168\u5c40\u4f5c\u7528\u57df,\u7c7b\u4f3c\u4e8e\u6d4f\u89c8\u5668\u4e2d\u7684",(0,o.jsx)(n.code,{children:"window"}),"\u5bf9\u8c61\u3002"]}),"\n"]}),"\n",(0,o.jsx)(n.p,{children:"\u4e0b\u9762\u662f\u4e00\u4e2a\u7b80\u5355\u7684\u793a\u4f8b,\u5c55\u793a\u4e86\u6a21\u5757\u7684\u57fa\u672c\u7528\u6cd5:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-javascript",children:"// \u5728\u4e00\u4e2a\u6a21\u5757\u5185\u90e8\u5b9a\u4e49\u53d8\u91cf\nvar a = 100;\nconsole.log(a); // \u8f93\u51fa100\nconsole.log(arguments);\n// \u4e00\u4e2a\u6587\u4ef6\u5c31\u662f\u4e00\u4e2a\u6a21\u5757,\u5728\u5355\u4e2a\u6587\u4ef6\u5185\u90e8\u65e0\u6cd5\u8bbf\u95ee\u5168\u5c40\u4f5c\u7528\u57df\u4e2d\u7684\u53d8\u91cfa\n// \u6bcf\u4e2a\u6a21\u5757\u90fd\u6709\u81ea\u5df1\u72ec\u7acb\u7684\u4f5c\u7528\u57df\n"})}),"\n",(0,o.jsx)(n.h2,{id:"\u6a21\u5757\u7684\u5206\u7c7b",children:"\u6a21\u5757\u7684\u5206\u7c7b"}),"\n",(0,o.jsx)(n.h3,{id:"\u6838\u5fc3\u6a21\u5757",children:"\u6838\u5fc3\u6a21\u5757"}),"\n",(0,o.jsx)(n.p,{children:"Node.js \u5185\u7f6e\u7684\u6a21\u5757\u79f0\u4e3a\u6838\u5fc3\u6a21\u5757,\u5728\u5f15\u5165\u65f6\u4f1a\u88ab\u81ea\u52a8\u52a0\u8f7d,\u52a0\u8f7d\u901f\u5ea6\u6700\u5feb\u3002\u4f8b\u5982:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-javascript",children:"const fs = require('fs');\n"})}),"\n",(0,o.jsx)(n.p,{children:"\u5f15\u5165\u6838\u5fc3\u6a21\u5757\u65f6,\u4e5f\u53ef\u4ee5\u4f7f\u7528\u89e3\u6784\u8d4b\u503c\u7684\u65b9\u5f0f:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-javascript",children:"const { readFile } = require('fs');\n"})}),"\n",(0,o.jsx)(n.h3,{id:"\u6587\u4ef6\u6a21\u5757",children:"\u6587\u4ef6\u6a21\u5757"}),"\n",(0,o.jsxs)(n.p,{children:["\u9664\u4e86\u6838\u5fc3\u6a21\u5757\u5916,\u6211\u4eec\u4e5f\u53ef\u4ee5\u81ea\u5b9a\u4e49\u6a21\u5757\u5e76\u5f15\u5165\u3002\u5f15\u5165\u6587\u4ef6\u6a21\u5757\u9700\u8981\u63d0\u4f9b\u6587\u4ef6\u7684\u8def\u5f84,\u5f15\u5165\u901f\u5ea6\u76f8\u5bf9\u8f83\u6162\u3002\u5982\u679c\u591a\u6b21\u5f15\u7528\u540c\u4e00\u4e2a\u6587\u4ef6\u6a21\u5757,\u90a3\u4e48\u53ea\u4f1a\u6267\u884c\u4e00\u6b21,\u4e4b\u540e\u4f1a\u76f4\u63a5\u4ece\u7f13\u5b58\u4e2d\u8bfb\u53d6\u3002\u6587\u4ef6\u6a21\u5757\u4f1a\u88ab\u7f13\u5b58\u5230",(0,o.jsx)(n.code,{children:"Module._cache"}),"\u5bf9\u8c61\u4e2d\u3002"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-javascript",children:"const myModule = require('./myModule');\n"})}),"\n",(0,o.jsx)(n.h3,{id:"\u5faa\u73af\u4f9d\u8d56",children:"\u5faa\u73af\u4f9d\u8d56"}),"\n",(0,o.jsx)(n.p,{children:"\u5f53\u591a\u4e2a\u6a21\u5757\u4e4b\u95f4\u5b58\u5728\u5faa\u73af\u4f9d\u8d56\u65f6,Node.js \u6a21\u5757\u673a\u5236\u4e0d\u4f1a\u51fa\u73b0\u6b7b\u5faa\u73af\u3002Node.js \u53ea\u4f1a\u8f93\u51fa\u5df2\u7ecf\u6267\u884c\u5b8c\u6bd5\u7684\u90e8\u5206,\u8fd8\u672a\u6267\u884c\u7684\u90e8\u5206\u4e0d\u4f1a\u88ab\u52a0\u8f7d\u3002"}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.img,{src:s(3326).A+"",width:"1522",height:"320"})}),"\n",(0,o.jsx)(n.h2,{id:"\u6a21\u5757\u52a0\u8f7d\u6d41\u7a0b",children:"\u6a21\u5757\u52a0\u8f7d\u6d41\u7a0b"}),"\n",(0,o.jsxs)(n.p,{children:["\u5f53\u4f7f\u7528",(0,o.jsx)(n.code,{children:"require()"}),"\u52a0\u8f7d\u4e00\u4e2a\u6a21\u5757\u65f6,Node.js \u4f1a\u6309\u7167\u4ee5\u4e0b\u987a\u5e8f\u67e5\u627e\u6a21\u5757:"]}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsx)(n.li,{children:"\u68c0\u67e5\u662f\u5426\u662f\u6838\u5fc3\u6a21\u5757,\u5982\u679c\u662f\u5219\u76f4\u63a5\u8fd4\u56de\u6838\u5fc3\u6a21\u5757,\u4e0d\u518d\u7ee7\u7eed\u67e5\u627e\u3002"}),"\n",(0,o.jsx)(n.li,{children:"\u786e\u5b9a\u6a21\u5757\u6807\u8bc6,\u5c06\u76f8\u5bf9\u8def\u5f84\u8f6c\u4e3a\u7edd\u5bf9\u8def\u5f84\u3002"}),"\n",(0,o.jsx)(n.li,{children:"\u68c0\u67e5\u662f\u5426\u6709\u7f13\u5b58,\u5982\u679c\u6709\u5219\u76f4\u63a5\u8fd4\u56de\u7f13\u5b58\u3002"}),"\n",(0,o.jsxs)(n.li,{children:["\u52a0\u8f7d\u6a21\u5757,\u5982\u679c\u662f\u6587\u4ef6\u6a21\u5757\u5219\u6309\u7167\u6587\u4ef6\u6269\u5c55\u540d\u7684\u4e0d\u540c\u52a0\u8f7d,\u5982\u679c\u662f\u76ee\u5f55\u5219\u6309\u7167",(0,o.jsx)(n.code,{children:"package.json"}),"\u4e2d\u7684",(0,o.jsx)(n.code,{children:"main"}),"\u5b57\u6bb5\u67e5\u627e\u5165\u53e3\u6587\u4ef6\u3002"]}),"\n",(0,o.jsxs)(n.li,{children:["\u8f93\u51fa\u6a21\u5757\u7684",(0,o.jsx)(n.code,{children:"exports"}),"\u5bf9\u8c61\u3002"]}),"\n"]}),"\n",(0,o.jsxs)(n.p,{children:["\u4e0b\u56fe\u5c55\u793a\u4e86",(0,o.jsx)(n.code,{children:"require()"}),"\u52a0\u8f7d\u4e00\u4e2a\u76ee\u5f55\u65f6\u7684\u67e5\u627e\u6d41\u7a0b:"]}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.img,{src:s(87698).A+"",width:"970",height:"409"})}),"\n",(0,o.jsx)(n.h2,{id:"module-\u5bf9\u8c61",children:"module \u5bf9\u8c61"}),"\n",(0,o.jsxs)(n.p,{children:["\u6bcf\u4e2a\u6a21\u5757\u4e2d\u90fd\u6709\u4e00\u4e2a",(0,o.jsx)(n.code,{children:"module"}),"\u5bf9\u8c61,\u5b83\u5305\u542b\u4e86\u5f53\u524d\u6a21\u5757\u7684\u4fe1\u606f\u3002\u4e0b\u9762\u662f\u4e00\u4e2a\u4f8b\u5b50:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-javascript",children:"// index.js\nconst modA = require('./modA');\nconsole.log(module);\n"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-javascript",children:"// modA.js\nmodule.exports.a = 1;\nexports.b = 2;\nconsole.log(exports === module.exports); // \u8f93\u51fatrue\n"})}),"\n",(0,o.jsxs)(n.p,{children:["\u8fd0\u884c",(0,o.jsx)(n.code,{children:"node index.js"}),",\u8f93\u51fa\u7ed3\u679c\u5982\u4e0b:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:"true\nModule {\n  id: '.',\n  path: '/path/to/example',\n  exports: {},\n  parent: null,\n  filename: '/path/to/example/index.js',\n  loaded: false,\n  children: [\n    Module {\n      id: '/path/to/example/modA.js',\n      path: '/path/to/example',\n      exports: { a: 1, b: 2 },\n      parent: [Circular],\n      filename: '/path/to/example/modA.js',\n      loaded: true,\n      children: [],\n      paths: [Array]\n    }\n  ],\n  paths: [\n    '/path/to/example/node_modules',\n    '/path/to/node_modules',\n    '/path/node_modules'\n  ]\n}\n"})}),"\n",(0,o.jsx)(n.h2,{id:"exports-\u548c-moduleexports-\u7684\u533a\u522b",children:"exports \u548c module.exports \u7684\u533a\u522b"}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.code,{children:"exports"}),"\u662f",(0,o.jsx)(n.code,{children:"module.exports"}),"\u7684\u4e00\u4e2a\u5f15\u7528,\u5f53\u9700\u8981\u66b4\u9732\u591a\u4e2a\u53d8\u91cf\u6216\u51fd\u6570\u65f6,\u53ef\u4ee5\u4f7f\u7528",(0,o.jsx)(n.code,{children:"exports"}),"\u5bf9\u8c61:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-javascript",children:"exports.a = 1;\nexports.b = 2;\nexports.c = 3;\n"})}),"\n",(0,o.jsxs)(n.p,{children:["\u800c",(0,o.jsx)(n.code,{children:"module.exports"}),"\u53ef\u4ee5\u76f4\u63a5\u66b4\u9732\u4e00\u4e2a\u5bf9\u8c61\u3001\u51fd\u6570\u6216\u53d8\u91cf:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-javascript",children:"module.exports = function () {\n  console.log('hello world');\n};\n"})}),"\n",(0,o.jsxs)(n.p,{children:["\u9700\u8981\u6ce8\u610f\u7684\u662f,\u5982\u679c\u7ed9",(0,o.jsx)(n.code,{children:"exports"}),"\u8d4b\u503c\u4e00\u4e2a\u65b0\u5bf9\u8c61,\u90a3\u4e48\u5b83\u5c06\u4e0d\u518d\u662f",(0,o.jsx)(n.code,{children:"module.exports"}),"\u7684\u5f15\u7528,\u65e0\u6cd5\u88ab\u5916\u90e8\u8bbf\u95ee:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-javascript",children:"exports = { a: 1 }; // \u9519\u8bef\u7684\u7528\u6cd5\n"})}),"\n",(0,o.jsx)(n.p,{children:"\u533a\u522b:"}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"module.exports"}),"\u521d\u59cb\u503c\u4e3a\u4e00\u4e2a\u7a7a\u5bf9\u8c61",(0,o.jsx)(n.code,{children:"{}"}),",\u6240\u4ee5",(0,o.jsx)(n.code,{children:"exports"}),"\u521d\u59cb\u503c\u4e5f\u662f",(0,o.jsx)(n.code,{children:"{}"}),"\u3002"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"exports"}),"\u53ea\u80fd\u901a\u8fc7\u70b9\u8bed\u6cd5\u5411\u5916\u66b4\u9732\u5185\u90e8\u53d8\u91cf,",(0,o.jsx)(n.code,{children:"module.exports"}),"\u65e2\u53ef\u4ee5\u901a\u8fc7\u70b9\u8bed\u6cd5,\u4e5f\u53ef\u4ee5\u76f4\u63a5\u8d4b\u503c\u4e00\u4e2a\u5bf9\u8c61\u3002"]}),"\n",(0,o.jsxs)(n.li,{children:["\u4f7f\u7528",(0,o.jsx)(n.code,{children:"require()"}),"\u5bfc\u5165\u6a21\u5757\u65f6,\u5f97\u5230\u7684\u662f",(0,o.jsx)(n.code,{children:"module.exports"}),"\u6307\u5411\u7684\u5bf9\u8c61\u3002"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"exports"}),"\u662f",(0,o.jsx)(n.code,{children:"module.exports"}),"\u7684\u4e00\u4e2a\u5f15\u7528,\u5982\u679c",(0,o.jsx)(n.code,{children:"module.exports"}),"\u6307\u5411\u53d8\u4e86,\u90a3\u4e48",(0,o.jsx)(n.code,{children:"exports"}),"\u4e5f\u4f1a\u53d8\u3002"]}),"\n"]})]})}function x(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(a,{...e})}):a(e)}},87698:(e,n,s)=>{s.d(n,{A:()=>d});const d=s.p+"assets/images/5149173bf54edc93e99088b64db621da-2de00879711d70306beb890990f4ae58.png"},3326:(e,n,s)=>{s.d(n,{A:()=>d});const d=s.p+"assets/images/6b4f5428a518a694c7876caf56bacbfd-c08eed7c8ccb19b866b4c032ec1a50b6.png"},28453:(e,n,s)=>{s.d(n,{R:()=>l,x:()=>c});var d=s(96540);const o={},r=d.createContext(o);function l(e){const n=d.useContext(r);return d.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:l(e.components),d.createElement(r.Provider,{value:n},e.children)}}}]);