"use strict";(self.webpackChunknote_book=self.webpackChunknote_book||[]).push([["46882"],{48410:function(e,n,t){t.r(n),t.d(n,{default:()=>u,frontMatter:()=>l,metadata:()=>o,assets:()=>r,toc:()=>d,contentTitle:()=>c});var o=JSON.parse('{"id":"Frontend/DOM/\u9F20\u6807\u4E8B\u4EF6\u6DF1\u5165-\u70B9\u51FB\u4E0E\u62D6\u62FD\u5206\u79BB-\u53CC\u51FB\u4E8B\u4EF6","title":"\u9F20\u6807\u4E8B\u4EF6\u4E0E\u5143\u7D20\u62D6\u62FD","description":"\u89E6\u53D1\u987A\u5E8F","source":"@site/docs/Frontend/DOM/90.\u9F20\u6807\u4E8B\u4EF6\u6DF1\u5165-\u70B9\u51FB\u4E0E\u62D6\u62FD\u5206\u79BB-\u53CC\u51FB\u4E8B\u4EF6.md","sourceDirName":"Frontend/DOM","slug":"/Frontend/DOM/\u9F20\u6807\u4E8B\u4EF6\u6DF1\u5165-\u70B9\u51FB\u4E0E\u62D6\u62FD\u5206\u79BB-\u53CC\u51FB\u4E8B\u4EF6","permalink":"/docs-hub/Frontend/DOM/\u9F20\u6807\u4E8B\u4EF6\u6DF1\u5165-\u70B9\u51FB\u4E0E\u62D6\u62FD\u5206\u79BB-\u53CC\u51FB\u4E8B\u4EF6","draft":false,"unlisted":false,"editUrl":"https://github.com/sumingcheng/docs-hub/edit/main/docs/Frontend/DOM/90.\u9F20\u6807\u4E8B\u4EF6\u6DF1\u5165-\u70B9\u51FB\u4E0E\u62D6\u62FD\u5206\u79BB-\u53CC\u51FB\u4E8B\u4EF6.md","tags":[],"version":"current","lastUpdatedBy":"sumingcheng","lastUpdatedAt":1734262986000,"sidebarPosition":90,"frontMatter":{},"sidebar":"domSidebar","previous":{"title":"\u9F20\u6807\u884C\u4E3A-pageXY\u5C01\u88C5-\u62D6\u62FD\u51FD\u6570\u5C01\u88C5","permalink":"/docs-hub/Frontend/DOM/\u9F20\u6807\u884C\u4E3A-pageXY\u5C01\u88C5-\u62D6\u62FD\u51FD\u6570\u5C01\u88C5"},"next":{"title":"\u6DF1\u5165\u7406\u89E3 element.innerHTML","permalink":"/docs-hub/Frontend/DOM/innerHTML"}}'),s=t("85893"),i=t("50065");let l={},c="\u9F20\u6807\u4E8B\u4EF6\u4E0E\u5143\u7D20\u62D6\u62FD",r={},d=[{value:"\u89E6\u53D1\u987A\u5E8F",id:"\u89E6\u53D1\u987A\u5E8F",level:2},{value:"\u5C01\u88C5\u63D2\u4EF6\uFF0C\u5B9E\u73B0\u5143\u7D20\u62D6\u62FD",id:"\u5C01\u88C5\u63D2\u4EF6\u5B9E\u73B0\u5143\u7D20\u62D6\u62FD",level:2},{value:"\u5904\u7406\u8FB9\u754C\u95EE\u9898",id:"\u5904\u7406\u8FB9\u754C\u95EE\u9898",level:2},{value:"\u9F20\u6807\u5DE6\u4E2D\u53F3",id:"\u9F20\u6807\u5DE6\u4E2D\u53F3",level:2},{value:"\u9F20\u6807\u53F3\u952E\u83DC\u5355",id:"\u9F20\u6807\u53F3\u952E\u83DC\u5355",level:2}];function a(e){let n={code:"code",h1:"h1",h2:"h2",header:"header",img:"img",p:"p",pre:"pre",...(0,i.a)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"\u9F20\u6807\u4E8B\u4EF6\u4E0E\u5143\u7D20\u62D6\u62FD",children:"\u9F20\u6807\u4E8B\u4EF6\u4E0E\u5143\u7D20\u62D6\u62FD"})}),"\n",(0,s.jsx)(n.h2,{id:"\u89E6\u53D1\u987A\u5E8F",children:"\u89E6\u53D1\u987A\u5E8F"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"onmousedown"})," \u548C ",(0,s.jsx)(n.code,{children:"onmouseup"})," \u4E8B\u4EF6\u7684\u7EC4\u5408\u4F1A\u89E6\u53D1 ",(0,s.jsx)(n.code,{children:"click"})," \u4E8B\u4EF6\u3002"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"const button = document.getElementsByTagName('button')[0];\n\nbutton.onclick = function () {\n  console.log('click');\n};\n\nbutton.onmousedown = function () {\n  console.log('onmousedown');\n};\n\nbutton.onmouseup = function () {\n  console.log('onmouseup');\n};\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:t(6128).Z+"",width:"722",height:"380"})}),"\n",(0,s.jsx)(n.h2,{id:"\u5C01\u88C5\u63D2\u4EF6\u5B9E\u73B0\u5143\u7D20\u62D6\u62FD",children:"\u5C01\u88C5\u63D2\u4EF6\uFF0C\u5B9E\u73B0\u5143\u7D20\u62D6\u62FD"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"const link = document.getElementsByTagName('a')[0];\nlink.dragNclick(function () {\n  window.open('http://www.baidu.com');\n});\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"// \u5143\u7D20\u62D6\u62FD\u51FD\u6570\u5C01\u88C5\uFF08\u65E0\u8FB9\u754C\uFF09\nElement.prototype.dragNclick = function (onClick) {\n  let startTime = 0;\n  let endTime = 0;\n  let initialPos = [];\n  const element = this;\n\n  element.addEventListener('mousedown', function (e) {\n    startTime = new Date().getTime();\n    initialPos = [parseInt(getStyles(element, 'left')), parseInt(getStyles(element, 'top'))];\n    const offsetX = pagePos(e).X - parseInt(getStyles(element, 'left'));\n    const offsetY = pagePos(e).Y - parseInt(getStyles(element, 'top'));\n\n    function onMouseMove(eMove) {\n      element.style.left = `${pagePos(eMove).X - offsetX}px`;\n      element.style.top = `${pagePos(eMove).Y - offsetY}px`;\n    }\n\n    function onMouseUp(eUp) {\n      endTime = new Date().getTime();\n      if (endTime - startTime < 100) {\n        element.style.left = `${initialPos[0]}px`;\n        element.style.top = `${initialPos[1]}px`;\n        onClick();\n      }\n      document.removeEventListener('mousemove', onMouseMove);\n      document.removeEventListener('mouseup', onMouseUp);\n    }\n\n    document.addEventListener('mousemove', onMouseMove);\n    document.addEventListener('mouseup', onMouseUp);\n    e.stopPropagation();\n    e.preventDefault();\n  });\n};\n"})}),"\n",(0,s.jsx)(n.h2,{id:"\u5904\u7406\u8FB9\u754C\u95EE\u9898",children:"\u5904\u7406\u8FB9\u754C\u95EE\u9898"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"Element.prototype.dragNclick = function (onClick) {\n  const element = this;\n  let startTime = 0;\n  let endTime = 0;\n  let initialPos = [];\n  const viewportWidth = getViewPortSize().width;\n  const viewportHeight = getViewPortSize().height;\n  const elementWidth = parseInt(getStyles(element, 'width'));\n  const elementHeight = parseInt(getStyles(element, 'height'));\n\n  element.addEventListener('mousedown', function (e) {\n    startTime = new Date().getTime();\n    initialPos = [parseInt(getStyles(element, 'left')), parseInt(getStyles(element, 'top'))];\n    const offsetX = pagePos(e).X - parseInt(getStyles(element, 'left'));\n    const offsetY = pagePos(e).Y - parseInt(getStyles(element, 'top'));\n\n    function onMouseMove(eMove) {\n      let newLeft = pagePos(eMove).X - offsetX;\n      let newTop = pagePos(eMove).Y - offsetY;\n\n      if (newLeft <= 0) {\n        newLeft = 0;\n      } else if (newLeft >= viewportWidth - elementWidth) {\n        newLeft = viewportWidth - elementWidth - 1;\n      }\n\n      if (newTop <= 0) {\n        newTop = 0;\n      } else if (newTop >= viewportHeight - elementHeight) {\n        newTop = viewportHeight - elementHeight - 1;\n      }\n\n      element.style.left = `${newLeft}px`;\n      element.style.top = `${newTop}px`;\n    }\n\n    function onMouseUp(eUp) {\n      endTime = new Date().getTime();\n      if (endTime - startTime < 100) {\n        element.style.left = `${initialPos[0]}px`;\n        element.style.top = `${initialPos[1]}px`;\n        onClick();\n      }\n      document.removeEventListener('mousemove', onMouseMove);\n      document.removeEventListener('mouseup', onMouseUp);\n    }\n\n    document.addEventListener('mousemove', onMouseMove);\n    document.addEventListener('mouseup', onMouseUp);\n    e.stopPropagation();\n    e.preventDefault();\n  });\n};\n"})}),"\n",(0,s.jsx)(n.h2,{id:"\u9F20\u6807\u5DE6\u4E2D\u53F3",children:"\u9F20\u6807\u5DE6\u4E2D\u53F3"}),"\n",(0,s.jsxs)(n.p,{children:["\u9F20\u6807\u7684\u4E09\u4E2A\u6309\u952E\u5206\u522B\u5BF9\u5E94 ",(0,s.jsx)(n.code,{children:"0"}),"\u3001",(0,s.jsx)(n.code,{children:"1"})," \u548C ",(0,s.jsx)(n.code,{children:"2"}),"\u3002\u5F00\u53D1\u53F3\u952E\u76F8\u5173\u529F\u80FD\u65F6\uFF0C\u9700\u786E\u4FDD\u6D4F\u89C8\u5668\u7248\u672C\u5728 ",(0,s.jsx)(n.code,{children:"IE10"})," \u4EE5\u4E0A\u3002"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"document.onmousedown = function (e) {\n  console.log(e.button);\n};\n"})}),"\n",(0,s.jsx)(n.h2,{id:"\u9F20\u6807\u53F3\u952E\u83DC\u5355",children:"\u9F20\u6807\u53F3\u952E\u83DC\u5355"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"document.addEventListener('contextmenu', function (e) {\n  e.preventDefault();\n  console.log('\u53F3\u952E\u83DC\u5355\u88AB\u89E6\u53D1');\n  // \u5728\u6B64\u5904\u6DFB\u52A0\u81EA\u5B9A\u4E49\u53F3\u952E\u83DC\u5355\u903B\u8F91\n});\n"})})]})}function u(e={}){let{wrapper:n}={...(0,i.a)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(a,{...e})}):a(e)}},6128:function(e,n,t){t.d(n,{Z:function(){return o}});let o=t.p+"assets/images/802f4f6b619c862d42812222418f042c-318c77082930c0a6e626be325e5dbd96.png"},50065:function(e,n,t){t.d(n,{Z:function(){return c},a:function(){return l}});var o=t(67294);let s={},i=o.createContext(s);function l(e){let n=o.useContext(i);return o.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:l(e.components),o.createElement(i.Provider,{value:n},e.children)}}}]);