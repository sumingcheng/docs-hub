"use strict";(self.webpackChunknote_book=self.webpackChunknote_book||[]).push([["90316"],{62147:function(n,e,s){s.r(e),s.d(e,{default:()=>t,frontMatter:()=>r,metadata:()=>l,assets:()=>d,toc:()=>a,contentTitle:()=>i});var l=JSON.parse('{"id":"Frontend/JavaScript/Promise/Promise-\u9898\u96C6","title":"\u5F02\u6B65\u7F16\u7A0B\u8BE6\u89E3","description":"\u540C\u6B65\u4EFB\u52A1\u3001\u5FAE\u4EFB\u52A1\u3001\u5F02\u6B65\u4EFB\u52A1","source":"@site/docs/Frontend/JavaScript/Promise/40.Promise-\u9898\u96C6.md","sourceDirName":"Frontend/JavaScript/Promise","slug":"/Frontend/JavaScript/Promise/Promise-\u9898\u96C6","permalink":"/docs-hub/Frontend/JavaScript/Promise/Promise-\u9898\u96C6","draft":false,"unlisted":false,"editUrl":"https://github.com/sumingcheng/docs-hub/edit/main/docs/Frontend/JavaScript/Promise/40.Promise-\u9898\u96C6.md","tags":[],"version":"current","lastUpdatedBy":"sumingcheng","lastUpdatedAt":1734249440000,"sidebarPosition":40,"frontMatter":{},"sidebar":"javascriptSidebar","previous":{"title":"\u4F7F\u7528 promises-aplus-tests \u8FDB\u884C Promise \u5B9E\u73B0\u6D4B\u8BD5","permalink":"/docs-hub/Frontend/JavaScript/Promise/\u5B9E\u73B0Promise\u5468\u8FB9\u65B9\u6CD5"},"next":{"title":"Promise \u7EC3\u4E60\u9898","permalink":"/docs-hub/Frontend/JavaScript/Promise/Promise-\u7EC3\u4E60\u9898"}}'),c=s("85893"),o=s("50065");let r={},i="\u5F02\u6B65\u7F16\u7A0B\u8BE6\u89E3",d={},a=[{value:"\u540C\u6B65\u4EFB\u52A1\u3001\u5FAE\u4EFB\u52A1\u3001\u5F02\u6B65\u4EFB\u52A1",id:"\u540C\u6B65\u4EFB\u52A1\u5FAE\u4EFB\u52A1\u5F02\u6B65\u4EFB\u52A1",level:2},{value:"\u5FAE\u4EFB\u52A1",id:"\u5FAE\u4EFB\u52A1",level:2},{value:"Promise.all",id:"promiseall",level:2},{value:"Promise.race",id:"promiserace",level:2},{value:"async",id:"async",level:2},{value:"await",id:"await",level:2},{value:"\u5F02\u6B65\u4EFB\u52A1",id:"\u5F02\u6B65\u4EFB\u52A1",level:2},{value:"pending",id:"pending",level:2},{value:"await \u4E0E\u5FAE\u4EFB\u52A1",id:"await-\u4E0E\u5FAE\u4EFB\u52A1",level:2},{value:"\u5FAE\u4EFB\u52A1\u6267\u884C",id:"\u5FAE\u4EFB\u52A1\u6267\u884C",level:2},{value:"\u591A\u4E2A\u5FAE\u4EFB\u52A1",id:"\u591A\u4E2A\u5FAE\u4EFB\u52A1",level:2},{value:"reject",id:"reject",level:2},{value:"try...catch",id:"trycatch",level:2},{value:"\u7EFC\u5408\u793A\u4F8B",id:"\u7EFC\u5408\u793A\u4F8B",level:2},{value:"finally",id:"finally",level:2}];function h(n){let e={code:"code",h1:"h1",h2:"h2",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",...(0,o.a)(),...n.components};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(e.header,{children:(0,c.jsx)(e.h1,{id:"\u5F02\u6B65\u7F16\u7A0B\u8BE6\u89E3",children:"\u5F02\u6B65\u7F16\u7A0B\u8BE6\u89E3"})}),"\n",(0,c.jsx)(e.h2,{id:"\u540C\u6B65\u4EFB\u52A1\u5FAE\u4EFB\u52A1\u5F02\u6B65\u4EFB\u52A1",children:"\u540C\u6B65\u4EFB\u52A1\u3001\u5FAE\u4EFB\u52A1\u3001\u5F02\u6B65\u4EFB\u52A1"}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-javascript",children:"const first = () =>\n  new Promise((resolve, reject) => {\n    console.log(3); // \u540C\u6B651 3\n    let p = new Promise((resolve, reject) => {\n      console.log(7); // \u540C\u6B652 7\n      setTimeout(() => {\n        console.log(5); // \u5F02\u6B651 5\n        resolve(6);\n        console.log(p); // \u5F02\u6B652 fulfilled 1\n      }, 0);\n      resolve(1);\n    });\n    resolve(2);\n    p.then((arg) => {\n      console.log(arg); // \u5FAE\u4EFB\u52A11 1\n    });\n  });\n\nfirst().then((arg) => {\n  console.log(arg); // \u5FAE\u4EFB\u52A12 2\n});\n\nconsole.log(4); // \u540C\u6B653 4\n"})}),"\n",(0,c.jsx)(e.p,{children:"\u5728\u8FD9\u6BB5\u4EE3\u7801\u4E2D\uFF0C\u6267\u884C\u987A\u5E8F\u5982\u4E0B\uFF1A"}),"\n",(0,c.jsxs)(e.ol,{children:["\n",(0,c.jsxs)(e.li,{children:[(0,c.jsx)(e.code,{children:"console.log(3)"})," \u8F93\u51FA 3"]}),"\n",(0,c.jsxs)(e.li,{children:[(0,c.jsx)(e.code,{children:"console.log(7)"})," \u8F93\u51FA 7"]}),"\n",(0,c.jsxs)(e.li,{children:["\u8BBE\u7F6E\u4E00\u4E2A ",(0,c.jsx)(e.code,{children:"setTimeout"}),"\uFF0C\u5C06 ",(0,c.jsx)(e.code,{children:"console.log(5)"})," \u548C ",(0,c.jsx)(e.code,{children:"resolve(6)"})," \u653E\u5165\u5F02\u6B65\u4EFB\u52A1\u961F\u5217"]}),"\n",(0,c.jsxs)(e.li,{children:[(0,c.jsx)(e.code,{children:"resolve(1)"})," \u7ACB\u5373\u6267\u884C\uFF0C\u968F\u540E ",(0,c.jsx)(e.code,{children:"resolve(2)"})," \u4E5F\u7ACB\u5373\u6267\u884C"]}),"\n",(0,c.jsxs)(e.li,{children:[(0,c.jsx)(e.code,{children:"console.log(4)"})," \u8F93\u51FA 4"]}),"\n",(0,c.jsxs)(e.li,{children:["\u5FAE\u4EFB\u52A1\u961F\u5217\u4E2D\u7684 ",(0,c.jsx)(e.code,{children:"p.then"})," \u5148\u6267\u884C\uFF0C\u8F93\u51FA 1"]}),"\n",(0,c.jsxs)(e.li,{children:["\u6700\u540E\uFF0C",(0,c.jsx)(e.code,{children:"first().then"})," \u6267\u884C\uFF0C\u8F93\u51FA 2"]}),"\n",(0,c.jsxs)(e.li,{children:["\u5F02\u6B65\u4EFB\u52A1\u4E2D\u7684 ",(0,c.jsx)(e.code,{children:"console.log(5)"})," \u8F93\u51FA 5\uFF0C\u968F\u540E ",(0,c.jsx)(e.code,{children:"console.log(p)"})," \u8F93\u51FA ",(0,c.jsx)(e.code,{children:"fulfilled"})]}),"\n"]}),"\n",(0,c.jsx)(e.h2,{id:"\u5FAE\u4EFB\u52A1",children:"\u5FAE\u4EFB\u52A1"}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-javascript",children:"let a;\nconst b = new Promise((resolve, reject) => {\n  console.log('promise1'); // \u540C\u6B651 promise1\n  resolve();\n})\n  .then(() => {\n    console.log('promise2'); // \u5FAE1 promise2\n  })\n  .then(() => {\n    console.log('promise3'); // \u5FAE2 promise3\n  })\n  .then(() => {\n    console.log('promise4'); // \u5FAE3 promise4\n  });\n\na = new Promise(async (resolve, reject) => {\n  console.log(a); // \u540C\u6B652 undefined\n  console.log(b); // Promise\xa0fulfilled\n  await b; // \u7B49\u5F85b\u6267\u884C\u7ED3\u675F\u540E\uFF0C\u4EE3\u7801\u7EE7\u7EED\u5F80\u4E0B\u6267\u884C\n  console.log(a); // \u5728\u7B49\u5F85b\u7684\u65F6\u5019 new Promise\u5DF2\u7ECF\u5B8C\u6210\uFF0Cpromise pending\n  console.log('after1'); // after1\n  await a; // \u7B49\u5F85a\u7684\u5904\u7406\u7ED3\u679C\uFF0Ca \u7684\u7ED3\u679C\u5728await\u4E4B\u540E\uFF0C\u6240\u4EE5\u4F1A\u4E00\u76F4\u7B49\u5F85\n  resolve(true);\n  console.log('after2');\n});\nconsole.log('end'); // \u540C\u6B653 end\n"})}),"\n",(0,c.jsx)(e.p,{children:"\u6B64\u4EE3\u7801\u5C55\u793A\u4E86\u5FAE\u4EFB\u52A1\u7684\u6267\u884C\u987A\u5E8F\uFF1A"}),"\n",(0,c.jsxs)(e.ol,{children:["\n",(0,c.jsxs)(e.li,{children:["\u8F93\u51FA ",(0,c.jsx)(e.code,{children:"promise1"})]}),"\n",(0,c.jsxs)(e.li,{children:["\u8F93\u51FA ",(0,c.jsx)(e.code,{children:"undefined"})," \u548C ",(0,c.jsx)(e.code,{children:"Promise\xa0fulfilled"})]}),"\n",(0,c.jsxs)(e.li,{children:["\u8F93\u51FA ",(0,c.jsx)(e.code,{children:"end"})]}),"\n",(0,c.jsxs)(e.li,{children:["\u5FAE\u4EFB\u52A1\u961F\u5217\u4F9D\u6B21\u6267\u884C\uFF0C\u8F93\u51FA ",(0,c.jsx)(e.code,{children:"promise2"}),"\u3001",(0,c.jsx)(e.code,{children:"promise3"}),"\u3001",(0,c.jsx)(e.code,{children:"promise4"})]}),"\n",(0,c.jsxs)(e.li,{children:[(0,c.jsx)(e.code,{children:"await b"})," \u5B8C\u6210\u540E\uFF0C\u8F93\u51FA ",(0,c.jsx)(e.code,{children:"after1"})]}),"\n",(0,c.jsxs)(e.li,{children:[(0,c.jsx)(e.code,{children:"await a"})," \u56E0\u4E3A ",(0,c.jsx)(e.code,{children:"a"})," \u5904\u4E8E pending \u72B6\u6001\uFF0C\u540E\u7EED\u4EE3\u7801\u6682\u505C\u6267\u884C"]}),"\n"]}),"\n",(0,c.jsx)(e.h2,{id:"promiseall",children:"Promise.all"}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-javascript",children:"function runAsync(x) {\n  const p = new Promise((resolve) => {\n    setTimeout(() => {\n      resolve(x, console.log(x));\n    }, 1000);\n  });\n  return p;\n}\n\nfunction runReject(x) {\n  const p = new Promise((res, rej) => {\n    setTimeout(() => {\n      rej(`Error:${x}`, console.log(x));\n    }, 1000 * x);\n  });\n  return p;\n}\n\n// \u6240\u6709\u7684Promise\u90FD\u6210\u529F\u4E86\uFF0Cres\u624D\u4F1A\u6253\u5370\u6210\u529F\u7684\u503C\nPromise.all([runAsync(1), runReject(4), runAsync(3), runReject(2)])\n  // 13 \u4E00\u8D77\u51FA\u73B0\uFF0C\u56E0\u4E3A\u65F6\u95F4\u4E00\u6837\uFF0C\u51482\u540E4\uFF0C2\u7684\u9519\u8BEF\u5148\u5230\uFF0C\u6253\u5370\u9519\u8BEF2\n  .then((res) => console.log(res))\n  .catch((err) => console.log(err));\n"})}),"\n",(0,c.jsxs)(e.p,{children:[(0,c.jsx)(e.code,{children:"Promise.all"})," \u4F1A\u7B49\u5F85\u6240\u6709\u7684 Promise \u5B8C\u6210\u3002\u5982\u679C\u6709\u4EFB\u610F\u4E00\u4E2A Promise \u5931\u8D25\uFF0C",(0,c.jsx)(e.code,{children:"Promise.all"})," \u4F1A\u7ACB\u5373\u8FDB\u5165 ",(0,c.jsx)(e.code,{children:"catch"}),"\uFF0C\u8F93\u51FA\u7B2C\u4E00\u4E2A\u5931\u8D25\u7684\u9519\u8BEF\u3002\u5728\u6B64\u4F8B\u4E2D\uFF0C",(0,c.jsx)(e.code,{children:"runReject(2)"})," \u4F1A\u5728 2000ms \u540E\u5148\u4E8E ",(0,c.jsx)(e.code,{children:"runReject(4)"})," \u62A5\u9519\uFF0C\u8F93\u51FA ",(0,c.jsx)(e.code,{children:"Error:2"}),"\u3002"]}),"\n",(0,c.jsx)(e.h2,{id:"promiserace",children:"Promise.race"}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-javascript",children:"function runAsync(x) {\n  const p = new Promise((r) => {\n    setTimeout(() => r(x, console.log(x)), 1000);\n  });\n  return p;\n}\n// 123\u4E00\u8D77\u6267\u884C\uFF0C\u542F\u52A8\u4E09\u4E2A\u5B9A\u65F6\u5668\uFF0C123\u90FD\u4F1A\u6253\u5370\uFF0C1\u6700\u5148\u8FD4\u56DE\u6210\u529F\nPromise.race([runAsync(1), runAsync(2), runAsync(3)])\n  // res\u7684\u7ED3\u679C\uFF0C\u63A5\u6536\u8FD4\u56DE\u6700\u5FEB\u7684\u503C\n  .then((res) => console.log('result:', res))\n  .catch((err) => console.log(err));\n"})}),"\n",(0,c.jsxs)(e.p,{children:[(0,c.jsx)(e.code,{children:"Promise.race"})," \u4F1A\u5728\u7B2C\u4E00\u4E2A Promise \u5B8C\u6210\u6216\u5931\u8D25\u65F6\u7ACB\u5373\u8FD4\u56DE\u7ED3\u679C\u3002\u5728\u6B64\u4F8B\u4E2D\uFF0C",(0,c.jsx)(e.code,{children:"runAsync(1)"})," \u6700\u5148\u5B8C\u6210\uFF0C\u8F93\u51FA ",(0,c.jsx)(e.code,{children:"1"})," \u5E76\u4E14 ",(0,c.jsx)(e.code,{children:"then"})," \u4E2D\u7684\u56DE\u8C03\u8F93\u51FA ",(0,c.jsx)(e.code,{children:"result: 1"}),"\u3002"]}),"\n",(0,c.jsx)(e.h2,{id:"async",children:"async"}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-javascript",children:"async function async1() {\n  // async\u6CA1\u6709await\uFF0C\u5269\u4E0B\u7684\u4EE3\u7801\u90FD\u662F\u540C\u6B65\u4EE3\u7801\n  console.log('1'); // \u540C\u6B651\n  // promise \u7684\u53C2\u6570\u662F\u4E2A\u51FD\u6570\uFF0C\u8FD9\u4E2A\u51FD\u6570\u662F\u540C\u6B65\u6267\u884C\u7684\n  new Promise((resolve) => {\n    // \u76F4\u63A5\u6267\u884C\n    resolve();\n    console.log('2'); // \u540C\u6B65 2\n  });\n  console.log('3'); // \u540C\u6B653\n}\nasync1();\nconsole.log('4'); // \u540C\u6B654\n"})}),"\n",(0,c.jsxs)(e.p,{children:["\u5728\u6CA1\u6709 ",(0,c.jsx)(e.code,{children:"await"})," \u7684\u60C5\u51B5\u4E0B\uFF0C",(0,c.jsx)(e.code,{children:"async"})," \u51FD\u6570\u4E2D\u7684\u4EE3\u7801\u540C\u6B65\u6267\u884C\uFF0C\u8F93\u51FA\u987A\u5E8F\u4E3A ",(0,c.jsx)(e.code,{children:"1"}),"\u3001",(0,c.jsx)(e.code,{children:"2"}),"\u3001",(0,c.jsx)(e.code,{children:"3"}),"\u3001",(0,c.jsx)(e.code,{children:"4"}),"\u3002"]}),"\n",(0,c.jsx)(e.h2,{id:"await",children:"await"}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-javascript",children:"async function async1() {\n  console.log('1'); // \u540C\u6B651\n  await async2(); // \u7B49\u5F85 async2 \u6267\u884C\u5B8C\uFF0C\u5305\u62EC\u91CC\u9762\u7684\u5F02\u6B65\n  console.log('2'); // \u5FAE\u4EFB\u52A11\n}\nasync function async2() {\n  setTimeout(() => {\n    console.log('3'); // \u5F02\u6B65 1\n  }, 0);\n  console.log('4'); // \u540C\u6B652\n}\nasync1();\nconsole.log(5); // \u540C\u6B654\n"})}),"\n",(0,c.jsxs)(e.p,{children:[(0,c.jsx)(e.code,{children:"await"})," \u4F1A\u6682\u505C ",(0,c.jsx)(e.code,{children:"async"})," \u51FD\u6570\u7684\u6267\u884C\uFF0C\u7B49\u5F85 Promise \u5B8C\u6210\u540E\u7EE7\u7EED\u3002\u8F93\u51FA\u987A\u5E8F\u4E3A ",(0,c.jsx)(e.code,{children:"1"}),"\u3001",(0,c.jsx)(e.code,{children:"4"}),"\u3001",(0,c.jsx)(e.code,{children:"5"}),"\u3001",(0,c.jsx)(e.code,{children:"2"}),"\u3001",(0,c.jsx)(e.code,{children:"3"}),"\u3002"]}),"\n",(0,c.jsx)(e.h2,{id:"\u5F02\u6B65\u4EFB\u52A1",children:"\u5F02\u6B65\u4EFB\u52A1"}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-javascript",children:"async function async1() {\n  console.log(1); // \u540C\u6B651\n  await async2(); // \u7B49\u5F85async2()\n  /* \u5FAE\u4EFB\u52A1\u533A\u57DF */\n  console.log(2); // async2\u4E86\u5C31\u6267\u884C\n  setTimeout(() => {\n    console.log(3); // \u5F02\u6B653\n  }, 0);\n  /* \u5FAE\u4EFB\u52A1\u533A\u57DF */\n}\nasync function async2() {\n  // \u6700\u5148\u6CE8\u518C\u7684\u8BA1\u65F6\u5668\n  setTimeout(() => {\n    console.log(4); // \u5F02\u6B651\n  }, 0);\n  console.log(5); // \u540C\u6B652\n}\n\nasync1(); // \u4ECE\u8FD9\u91CC\u5F00\u59CB\u6267\u884C\n// async1();\u5361\u4F4F\u4E86\u5C31\u7EE7\u7EED\u6267\u884C\u5F53\u524D\u5B8F\u4EFB\u52A1\nsetTimeout(() => {\n  console.log(6); // \u5F02\u6B652\n}, 0);\nconsole.log(7); // \u540C\u6B653\n"})}),"\n",(0,c.jsx)(e.p,{children:"\u6267\u884C\u987A\u5E8F\uFF1A"}),"\n",(0,c.jsxs)(e.ol,{children:["\n",(0,c.jsxs)(e.li,{children:["\u8F93\u51FA ",(0,c.jsx)(e.code,{children:"1"})]}),"\n",(0,c.jsxs)(e.li,{children:["\u8F93\u51FA ",(0,c.jsx)(e.code,{children:"5"})]}),"\n",(0,c.jsxs)(e.li,{children:["\u8F93\u51FA ",(0,c.jsx)(e.code,{children:"7"})]}),"\n",(0,c.jsxs)(e.li,{children:["\u5FAE\u4EFB\u52A1\u8F93\u51FA ",(0,c.jsx)(e.code,{children:"2"})]}),"\n",(0,c.jsxs)(e.li,{children:["\u5F02\u6B65\u4EFB\u52A1\u6309\u6CE8\u518C\u987A\u5E8F\u8F93\u51FA ",(0,c.jsx)(e.code,{children:"4"}),"\u3001",(0,c.jsx)(e.code,{children:"3"}),"\u3001",(0,c.jsx)(e.code,{children:"6"})]}),"\n"]}),"\n",(0,c.jsx)(e.h2,{id:"pending",children:"pending"}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-javascript",children:"async function async1() {\n  console.log('1'); // \u540C\u6B65 2\n  /* \u8FD9\u91CC\u7684 Promise \u662F pending \u72B6\u6001\u6240\u4EE5\u4E0B\u9762\u7684\u4EE3\u7801\u4E0D\u56DE\u6267\u884C */\n  await new Promise((resolve) => {\n    console.log('2'); // \u540C\u6B653 \u56E0\u4E3A\u662F\u5728\u62EC\u53F7\u91CC\u7684\n  });\n\n  /* \u2193\u662F\u5FAE\u4EFB\u52A1 */\n  console.log('3');\n  return '4';\n}\nconsole.log('5'); // \u540C\u6B651\nasync1().then((res) => console.log(res));\nconsole.log('6'); // \u540C\u6B65 4\n"})}),"\n",(0,c.jsxs)(e.p,{children:["\u7531\u4E8E ",(0,c.jsx)(e.code,{children:"new Promise"})," \u4E2D\u6CA1\u6709\u8C03\u7528 ",(0,c.jsx)(e.code,{children:"resolve"}),"\uFF0CPromise \u59CB\u7EC8\u5904\u4E8E pending \u72B6\u6001\uFF0C\u5BFC\u81F4 ",(0,c.jsx)(e.code,{children:"await"})," \u540E\u7684\u4EE3\u7801\u4E0D\u4F1A\u6267\u884C\u3002\u8F93\u51FA\u987A\u5E8F\u4E3A ",(0,c.jsx)(e.code,{children:"5"}),"\u3001",(0,c.jsx)(e.code,{children:"1"}),"\u3001",(0,c.jsx)(e.code,{children:"2"}),"\u3001",(0,c.jsx)(e.code,{children:"6"}),"\u3002"]}),"\n",(0,c.jsx)(e.h2,{id:"await-\u4E0E\u5FAE\u4EFB\u52A1",children:"await \u4E0E\u5FAE\u4EFB\u52A1"}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-javascript",children:"async function async1() {\n  console.log('1'); // \u540C\u6B652\n  await new Promise((resolve) => {\n    console.log('2'); // \u540C\u6B653\n    resolve('3');\n    // \u7EE7\u7EED\u6309\u7167\u4EE3\u7801\u987A\u5E8F\u6267\u884C\n  }).then((res) => console.log(res)); // \u5FAE1\n  console.log('4'); // \u5FAE2\n  return '5';\n}\nconsole.log('6'); // \u540C\u6B651\nasync1().then((res) => console.log(res)); // \u5FAE3\nconsole.log('7'); // \u540C\u6B654\n"})}),"\n",(0,c.jsx)(e.p,{children:"\u6267\u884C\u987A\u5E8F\uFF1A"}),"\n",(0,c.jsxs)(e.ol,{children:["\n",(0,c.jsxs)(e.li,{children:["\u8F93\u51FA ",(0,c.jsx)(e.code,{children:"6"})]}),"\n",(0,c.jsxs)(e.li,{children:["\u8F93\u51FA ",(0,c.jsx)(e.code,{children:"1"})]}),"\n",(0,c.jsxs)(e.li,{children:["\u8F93\u51FA ",(0,c.jsx)(e.code,{children:"2"})]}),"\n",(0,c.jsxs)(e.li,{children:["\u8F93\u51FA ",(0,c.jsx)(e.code,{children:"7"})]}),"\n",(0,c.jsxs)(e.li,{children:["\u5FAE\u4EFB\u52A1\u8F93\u51FA ",(0,c.jsx)(e.code,{children:"3"})]}),"\n",(0,c.jsxs)(e.li,{children:["\u5FAE\u4EFB\u52A1\u8F93\u51FA ",(0,c.jsx)(e.code,{children:"4"})]}),"\n",(0,c.jsxs)(e.li,{children:["\u5FAE\u4EFB\u52A1\u8F93\u51FA ",(0,c.jsx)(e.code,{children:"5"})]}),"\n"]}),"\n",(0,c.jsx)(e.h2,{id:"\u5FAE\u4EFB\u52A1\u6267\u884C",children:"\u5FAE\u4EFB\u52A1\u6267\u884C"}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-javascript",children:"async function async1() {\n  console.log(1); // \u540C\u6B652\n  await new Promise((resolve) => {\n    console.log(2); // \u540C\u6B653\n    resolve(3);\n  });\n  // \u9760\u524D\u9762\u7684\u5FAE\u4EFB\u52A1\u5148\u6267\u884C\n  console.log(4); // \u5FAE1\n  return 5;\n}\nconsole.log(6); // \u540C\u6B651\n// \u63A5\u6536resolve\uFF083\uFF09\nasync1().then((res) => {\n  console.log(res); // \u5FAE2\n});\nnew Promise((resolve) => {\n  console.log(7); // \u540C\u6B65 4\n  setTimeout(() => {\n    console.log(8); // \u5F02\u6B651\n  }, 0);\n});\n"})}),"\n",(0,c.jsx)(e.p,{children:"\u8F93\u51FA\u987A\u5E8F\uFF1A"}),"\n",(0,c.jsxs)(e.ol,{children:["\n",(0,c.jsxs)(e.li,{children:["\u8F93\u51FA ",(0,c.jsx)(e.code,{children:"6"})]}),"\n",(0,c.jsxs)(e.li,{children:["\u8F93\u51FA ",(0,c.jsx)(e.code,{children:"1"})]}),"\n",(0,c.jsxs)(e.li,{children:["\u8F93\u51FA ",(0,c.jsx)(e.code,{children:"2"})]}),"\n",(0,c.jsxs)(e.li,{children:["\u8F93\u51FA ",(0,c.jsx)(e.code,{children:"7"})]}),"\n",(0,c.jsxs)(e.li,{children:["\u5FAE\u4EFB\u52A1\u8F93\u51FA ",(0,c.jsx)(e.code,{children:"4"})]}),"\n",(0,c.jsxs)(e.li,{children:["\u5FAE\u4EFB\u52A1\u8F93\u51FA ",(0,c.jsx)(e.code,{children:"5"})]}),"\n",(0,c.jsxs)(e.li,{children:["\u5F02\u6B65\u4EFB\u52A1\u8F93\u51FA ",(0,c.jsx)(e.code,{children:"8"})]}),"\n"]}),"\n",(0,c.jsx)(e.h2,{id:"\u591A\u4E2A\u5FAE\u4EFB\u52A1",children:"\u591A\u4E2A\u5FAE\u4EFB\u52A1"}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-javascript",children:"async function testSomething() {\n  console.log('1'); // \u540C\u6B65 2\n  return '2'; // \u8FD4\u56DE\u7684\u662F\u5305\u88C5\u540E\u7684promise \u5C5E\u4E8E\u5FAE\u4EFB\u52A1\n}\n\nasync function testAsync() {\n  console.log('3'); // \u5FAE\u4EFB\u52A1 \u7684\u540C\u6B65\u4EFB\u52A11\n  return Promise.resolve('4');\n}\n\nasync function test() {\n  console.log('5'); // \u540C\u6B651\n  // v1\u7B2C\u4E00\u4E2A\u5148\u6CE8\u518C\u7684\u5FAE\u4EFB\u52A1\u56DE\u8C03\n  const v1 = await testSomething();\n  console.log(v1); // \u5FAE1\n  // v2 \u8981\u7B49\u5F85 v1 \u7684\u7ED3\u679C\uFF0Cv2 \u4EFB\u52A1\u5728v1\u540E\u6267\u884C\n  const v2 = await testAsync();\n  console.log(v2); // \u5FAE3\n  console.log(v1, v2); // \u5FAE4\n}\ntest();\nlet promise = new Promise((resolve) => {\n  console.log('6'); // \u540C\u6B65 3\n  resolve('7'); // \u5FAE\u4EFB\u52A1 2\n});\n// \u7B2C\u4E8C\u4E2A\u6CE8\u518C\u7684\u5FAE\u4EFB\u52A1\npromise.then((val) => console.log(val)); // \u5FAE2 \u7ED3\u679C\nconsole.log('8'); // \u540C\u6B65 4\n"})}),"\n",(0,c.jsx)(e.p,{children:"\u6267\u884C\u987A\u5E8F\uFF1A"}),"\n",(0,c.jsxs)(e.ol,{children:["\n",(0,c.jsxs)(e.li,{children:["\u8F93\u51FA ",(0,c.jsx)(e.code,{children:"5"})]}),"\n",(0,c.jsxs)(e.li,{children:["\u8F93\u51FA ",(0,c.jsx)(e.code,{children:"1"})]}),"\n",(0,c.jsxs)(e.li,{children:["\u8F93\u51FA ",(0,c.jsx)(e.code,{children:"6"})]}),"\n",(0,c.jsxs)(e.li,{children:["\u8F93\u51FA ",(0,c.jsx)(e.code,{children:"3"})]}),"\n",(0,c.jsxs)(e.li,{children:["\u8F93\u51FA ",(0,c.jsx)(e.code,{children:"8"})]}),"\n",(0,c.jsxs)(e.li,{children:["\u5FAE\u4EFB\u52A1\u8F93\u51FA ",(0,c.jsx)(e.code,{children:"2"})]}),"\n",(0,c.jsxs)(e.li,{children:["\u5FAE\u4EFB\u52A1\u8F93\u51FA ",(0,c.jsx)(e.code,{children:"7"})]}),"\n",(0,c.jsxs)(e.li,{children:["\u5FAE\u4EFB\u52A1\u8F93\u51FA ",(0,c.jsx)(e.code,{children:"4"})]}),"\n"]}),"\n",(0,c.jsx)(e.h2,{id:"reject",children:"reject"}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-javascript",children:"async function async1() {\n  await async2(); // \u63A5\u6536\u5230reject\uFF0C\u4E0D\u7EE7\u7EED\u6267\u884C\n  console.log('1');\n  return '2';\n}\n\nasync function async2() {\n  return new Promise((resolve, reject) => {\n    console.log('3'); // \u540C\u6B651\n    reject('4');\n  });\n}\n// \u6210\u529F\u4E4B\u540E\u624D\u4F1A\u6267\u884C\uFF0C\u6240\u4EE5\u4F1A\u62A5\u9519\nasync1()\n  .then((res) => console.log(res))\n  .catch((err) => {\n    console.log(err); // \u6355\u83B7\u9519\u8BEF4\n  });\n"})}),"\n",(0,c.jsxs)(e.p,{children:["\u5728 ",(0,c.jsx)(e.code,{children:"async2"})," \u4E2D\u8C03\u7528 ",(0,c.jsx)(e.code,{children:"reject"}),"\uFF0C\u5BFC\u81F4 ",(0,c.jsx)(e.code,{children:"async1"})," \u4E2D\u7684 ",(0,c.jsx)(e.code,{children:"await"})," \u6355\u83B7\u5230\u9519\u8BEF\uFF0C\u8FDB\u5165 ",(0,c.jsx)(e.code,{children:"catch"}),"\uFF0C\u8F93\u51FA ",(0,c.jsx)(e.code,{children:"4"}),"\u3002"]}),"\n",(0,c.jsx)(e.h2,{id:"trycatch",children:"try...catch"}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-javascript",children:"async function async1() {\n  try {\n    await Promise.reject('1');\n  } catch (e) {\n    console.log(2); // 1 \u6355\u83B7\u9519\u8BEF\u7EE7\u7EED\u6267\u884C\n  }\n  console.log(3); // 2\n  return Promise.resolve('4');\n}\n\nasync1().then((res) => console.log(res)); // 3\nconsole.log('5'); // \u540C\u6B651\n"})}),"\n",(0,c.jsxs)(e.p,{children:["\u901A\u8FC7 ",(0,c.jsx)(e.code,{children:"try...catch"})," \u6355\u83B7 ",(0,c.jsx)(e.code,{children:"Promise"})," \u7684\u62D2\u7EDD\uFF0C\u4EE3\u7801\u7EE7\u7EED\u6267\u884C\u3002\u8F93\u51FA\u987A\u5E8F\u4E3A ",(0,c.jsx)(e.code,{children:"5"}),"\u3001",(0,c.jsx)(e.code,{children:"2"}),"\u3001",(0,c.jsx)(e.code,{children:"3"}),"\u3001",(0,c.jsx)(e.code,{children:"4"}),"\u3002"]}),"\n",(0,c.jsx)(e.h2,{id:"\u7EFC\u5408\u793A\u4F8B",children:"\u7EFC\u5408\u793A\u4F8B"}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-javascript",children:"const async1 = async () => {\n  console.log('1'); // \u540C\u6B652\n\n  setTimeout(() => {\n    console.log('2'); // \u5F02\u6B652\n  }, 2000);\n  await new Promise((resolve) => {\n    console.log(3); // \u540C\u6B653\n  });\n  // \u5FAE\u4EFB\u52A1\u65E0\u72B6\u6001\uFF0C\u540E\u7EED\u4EE3\u7801\u4E0D\u6267\u884C\n  console.log(4);\n  return 5;\n};\n\nconsole.log('6'); // \u540C\u6B651\nasync1().then((res) => console.log(res)); // \u4E00\u76F4\u7B49\u5F85Promise\u7684\u503C\nconsole.log(7); // \u540C\u6B654\n\n// Promise\nPromise.resolve(1)\n  // .then\u5FC5\u987B\u63A5\u6536\u7684\u662F\u51FD\u6570\uFF0C\u5FFD\u7565\n  .then(2)\n  // \u5FFD\u7565\n  .then(Promise.resolve(3))\n  // \u5FFD\u7565\n  .catch(4)\n  .then((res) => console.log(res)); // \u5FAE1 1\n\nsetTimeout(() => {\n  console.log(8); // \u5F02\u6B651\n}, 1000);\n"})}),"\n",(0,c.jsxs)(e.p,{children:["\u5728\u8FD9\u4E2A\u7EFC\u5408\u793A\u4F8B\u4E2D\uFF0C\u5C55\u793A\u4E86 ",(0,c.jsx)(e.code,{children:"async/await"})," \u4E0E ",(0,c.jsx)(e.code,{children:"Promise"})," \u7684\u590D\u6742\u4EA4\u4E92\u3002\u8F93\u51FA\u987A\u5E8F\u4E3A\uFF1A"]}),"\n",(0,c.jsxs)(e.ol,{children:["\n",(0,c.jsxs)(e.li,{children:["\u8F93\u51FA ",(0,c.jsx)(e.code,{children:"6"})]}),"\n",(0,c.jsxs)(e.li,{children:["\u8F93\u51FA ",(0,c.jsx)(e.code,{children:"1"})]}),"\n",(0,c.jsxs)(e.li,{children:["\u8F93\u51FA ",(0,c.jsx)(e.code,{children:"3"})]}),"\n",(0,c.jsxs)(e.li,{children:["\u8F93\u51FA ",(0,c.jsx)(e.code,{children:"7"})]}),"\n",(0,c.jsxs)(e.li,{children:["\u8F93\u51FA ",(0,c.jsx)(e.code,{children:"1"}),"\uFF08\u6765\u81EA ",(0,c.jsx)(e.code,{children:"Promise.resolve(1)"})," \u7684\u5FAE\u4EFB\u52A1\uFF09"]}),"\n",(0,c.jsxs)(e.li,{children:["\u8F93\u51FA ",(0,c.jsx)(e.code,{children:"5"})]}),"\n",(0,c.jsxs)(e.li,{children:["\u8F93\u51FA ",(0,c.jsx)(e.code,{children:"8"})]}),"\n",(0,c.jsxs)(e.li,{children:["\u8F93\u51FA ",(0,c.jsx)(e.code,{children:"2"}),"\uFF08\u4E24\u79D2\u540E\uFF09"]}),"\n",(0,c.jsxs)(e.li,{children:["\u8F93\u51FA ",(0,c.jsx)(e.code,{children:"4"})]}),"\n"]}),"\n",(0,c.jsx)(e.h2,{id:"finally",children:"finally"}),"\n",(0,c.jsx)(e.pre,{children:(0,c.jsx)(e.code,{className:"language-javascript",children:"const p1 = new Promise((resolve) => {\n  setTimeout(() => {\n    resolve(1);\n    console.log(2); // 3 2\n  }, 0);\n  resolve(3);\n  resolve(4);\n})\n  .then((res) => {\n    console.log(res); // 1  3\n    setTimeout(() => {\n      console.log(p1); //4 Promise fulfilled\n    }, 1000);\n  })\n  .finally((res) => {\n    // \u56E0\u4E3A\u524D\u4E00\u4E2A.then\u6CA1\u6709resolved \u6216 rejected \u8FD4\u56DE undefined\n    console.log('finally', res); // 2 finally undefined\n  });\n"})}),"\n",(0,c.jsxs)(e.p,{children:[(0,c.jsx)(e.code,{children:"finally"})," \u65E0\u8BBA Promise \u6700\u7EC8\u72B6\u6001\u5982\u4F55\uFF0C\u90FD\u4F1A\u6267\u884C\u3002\u5728\u6B64\u4F8B\u4E2D\uFF0C\u8F93\u51FA\u987A\u5E8F\u4E3A\uFF1A"]}),"\n",(0,c.jsxs)(e.ol,{children:["\n",(0,c.jsxs)(e.li,{children:["\u8F93\u51FA ",(0,c.jsx)(e.code,{children:"3"}),"\uFF08",(0,c.jsx)(e.code,{children:"resolve(3)"})," \u4F18\u5148\u4E8E ",(0,c.jsx)(e.code,{children:"resolve(4)"}),")"]}),"\n",(0,c.jsxs)(e.li,{children:["\u8F93\u51FA ",(0,c.jsx)(e.code,{children:"finally undefined"})]}),"\n",(0,c.jsxs)(e.li,{children:["\u8F93\u51FA ",(0,c.jsx)(e.code,{children:"1"})]}),"\n",(0,c.jsxs)(e.li,{children:["\u8F93\u51FA ",(0,c.jsx)(e.code,{children:"2"})]}),"\n",(0,c.jsxs)(e.li,{children:["\u4E00\u79D2\u540E\u8F93\u51FA ",(0,c.jsx)(e.code,{children:"Promise { <fulfilled>: 3 }"})]}),"\n"]})]})}function t(n={}){let{wrapper:e}={...(0,o.a)(),...n.components};return e?(0,c.jsx)(e,{...n,children:(0,c.jsx)(h,{...n})}):h(n)}},50065:function(n,e,s){s.d(e,{Z:function(){return i},a:function(){return r}});var l=s(67294);let c={},o=l.createContext(c);function r(n){let e=l.useContext(o);return l.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function i(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(c):n.components||c:r(n.components),l.createElement(o.Provider,{value:e},n.children)}}}]);