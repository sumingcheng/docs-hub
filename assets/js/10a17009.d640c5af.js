"use strict";(self.webpackChunknote_book=self.webpackChunknote_book||[]).push([[60102],{14299:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>s,contentTitle:()=>l,default:()=>p,frontMatter:()=>a,metadata:()=>o,toc:()=>d});const o=JSON.parse('{"id":"Network/HTTP/keep-alive\u673a\u5236","title":"\u52a8\u6001\u5f02\u6b65\u7ec4\u4ef6","description":"\u5f02\u6b65\u7ec4\u4ef6","source":"@site/docs/Network/HTTP/110.keep-alive\u673a\u5236.md","sourceDirName":"Network/HTTP","slug":"/Network/HTTP/keep-alive\u673a\u5236","permalink":"/docs-hub/docs/Network/HTTP/keep-alive\u673a\u5236","draft":false,"unlisted":false,"editUrl":"https://github.com/sumingcheng/docs-hub/edit/main/docs/Network/HTTP/110.keep-alive\u673a\u5236.md","tags":[],"version":"current","lastUpdatedBy":"sumingcheng","lastUpdatedAt":1733823104000,"sidebarPosition":110,"frontMatter":{},"sidebar":"networkHttpSidebar","previous":{"title":"HTTP \u54cd\u5e94\u5934\u8be6\u89e3","permalink":"/docs-hub/docs/Network/HTTP/Response-Headers\u8be6\u89e3"},"next":{"title":"\u5b57\u7b26\u7f16\u7801\u4e0e\u4e71\u7801\u5904\u7406\u6307\u5357","permalink":"/docs-hub/docs/Network/HTTP/\u7f16\u7801\u4e0e\u4e71\u7801\u5904\u7406"}}');var c=t(74848),i=t(28453);const a={},l="\u52a8\u6001\u5f02\u6b65\u7ec4\u4ef6",s={},d=[{value:"\u5f02\u6b65\u7ec4\u4ef6",id:"\u5f02\u6b65\u7ec4\u4ef6",level:2},{value:"\u52a8\u6001\u7ec4\u4ef6",id:"\u52a8\u6001\u7ec4\u4ef6",level:2},{value:"keep-alive \u7684\u539f\u7406",id:"keep-alive-\u7684\u539f\u7406",level:2},{value:"keep-alive \u5c5e\u6027",id:"keep-alive-\u5c5e\u6027",level:2},{value:"exclude",id:"exclude",level:2},{value:"include",id:"include",level:2},{value:"max",id:"max",level:2},{value:"\u6b63\u5219\u5339\u914d",id:"\u6b63\u5219\u5339\u914d",level:2},{value:"\u5e38\u89c1\u95ee\u9898",id:"\u5e38\u89c1\u95ee\u9898",level:2}];function r(e){const n={code:"code",h1:"h1",h2:"h2",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",...(0,i.R)(),...e.components};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(n.header,{children:(0,c.jsx)(n.h1,{id:"\u52a8\u6001\u5f02\u6b65\u7ec4\u4ef6",children:"\u52a8\u6001\u5f02\u6b65\u7ec4\u4ef6"})}),"\n",(0,c.jsx)(n.h2,{id:"\u5f02\u6b65\u7ec4\u4ef6",children:"\u5f02\u6b65\u7ec4\u4ef6"}),"\n",(0,c.jsxs)(n.p,{children:["\u5f02\u6b65\u7ec4\u4ef6\u4f1a\u88ab\u5206\u5272\u6210\u4ee3\u7801\u5757\u6587\u4ef6\uff0c\u5e76\u6309\u9700\u4ece\u670d\u52a1\u5668\u4e0a\u4e0b\u8f7d\u7ec4\u4ef6",(0,c.jsx)(n.code,{children:"xx.js"}),"\u3002"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-vue",children:"\x3c!-- Vue2 --\x3e\nAsyncComp: () => import('./xxx'); /* Vue3 */ import { defineAsyncComponent } from 'vue'; const AsyncComp = defineAsyncComponent(() => import('./xxx'));\n"})}),"\n",(0,c.jsx)(n.h2,{id:"\u52a8\u6001\u7ec4\u4ef6",children:"\u52a8\u6001\u7ec4\u4ef6"}),"\n",(0,c.jsx)(n.p,{children:"\u5728\u4ea4\u4e92\u4e2d\uff0c\u7ec4\u4ef6\u7684\u6e32\u67d3\u662f\u4e0d\u786e\u5b9a\u7684\uff0c\u6839\u636e\u7528\u6237\u7684\u64cd\u4f5c\u51b3\u5b9a\u6e32\u67d3\u54ea\u4e2a\u7ec4\u4ef6\u3002"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-javascript",children:'<component :is="currentComponent"></component>\n'})}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-vue",children:"<template>\n  <div class=\"login-tab\">\n    <div class=\"login-nav\">\n      <div v-for=\"tab in tabs\" :key=\"tab\" :class=\"['nav-item', { active: activeTab === tab }]\" @click=\"switchTab(tab)\">{{ tab }}</div>\n    </div>\n    <div class=\"login-component\">\n      <keep-alive>\n        <component :is=\"activeComponent\"></component>\n      </keep-alive>\n    </div>\n  </div>\n</template>\n\n<script>\nimport AccountLogin from './AccountLogin';\n\nexport default {\n  name: 'MainLogin',\n  components: {\n    AccountLogin,\n    QrcodeLogin: () => import('./QrcodeLogin'),\n    MobileLogin: () => import('./MobileLogin'),\n  },\n  data() {\n    return {\n      activeTab: 'Account',\n      tabs: ['Account', 'Qrcode', 'Mobile'],\n    };\n  },\n  methods: {\n    switchTab(tab) {\n      this.activeTab = tab;\n    },\n  },\n  computed: {\n    activeComponent() {\n      return this.activeTab.toLowerCase() + '-login';\n    },\n  },\n};\n<\/script>\n"})}),"\n",(0,c.jsx)(n.h1,{id:"keep-alive",children:"keep-alive"}),"\n",(0,c.jsxs)(n.p,{children:["\u88ab",(0,c.jsx)(n.code,{children:"keep-alive"}),"\u5305\u88f9\u7684\u7ec4\u4ef6\u5728\u5207\u6362\u65f6\u4f1a\u7f13\u5b58\u7ec4\u4ef6\uff0c\u4fdd\u6301\u7ec4\u4ef6\u72b6\u6001\uff0c\u907f\u514d\u9891\u7e41\u6e32\u67d3\u5e26\u6765\u7684\u6027\u80fd\u95ee\u9898\u3002"]}),"\n",(0,c.jsxs)(n.ol,{children:["\n",(0,c.jsx)(n.li,{children:"vDOM\uff1a\u865a\u62df DOM"}),"\n",(0,c.jsx)(n.li,{children:"vNode\uff1a\u865a\u62df\u8282\u70b9"}),"\n",(0,c.jsx)(n.li,{children:"rDOM\uff1a\u771f\u5b9e DOM"}),"\n",(0,c.jsx)(n.li,{children:"rNode\uff1a\u771f\u5b9e\u8282\u70b9"}),"\n"]}),"\n",(0,c.jsx)(n.h2,{id:"keep-alive-\u7684\u539f\u7406",children:"keep-alive \u7684\u539f\u7406"}),"\n",(0,c.jsxs)(n.p,{children:["\u7528\u6237\u64cd\u4f5c\u89c6\u56fe\u5bfc\u81f4\u7ec4\u4ef6\u663e\u793a\u53d8\u5316\uff0c\u88ab",(0,c.jsx)(n.code,{children:"keep-alive"}),"\u5305\u88f9\u7684\u7ec4\u4ef6\u4f1a\u7f13\u5b58\u5176",(0,c.jsx)(n.code,{children:"vNode"}),"\u3002\u6709\u7f13\u5b58\u7684",(0,c.jsx)(n.code,{children:"vNode"}),"\u65f6\uff0c\u76f4\u63a5\u7528\u5b83\u66f4\u65b0",(0,c.jsx)(n.code,{children:"DOM"}),"\uff0c\u65e0\u9700\u7ecf\u8fc7",(0,c.jsx)(n.code,{children:"unmounted"}),"\uff0c\u518d\u6b21\u6fc0\u6d3b\u65f6\u4e0d\u89e6\u53d1",(0,c.jsx)(n.code,{children:"mounted"}),"\uff0c\u800c\u662f\u8c03\u7528",(0,c.jsx)(n.code,{children:"activated"}),"\uff0c\u5931\u6d3b\u65f6\u8c03\u7528",(0,c.jsx)(n.code,{children:"deactivated"}),"\u3002"]}),"\n",(0,c.jsx)(n.h2,{id:"keep-alive-\u5c5e\u6027",children:"keep-alive \u5c5e\u6027"}),"\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.code,{children:"keep-alive"}),"\u6b63\u5e38\u5339\u914d\u7ec4\u4ef6\u7684",(0,c.jsx)(n.code,{children:"name"}),"\u5c5e\u6027\uff0c\u82e5\u65e0\u5219\u5339\u914d\u5c40\u90e8\u6ce8\u518c\u7684\u7ec4\u4ef6\u540d\u79f0\u3002"]}),"\n",(0,c.jsx)(n.h2,{id:"exclude",children:"exclude"}),"\n",(0,c.jsx)(n.p,{children:"\u6392\u9664\u7279\u5b9a\u7ec4\u4ef6\u4e0d\u88ab\u7f13\u5b58\u3002"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-vue",children:'<keep-alive exclude="List,Intro">\n  <component :is="currentComponent"></component>\n</keep-alive>\n'})}),"\n",(0,c.jsx)(n.h2,{id:"include",children:"include"}),"\n",(0,c.jsx)(n.p,{children:"\u4ec5\u5141\u8bb8\u7279\u5b9a\u7ec4\u4ef6\u88ab\u7f13\u5b58\u3002"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-vue",children:'<keep-alive include="List,Intro">\n  <component :is="currentComponent"></component>\n</keep-alive>\n'})}),"\n",(0,c.jsx)(n.h2,{id:"max",children:"max"}),"\n",(0,c.jsx)(n.p,{children:"\u9650\u5236\u6700\u591a\u7f13\u5b58\u7684\u7ec4\u4ef6\u6570\u91cf\u3002"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-vue",children:'<keep-alive max="10">\n  <component :is="currentComponent"></component>\n</keep-alive>\n'})}),"\n",(0,c.jsx)(n.h2,{id:"\u6b63\u5219\u5339\u914d",children:"\u6b63\u5219\u5339\u914d"}),"\n",(0,c.jsx)(n.p,{children:"\u4f7f\u7528\u6b63\u5219\u8868\u8fbe\u5f0f\u5339\u914d\u9700\u8981\u7f13\u5b58\u7684\u7ec4\u4ef6\u3002"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-vue",children:'<keep-alive :include="/^List|Intro$/">\n  <component :is="currentComponent"></component>\n</keep-alive>\n'})}),"\n",(0,c.jsx)(n.h2,{id:"\u5e38\u89c1\u95ee\u9898",children:"\u5e38\u89c1\u95ee\u9898"}),"\n",(0,c.jsxs)(n.p,{children:["\u5f02\u6b65\u7ec4\u4ef6\u65e0\u6cd5\u4f7f\u7528",(0,c.jsx)(n.code,{children:"include"}),"\u5c5e\u6027\uff0c\u867d\u7136\u88ab\u7f13\u5b58\u4f46\u65e0\u6cd5\u6b63\u786e\u663e\u793a\u3002\u5bf9\u4e8e\u5f02\u6b65\u7ec4\u4ef6\uff0c\u5efa\u8bae\u4f7f\u7528",(0,c.jsx)(n.code,{children:"exclude"}),"\u5c5e\u6027\u3002"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-vue",children:'<keep-alive exclude="AsyncComponent">\n  <component :is="currentComponent"></component>\n</keep-alive>\n'})}),"\n",(0,c.jsx)(n.h1,{id:"keep-alive-\u5b9e\u73b0",children:"keep-alive \u5b9e\u73b0"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-javascript",children:"import Comp1 from './components/Comp1';\nimport Comp2 from './components/Comp2';\nimport Comp3 from './components/Comp3';\n\nconst buttons = document.getElementById('buttons');\nconst wrapper = document.getElementById('wrapper');\n\nconst App = {\n  components: {\n    Comp1,\n    Comp2,\n    Comp3,\n  },\n  cache: {},\n  init() {\n    this.bindEvents();\n  },\n  mounted(callback) {\n    callback && callback();\n  },\n  activated(callback) {\n    callback && callback();\n  },\n  bindEvents() {\n    buttons.addEventListener('click', this.handleButtonClick.bind(this), false);\n  },\n  handleButtonClick(event) {\n    const target = event.target;\n    const tag = target.tagName.toLowerCase();\n\n    if (tag === 'span') {\n      const key = target.dataset.key;\n      let vNode = this.cache[key];\n\n      if (!vNode) {\n        vNode = this.createVNode(this.components[key]);\n        if (this.isKeepAlive(wrapper)) {\n          this.cache[key] = vNode;\n        }\n      }\n\n      const realNode = this.createRealNode(vNode);\n      wrapper.innerHTML = '';\n      wrapper.appendChild(realNode);\n\n      if (this.isKeepAlive(wrapper)) {\n        this.activated(() => {\n          console.log(`${key} activated`);\n        });\n      } else {\n        this.mounted(() => {\n          console.log(`${key} mounted`);\n        });\n      }\n    }\n  },\n  createVNode(component) {\n    const { template, name } = component;\n    const tag = template.match(/<(.+?)>/)[1];\n    const content = template.match(/>(.+?)</)[1];\n\n    return {\n      tag,\n      children: content,\n      mark: name,\n    };\n  },\n  createRealNode(vNode) {\n    const node = document.createElement(vNode.tag);\n    node.innerText = vNode.children;\n    return node;\n  },\n  isKeepAlive(wrapper) {\n    const parentTag = wrapper.parentNode.tagName.toLowerCase();\n    return parentTag === 'keep-alive';\n  },\n};\n\nApp.init();\n"})})]})}function p(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,c.jsx)(n,{...e,children:(0,c.jsx)(r,{...e})}):r(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>a,x:()=>l});var o=t(96540);const c={},i=o.createContext(c);function a(e){const n=o.useContext(i);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(c):e.components||c:a(e.components),o.createElement(i.Provider,{value:n},e.children)}}}]);