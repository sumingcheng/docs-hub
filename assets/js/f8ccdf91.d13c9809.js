"use strict";(self.webpackChunknote_book=self.webpackChunknote_book||[]).push([["84008"],{82164:function(e,n,r){r.r(n),r.d(n,{assets:function(){return l},contentTitle:function(){return d},default:function(){return a},frontMatter:function(){return t},metadata:function(){return s},toc:function(){return o}});var s=r(11872),i=r(85893),c=r(50065);let t={slug:"\u89E3\u51B3\u8DE8\u57DF\u7684\u4E5D\u79CD\u65B9\u6848",title:"\u89E3\u51B3\u8DE8\u57DF\u7684\u4E5D\u79CD\u65B9\u6848",authors:["sumingcheng"],tags:["network-protocol"],date:new Date("2023-02-28T00:00:00.000Z")},d="\u89E3\u51B3\u8DE8\u57DF\u7684\u4E5D\u79CD\u65B9\u6848",l={authorsImageUrls:[void 0]},o=[{value:"\u4E00\u3001Proxy",id:"\u4E00proxy",level:2},{value:"\u4E94\u3001\u8BBE\u7F6E\u57FA\u7840\u57DF\u540D\u540C\u6E90+iframe",id:"\u4E94\u8BBE\u7F6E\u57FA\u7840\u57DF\u540D\u540C\u6E90iframe",level:2},{value:"\u4E03\u3001postmessage+iframe\uFF08\u4E0D\u5E38\u7528\uFF09",id:"\u4E03postmessageiframe\u4E0D\u5E38\u7528",level:2}];function h(e){let n={a:"a",code:"code",h2:"h2",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,c.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h2,{id:"\u4E00proxy",children:"\u4E00\u3001Proxy"}),"\n",(0,i.jsx)(n.p,{children:"\u914D\u7F6E vue.config.js"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"amodule.exports = {\n    devServer: {\n        host: '127.0.0.1',\n        port: 8084,\n        open: true,// vue\u9879\u76EE\u542F\u52A8\u65F6\u81EA\u52A8\u6253\u5F00\u6D4F\u89C8\u5668\n        proxy: {\n            '/api': { // '/api'\u662F\u4EE3\u7406\u6807\u8BC6\uFF0C\u7528\u4E8E\u544A\u8BC9node\uFF0Curl\u524D\u9762\u662F/api\u7684\u5C31\u662F\u4F7F\u7528\u4EE3\u7406\u7684\n                target: \"http://xxx.xxx.xx.xx:8080\", //\u76EE\u6807\u5730\u5740\uFF0C\u4E00\u822C\u662F\u6307\u540E\u53F0\u670D\u52A1\u5668\u5730\u5740\n                changeOrigin: true, //\u662F\u5426\u8DE8\u57DF\n                pathRewrite: { // pathRewrite \u7684\u4F5C\u7528\u662F\u628A\u5B9E\u9645Request Url\u4E2D\u7684'/api'\u7528\"\"\u4EE3\u66FF\n                    '^/api': \"\"\n                }\n            }\n        }\n    }\n}\n"})}),"\n",(0,i.jsx)(n.p,{children:"\u901A\u8FC7 Axios \u53D1\u9001\u8BF7\u6C42"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"axios.defaults.baseURL = '/api'\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"\u4E8C\u3001\u4E2D\u95F4\u5C42"})}),"\n",(0,i.jsx)(n.p,{children:"express \u6846\u67B6"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"var express = require('express');\nconst proxy = require('http-proxy-middleware')\nconst app = express()\napp.use(express.static(__dirname + '/'))\napp.use('/api', proxy({ target: 'http://localhost:8088',\n                        changeOrigin: false\n                      }));\n\nmodule.exports = app\n\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"\u4E09\u3001Nginx"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"server {\n    listen    80;\n    # server_name www.josephxia.com;\n    location / {\n        root  /var/www/html;\n        index  index.html index.htm;\n        try_files $uri $uri/ /index.html;\n    }\n    location /api {\n        proxy_pass  http://127.0.0.1:8888;\n        proxy_redirect   off;\n        proxy_set_header  Host       $host;\n        proxy_set_header  X-Real-IP     $remote_addr;\n        proxy_set_header  X-Forwarded-For  $proxy_add_x_forwarded_for;\n    }\n}\n\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"\u56DB\u3001JSONP"})}),"\n",(0,i.jsxs)(n.p,{children:["\u8DE8\u57DF\u83B7\u53D6",(0,i.jsx)(n.code,{children:"JSON"}),"\u6570\u636E\u7684\u4E00\u79CD\u975E\u5B98\u65B9\u7684\u4F7F\u7528\u6A21\u5F0F"]}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"JSON"}),"\u548C",(0,i.jsx)(n.code,{children:"JSONP"}),"\u4E0D\u662F\u4E00\u4E2A\u7C7B\u578B\u3002"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"JSON"}),"\u662F\u6570\u636E\u4EA4\u6362\u683C\u5F0F\u3002"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"JSONP"}),"\u662F\u4E00\u79CD\u8DE8\u57DF\u83B7\u53D6",(0,i.jsx)(n.code,{children:"JSON"}),"\u6570\u636E\u7684\u4EA4\u4E92\u6280\u672F \u975E\u6B63\u5F0F\u7684\u534F\u8BAE\u3002"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"JSONP"}),"\u6293\u53D6\u7684\u8D44\u6E90\u5E76\u4E0D\u76F4\u63A5\u662F",(0,i.jsx)(n.code,{children:"JSON"}),"\u6570\u636E\uFF0C\u800C\u662F\u5E26\u6709",(0,i.jsx)(n.code,{children:"JSON"}),"\u6570\u636E\u53C2\u6570\u7684\u51FD\u6570\u6267\u884C\u3002"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"\u4F18\u70B9"})}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"\u517C\u5BB9\u6027\u597D\uFF0C\u53EF\u4EE5\u8FD0\u884C\u5728\u8FDC\u53E4\u7684\u6D4F\u89C8\u5668\u4E2D\uFF0C\u4E0D\u9700\u8981 XMLHttpReques t \u6216 ActiveX \u7684\u652F\u6301\u3002"}),"\n",(0,i.jsx)(n.li,{children:"\u8BF7\u6C42\u540E\u53EF\u4EE5\u901A\u8FC7 callback \u7684\u65B9\u5F0F\u56DE\u4F20\u7ED3\u679C\uFF0CJQ \u6709\u5C01\u88C5\u597D\u7684 JSONP \u65B9\u6CD5\u53EF\u4EE5\u4F7F\u7528\u3002"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"\u7F3A\u70B9"})}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"\u5B83\u53EA\u652F\u6301 GET \u8BF7\u6C42\uFF0C\u4E0D\u652F\u6301\u5176\u4ED6\u7C7B\u578B\u7684\u8BF7\u6C42\u3002\u56E0\u4E3A Script \u662F\u901A\u8FC7 GET \u8BF7\u6C42\u53D1\u9001\u7684"}),"\n",(0,i.jsx)(n.li,{children:"\u4E0D\u80FD\u89E3\u51B3\u4E24\u4E2A\u9875\u9762\u76F4\u63A5\u8FDB\u884C JavaScript \u8C03\u7528\u7684\u95EE\u9898"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"\u4E94\u8BBE\u7F6E\u57FA\u7840\u57DF\u540D\u540C\u6E90iframe",children:"\u4E94\u3001\u8BBE\u7F6E\u57FA\u7840\u57DF\u540D\u540C\u6E90+iframe"}),"\n",(0,i.jsx)(n.p,{children:"\u524D\u7AEF\u6765\u505A\uFF0C\u524D\u63D0\u662F\u57FA\u7840\u57DF\u540D\u5FC5\u987B\u76F8\u540C"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.a,{href:"https://developer.mozilla.org/zh-CN/docs/Web/API/Document/domain",children:"Document.domain - Web API \u63A5\u53E3\u53C2\u8003 | MDN"}),"## \u516D\u3001window.name+iframe\uFF08\u4F20\u6BD4\u8F83\u7B80\u5355\u7684\u503C\uFF09"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"window.name"}),"\u7684\u7279\u70B9\uFF1A"]}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["\u6BCF\u4E2A\u6D4F\u89C8\u5668\u7A97\u53E3\u90FD\u6709\u4E00\u4E2A\u5168\u5C40\u53D8\u91CF",(0,i.jsx)(n.code,{children:"window"}),"(\u5305\u542B",(0,i.jsx)(n.code,{children:"iframe"}),"\u6846\u67B6",(0,i.jsx)(n.code,{children:"contentWindow"}),")"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["\u6BCF\u4E2A",(0,i.jsx)(n.code,{children:"window"}),"\u5BF9\u8C61\u90FD\u6709\u4E00\u4E2A",(0,i.jsx)(n.code,{children:"name"}),"\u5C5E\u6027\uFF08\u6CE8\u610F\uFF1A\u4E00\u4E2A\u7A97\u53E3\u53EA\u6709\u4E00\u4E2A",(0,i.jsx)(n.code,{children:"name"}),"\u5C5E\u6027\uFF09"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["\u8BE5\u7A97\u53E3\u88AB\u5173\u95ED\u524D(\u751F\u547D\u5468\u671F\u5185)\uFF0C\u6240\u6709\u9875\u9762\u5171\u4EAB\u4E00\u4E2A",(0,i.jsx)(n.code,{children:"name"}),"\u5C5E\u6027\u5E76\u6709\u8BFB\u5199\u7684\u6743\u9650"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["\u65E0\u8BBA\u8BE5\u7A97\u53E3\u5728\u88AB\u5173\u95ED\u524D\uFF0C\u8F7D\u5165\u4EC0\u4E48\u9875\u9762\uFF0C\u90FD\u4E0D\u4F1A\u6539\u53D8",(0,i.jsx)(n.code,{children:"name"}),"\u503C"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["\u5B58\u50A8\u7EA6\u4E3A",(0,i.jsx)(n.code,{children:"2M"}),"\u7684\u5B57\u7B26\u4E32"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["\u5982\u679C\u7236\u7EA7\u7A97\u53E3\u5730\u5740\u6E90\u548C",(0,i.jsx)(n.code,{children:"iframe"}),"\u7684\u5730\u5740\u6E90\u4E0D\u540C\uFF0C\u7236\u7EA7\u65E0\u6CD5\u901A\u8FC7",(0,i.jsx)(n.code,{children:"iframe.contentWindow.name"}),"\u83B7\u53D6\u503C\uFF0C\u4F46",(0,i.jsx)(n.code,{children:"iframe"}),"\u5185\u90E8\u4E0D\u53D7\u8BE5\u89C4\u5219\u9650\u5236"]}),"\n",(0,i.jsxs)(n.p,{children:["\u89E3\u51B3\u65B9\u6848\uFF1A\u5148\u8BA9",(0,i.jsx)(n.code,{children:"iframe"}),"\u4E2D\u7684\u9875\u9762\u7A0B\u5E8F\u4FDD\u5B58",(0,i.jsx)(n.code,{children:"window.name"}),", \u7136\u540E\u8DF3\u8F6C\u4E0E\u7236\u7EA7\u7A97\u53E3\u540C\u6E90\u7684\u53E6\u4E00\u4E2A\u9875\u9762\uFF0C\u7236\u7EA7\u9875\u9762\u53EF\u4EE5\u4ECE\u5F53\u524D\u7684",(0,i.jsx)(n.code,{children:"iframe"}),"\u62FF\u5230\u8BE5\u9875\u9762\u7684",(0,i.jsx)(n.code,{children:"window.name"})]}),"\n",(0,i.jsx)(n.h2,{id:"\u4E03postmessageiframe\u4E0D\u5E38\u7528",children:"\u4E03\u3001postmessage+iframe\uFF08\u4E0D\u5E38\u7528\uFF09"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"\u4E0D\u5E38\u7528\u539F\u56E0\uFF1A"})}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"\u4F2A\u9020\u6570\u636E\u7AEF\u6F0F\u6D1E"}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"XSS"}),"\u653B\u51FB"]}),"\n",(0,i.jsx)(n.li,{children:"\u517C\u5BB9\u6027\u95EE\u9898"}),"\n",(0,i.jsx)(n.li,{children:"\u8C03\u8BD5\u7684\u65F6\u5019\u4E5F\u5BB9\u6613\u51FA\u73B0\u95EE\u9898"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["\u53D8\u91CF\u53C2\u6570\uFF1A",(0,i.jsx)(n.code,{children:"otherWindow.postMessage(message, targetOrigin)"})]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"otherWindow"}),": \u63A5\u6536\u65B9\u7684\u5F15\u7528"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"message"}),": \u8981\u53D1\u9001\u5230\u63A5\u53D7\u65B9\u7684\u6570\u636E"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"targetOrigin"}),": \u63A5\u6536\u65B9\u7684\u6E90\uFF0C\u8FD8\u6709\u5FC5\u987B\u8981\u6709\u76D1\u542C",(0,i.jsx)(n.code,{children:"message"}),"\u4E8B\u4EF6"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"\u516B\u3001hash+iframe\uFF08\u4E0D\u5E38\u7528\uFF09"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.img,{alt:"e0d765cff3769a77cd9906828427d3b9",src:r(85127).Z+"",width:"1440",height:"428"}),"## \u4E5D\u3001cors \u8DE8\u57DF"]}),"\n",(0,i.jsx)(n.p,{children:"\u540E\u7AEF\u53EF\u80FD\u4F1A\u5B58\u5728\u5B89\u5168\u95EE\u9898\uFF0C\u8FD9\u79CD\u65B9\u5F0F\u9700\u8981\u534F\u5546"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"89910dfd25b533653c07cb085e44dbe4",src:r(57524).Z+"",width:"1406",height:"429"})})]})}function a(e={}){let{wrapper:n}={...(0,c.a)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(h,{...e})}):h(e)}},57524:function(e,n,r){r.d(n,{Z:function(){return s}});let s=r.p+"assets/images/89910dfd25b533653c07cb085e44dbe4-15b624ac66506a62b0bfcd73183f1697.jpg"},85127:function(e,n,r){r.d(n,{Z:function(){return s}});let s=r.p+"assets/images/e0d765cff3769a77cd9906828427d3b9-f20a3bcbcebfcb4d0f5b59487c323bd4.jpg"},50065:function(e,n,r){r.d(n,{Z:function(){return d},a:function(){return t}});var s=r(67294);let i={},c=s.createContext(i);function t(e){let n=s.useContext(c);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:t(e.components),s.createElement(c.Provider,{value:n},e.children)}},11872:function(e){e.exports=JSON.parse('{"permalink":"/docs-hub/blog/\u89E3\u51B3\u8DE8\u57DF\u7684\u4E5D\u79CD\u65B9\u6848","editUrl":"https://github.com/sumingcheng/docs-hub/blog/\u7F51\u7EDC\u4E0E\u534F\u8BAE/2023-02-28-\u89E3\u51B3\u8DE8\u57DF\u7684\u4E5D\u79CD\u65B9\u6848.md","source":"@site/blog/\u7F51\u7EDC\u4E0E\u534F\u8BAE/2023-02-28-\u89E3\u51B3\u8DE8\u57DF\u7684\u4E5D\u79CD\u65B9\u6848.md","title":"\u89E3\u51B3\u8DE8\u57DF\u7684\u4E5D\u79CD\u65B9\u6848","description":"\u4E00\u3001Proxy","date":"2023-02-28T00:00:00.000Z","tags":[{"inline":false,"label":"\u7F51\u7EDC\u4E0E\u534F\u8BAE","permalink":"/docs-hub/blog/tags/network-protocol","description":"\u7F51\u7EDC\u6280\u672F\u548C\u534F\u8BAE\u76F8\u5173\u6587\u7AE0"}],"readingTime":2.546666666666667,"hasTruncateMarker":false,"authors":[{"name":"\u7D20\u660E\u8BDA","title":"Full stack development","url":"https://github.com/sumingcheng","page":{"permalink":"/docs-hub/blog/authors/sumingcheng"},"socials":{"x":"https://x.com/sumingcheng","github":"https://github.com/sumingcheng"},"imageURL":"https://github.com/user-attachments/assets/9a06bd55-094a-4efc-91c3-d1b92236822f","key":"sumingcheng"}],"frontMatter":{"slug":"\u89E3\u51B3\u8DE8\u57DF\u7684\u4E5D\u79CD\u65B9\u6848","title":"\u89E3\u51B3\u8DE8\u57DF\u7684\u4E5D\u79CD\u65B9\u6848","authors":["sumingcheng"],"tags":["network-protocol"],"date":"2023-02-28T00:00:00.000Z"},"unlisted":false,"prevItem":{"title":"npm \u5B89\u88C5\u5305\u65F6\u5E38\u89C1\u53C2\u6570","permalink":"/docs-hub/blog/npm-\u5B89\u88C5\u5305\u65F6\u5E38\u89C1\u53C2\u6570"},"nextItem":{"title":"HTML meta \u6807\u7B7E\u5E38\u89C1\u5C5E\u6027","permalink":"/docs-hub/blog/html-meta-\u6807\u7B7E\u5E38\u89C1\u5C5E\u6027"}}')}}]);