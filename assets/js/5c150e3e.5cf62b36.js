"use strict";(self.webpackChunknote_book=self.webpackChunknote_book||[]).push([["54685"],{50532:function(e,n,s){s.r(n),s.d(n,{assets:function(){return d},contentTitle:function(){return o},default:function(){return h},frontMatter:function(){return t},metadata:function(){return r},toc:function(){return l}});var r=s(49895),c=s(85893),i=s(50065);let t={slug:"ubuntu-\u5B89\u88C5-microk8s",title:"Ubuntu \u5B89\u88C5 MicroK8s",authors:["sumingcheng"],tags:["dev-tools"],date:new Date("2024-09-10T00:00:00.000Z")},o="Ubuntu \u5B89\u88C5 MicroK8s",d={authorsImageUrls:[void 0]},l=[{value:"\u5B89\u88C5 MicroK8s",id:"\u5B89\u88C5-microk8s",level:2},{value:"\u5378\u8F7D",id:"\u5378\u8F7D",level:3},{value:"\u914D\u7F6E MicroK8s \u4EE3\u7406",id:"\u914D\u7F6E-microk8s-\u4EE3\u7406",level:3},{value:"\u542F\u7528 MicroK8s \u670D\u52A1",id:"\u542F\u7528-microk8s-\u670D\u52A1",level:2},{value:"1. \u4FEE\u6539\u522B\u540D",id:"1-\u4FEE\u6539\u522B\u540D",level:3},{value:"2. \u4F7F\u7528 Bash \u4E2D\u7684&gt;\u64CD\u4F5C\u7B26\u6765\u5F3A\u5236\u8986\u76D6",id:"2-\u4F7F\u7528-bash-\u4E2D\u7684\u64CD\u4F5C\u7B26\u6765\u5F3A\u5236\u8986\u76D6",level:3},{value:"\u53C2\u8003\u6587\u6863",id:"\u53C2\u8003\u6587\u6863",level:2}];function a(e){let n={a:"a",code:"code",h2:"h2",h3:"h3",img:"img",p:"p",pre:"pre",strong:"strong",...(0,i.a)(),...e.components};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(n.h2,{id:"\u5B89\u88C5-microk8s",children:"\u5B89\u88C5 MicroK8s"}),"\n",(0,c.jsx)(n.p,{children:"MicroK8s \u662F\u901A\u8FC7 Snap \u5305\u63D0\u4F9B\u7684\uFF0C\u56E0\u6B64\u786E\u4FDD\u4F60\u7684\u7CFB\u7EDF\u652F\u6301 Snap \u5305\u3002\u5728 Ubuntu \u4E0A\uFF0CSnap \u901A\u5E38\u5DF2\u7ECF\u9884\u5B89\u88C5\u3002"}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.strong,{children:"\u5B89\u88C5 MicroK8s"})}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:"sudo snap install microk8s --classic\n"})}),"\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.code,{children:"--classic"})," \u6807\u5FD7\u8868\u793A\u5141\u8BB8 Snap \u5305\u8BBF\u95EE\u7CFB\u7EDF\u7684\u66F4\u591A\u8D44\u6E90\u3002"]}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.img,{alt:"0f8aeecf45018094ce7651154df1b94c",src:s(18524).Z+"",width:"1248",height:"81"})}),"\n",(0,c.jsx)(n.p,{children:"\u5B89\u88C5\u6210\u529F"}),"\n",(0,c.jsx)(n.h3,{id:"\u5378\u8F7D",children:"\u5378\u8F7D"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:"sudo snap remove microk8s --purge\n"})}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.strong,{children:"\u6DFB\u52A0\u7528\u6237\u5230 MicroK8s \u7EC4"})}),"\n",(0,c.jsxs)(n.p,{children:["\u4E3A\u4E86\u907F\u514D\u5728\u4F7F\u7528 MicroK8s \u547D\u4EE4\u65F6\u603B\u662F\u9700\u8981 sudo\uFF0C\u53EF\u4EE5\u5C06\u4F60\u7684\u7528\u6237\u6DFB\u52A0\u5230 ",(0,c.jsx)(n.code,{children:"microk8s"})," \u7EC4"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:"sudo usermod -a -G microk8s $USER\nsudo chown -f -R $USER ~/.kube\n"})}),"\n",(0,c.jsx)(n.p,{children:"\u7136\u540E\u4F60\u9700\u8981\u6CE8\u9500\u518D\u767B\u5F55\uFF0C\u4F7F\u66F4\u6539\u751F\u6548\u3002"}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.strong,{children:"\u68C0\u67E5 MicroK8s \u72B6\u6001"})}),"\n",(0,c.jsx)(n.p,{children:"\u4F7F\u7528\u4EE5\u4E0B\u547D\u4EE4\u68C0\u67E5 MicroK8s \u662F\u5426\u6B63\u786E\u5B89\u88C5\u5E76\u6B63\u5728\u8FD0\u884C"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:"microk8s status --wait-ready\n"})}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.img,{alt:"bb025162c99abe0f53cfd24e360aae49",src:s(52443).Z+"",width:"1440",height:"1202"})}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.strong,{children:"\u5982\u679C\u6CA1\u6709\u770B\u5230\u6B63\u5E38\u8F93\u51FA\uFF0C\u6216\u8005\u5361\u4F4F\uFF0C\u5927\u6982\u7387\u662F\u7F51\u7EDC\u95EE\u9898\u3002\u4F60\u9700\u8981\u914D\u7F6E\u4EE3\u7406"})}),"\n",(0,c.jsx)(n.h3,{id:"\u914D\u7F6E-microk8s-\u4EE3\u7406",children:"\u914D\u7F6E MicroK8s \u4EE3\u7406"}),"\n",(0,c.jsx)(n.p,{children:"\u4E3A\u4E86\u786E\u4FDD MicroK8s \u5185\u90E8\u7684 Kubernetes \u7EC4\u4EF6\u4E5F\u80FD\u4F7F\u7528\u4EE3\u7406\uFF0C\u4F60\u53EF\u4EE5\u4FEE\u6539 MicroK8s \u7684\u670D\u52A1\u5B9A\u4E49\uFF0C\u6DFB\u52A0\u73AF\u5883\u53D8\u91CF\u3002MicroK8s \u4F7F\u7528 systemd \u670D\u52A1\u7BA1\u7406\u5176\u7EC4\u4EF6\uFF0C\u56E0\u6B64\u4F60\u53EF\u4EE5\u76F4\u63A5\u4FEE\u6539\u8FD9\u4E9B\u670D\u52A1\u6587\u4EF6\uFF1A"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:"sudo nano /var/snap/microk8s/current/args/containerd-env\n"})}),"\n",(0,c.jsx)(n.p,{children:"\u5728\u8BE5\u6587\u4EF6\u5185\u6DFB\u52A0\u4EE5\u4E0B\u884C\uFF0C\u6362\u6210\u4F60\u7684\u4EE3\u7406\u5730\u5740"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:"export HTTP_PROXY=http://172.22.220.64:7890\nexport HTTPS_PROXY=http://172.22.220.64:7890\nexport NO_PROXY=localhost,127.0.0.1,.cluster.local\n"})}),"\n",(0,c.jsx)(n.p,{children:"\u4FDD\u5B58\u5E76\u5173\u95ED\u6587\u4EF6\u3002\u7136\u540E\uFF0C\u91CD\u542F MicroK8s \u4EE5\u4F7F\u66F4\u6539\u751F\u6548"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:"microk8s stop\nmicrok8s start\n"})}),"\n",(0,c.jsx)(n.h2,{id:"\u542F\u7528-microk8s-\u670D\u52A1",children:"\u542F\u7528 MicroK8s \u670D\u52A1"}),"\n",(0,c.jsx)(n.p,{children:"MicroK8s \u63D0\u4F9B\u4E86\u8BB8\u591A Kubernetes \u7684\u6807\u51C6\u670D\u52A1\u548C\u9644\u52A0\u7EC4\u4EF6\u3002\u4F60\u53EF\u4EE5\u6839\u636E\u9700\u8981\u542F\u7528"}),"\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.strong,{children:"DNS"}),": DNS \u63D2\u4EF6\u662F Kubernetes \u96C6\u7FA4\u4E2D\u7684\u6838\u5FC3\uFF0C\u8D1F\u8D23\u5728\u96C6\u7FA4\u5185\u90E8\u63D0\u4F9B\u540D\u79F0\u89E3\u6790\u670D\u52A1\uFF0C\u4F7F\u5F97 Pods \u80FD\u591F\u901A\u8FC7\u670D\u52A1\u540D\u800C\u975E IP \u5730\u5740\u76F8\u4E92\u901A\u4FE1\u3002"]}),"\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.strong,{children:"Dashboard"}),": Kubernetes Dashboard \u63D0\u4F9B\u4E86\u4E00\u4E2A\u57FA\u4E8E Web \u7684\u7528\u6237\u754C\u9762\uFF0C\u5141\u8BB8\u7528\u6237\u76F4\u89C2\u5730\u7BA1\u7406\u548C\u76D1\u63A7\u96C6\u7FA4\u4E2D\u7684\u8D44\u6E90\uFF0C\u5982 Pods \u548C Deployments\u3002"]}),"\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.strong,{children:"Storage"}),": \u5B58\u50A8\u63D2\u4EF6\u5141\u8BB8\u5728 Kubernetes \u96C6\u7FA4\u4E2D\u914D\u7F6E\u6301\u4E45\u5316\u5B58\u50A8\u89E3\u51B3\u65B9\u6848\uFF0C\u652F\u6301\u5982\u6301\u4E45\u5377\uFF08Persistent Volumes\uFF09\u7B49\u5B58\u50A8\u8D44\u6E90\u7684\u4F7F\u7528"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:"microk8s enable dns dashboard storage\n"})}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.strong,{children:"\u8BBF\u95EE Kubernetes Dashboard"})}),"\n",(0,c.jsx)(n.p,{children:"\u5982\u679C\u4F60\u542F\u7528\u4E86 dashboard\uFF0C\u53EF\u4EE5\u901A\u8FC7\u4EE5\u4E0B\u547D\u4EE4\u83B7\u53D6\u8BBF\u95EE\u4EE4\u724C"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:"microk8s dashboard-proxy\n"})}),"\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.img,{alt:"30d12ece67bdbdbec631efdbfabd4002",src:s(96692).Z+"",width:"1267",height:"560"}),"## \u6807\u51C6\u7684 kubectl \u547D\u4EE4\u800C\u4E0D\u662F\u6BCF\u6B21\u90FD\u952E\u5165 microk8s kubectl"]}),"\n",(0,c.jsx)(n.h3,{id:"1-\u4FEE\u6539\u522B\u540D",children:"1. \u4FEE\u6539\u522B\u540D"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:"nano ~/.bashrc  # \u6216\u8005 ~/.zshrc\uFF0C\u53D6\u51B3\u4E8E\u4F60\u4F7F\u7528\u7684 shell\n# \u5728\u6587\u4EF6\u7684\u672B\u5C3E\u6DFB\u52A0\u4EE5\u4E0B\u884C\nalias kubectl='microk8s kubectl'\n# \u4FDD\u5B58\u5E76\u5173\u95ED\u6587\u4EF6\uFF0C\u7136\u540E\u91CD\u65B0\u52A0\u8F7D\u914D\u7F6E\nsource ~/.bashrc  # \u6216\u8005 source ~/.zshrc\n"})}),"\n",(0,c.jsx)(n.h3,{id:"2-\u4F7F\u7528-bash-\u4E2D\u7684\u64CD\u4F5C\u7B26\u6765\u5F3A\u5236\u8986\u76D6",children:"2. \u4F7F\u7528 Bash \u4E2D\u7684>\u64CD\u4F5C\u7B26\u6765\u5F3A\u5236\u8986\u76D6"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:"microk8s config > ~/.kube/config\n"})}),"\n",(0,c.jsx)(n.h2,{id:"\u53C2\u8003\u6587\u6863",children:"\u53C2\u8003\u6587\u6863"}),"\n",(0,c.jsxs)(n.p,{children:["MicroK8s \u7684",(0,c.jsx)(n.a,{href:"https://microk8s.io/docs",children:"https://microk8s.io/docs"})]})]})}function h(e={}){let{wrapper:n}={...(0,i.a)(),...e.components};return n?(0,c.jsx)(n,{...e,children:(0,c.jsx)(a,{...e})}):a(e)}},18524:function(e,n,s){s.d(n,{Z:function(){return r}});let r=s.p+"assets/images/0f8aeecf45018094ce7651154df1b94c-ef36d0fe9725bce6f7a687b49cdf57ae.jpg"},96692:function(e,n,s){s.d(n,{Z:function(){return r}});let r=s.p+"assets/images/30d12ece67bdbdbec631efdbfabd4002-277c6a9ecbba50f2bf73fdfa42ba166b.jpg"},52443:function(e,n,s){s.d(n,{Z:function(){return r}});let r=s.p+"assets/images/bb025162c99abe0f53cfd24e360aae49-b1fc690796d6e1fa01bddb4a668d58e3.jpg"},50065:function(e,n,s){s.d(n,{Z:function(){return o},a:function(){return t}});var r=s(67294);let c={},i=r.createContext(c);function t(e){let n=r.useContext(i);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(c):e.components||c:t(e.components),r.createElement(i.Provider,{value:n},e.children)}},49895:function(e){e.exports=JSON.parse('{"permalink":"/docs-hub/blog/ubuntu-\u5B89\u88C5-microk8s","editUrl":"https://github.com/sumingcheng/docs-hub/blog/\u5F00\u53D1\u5DE5\u5177\u4E0E\u73AF\u5883/2024-09-10-Ubuntu_\u5B89\u88C5_MicroK8s.md","source":"@site/blog/\u5F00\u53D1\u5DE5\u5177\u4E0E\u73AF\u5883/2024-09-10-Ubuntu_\u5B89\u88C5_MicroK8s.md","title":"Ubuntu \u5B89\u88C5 MicroK8s","description":"\u5B89\u88C5 MicroK8s","date":"2024-09-10T00:00:00.000Z","tags":[{"inline":false,"label":"\u5F00\u53D1\u5DE5\u5177\u4E0E\u73AF\u5883","permalink":"/docs-hub/blog/tags/dev-tools","description":"\u5F00\u53D1\u5DE5\u5177\u548C\u73AF\u5883\u914D\u7F6E\u76F8\u5173\u6587\u7AE0"}],"readingTime":2.04,"hasTruncateMarker":false,"authors":[{"name":"\u7D20\u660E\u8BDA","title":"Full stack development","url":"https://github.com/sumingcheng","page":{"permalink":"/docs-hub/blog/authors/sumingcheng"},"socials":{"x":"https://x.com/sumingcheng","github":"https://github.com/sumingcheng"},"imageURL":"https://github.com/user-attachments/assets/9a06bd55-094a-4efc-91c3-d1b92236822f","key":"sumingcheng"}],"frontMatter":{"slug":"ubuntu-\u5B89\u88C5-microk8s","title":"Ubuntu \u5B89\u88C5 MicroK8s","authors":["sumingcheng"],"tags":["dev-tools"],"date":"2024-09-10T00:00:00.000Z"},"unlisted":false,"prevItem":{"title":"Snap \u5E38\u7528\u547D\u4EE4\u4EE3\u7406\u914D\u7F6E","permalink":"/docs-hub/blog/snap-\u5E38\u7528\u547D\u4EE4\u4EE3\u7406\u914D\u7F6E"},"nextItem":{"title":"\u5B89\u88C5 Helm \u914D\u7F6E\u4EE3\u7406","permalink":"/docs-hub/blog/\u5B89\u88C5-helm-\u914D\u7F6E\u4EE3\u7406"}}')}}]);